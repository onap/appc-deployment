[{"id":"99f53284.c7a4f","type":"dgstart","name":"DGSTART","outputs":1,"x":235.31257247924805,"y":119.68750190734863,"z":"f77957d3.436788","wires":[["a9b40552.94aed8"]]},{"id":"a9b40552.94aed8","type":"service-logic","name":"APPC 2.0.0","module":"APPC","version":"2.0.0","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='APPC' version='2.0.0'>","outputs":1,"x":410.31257247924805,"y":118.68750190734863,"z":"f77957d3.436788","wires":[["da95e894.c26c18"]]},{"id":"da95e894.c26c18","type":"method","name":"Rebuild_VNF","xml":"<method rpc='Rebuild_VNF' mode='sync'>\n","comments":"","outputs":1,"x":255.0626335144043,"y":223.18749523162842,"z":"f77957d3.436788","wires":[["5ad7a0e2.e23a5"]]},{"id":"3b455418.9d0d5c","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":540.3129081726074,"y":236.68750190734863,"z":"f77957d3.436788","wires":[["b2aedd26.cf3c9"]]},{"id":"8fe42265.357f9","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":539.3129081726074,"y":186.68750190734863,"z":"f77957d3.436788","wires":[["b2aedd26.cf3c9"]]},{"id":"9790f27c.2ad33","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":533.3129081726074,"y":291.6875171661377,"z":"f77957d3.436788","wires":[["b2aedd26.cf3c9"]]},{"id":"5ad7a0e2.e23a5","type":"execute","name":"Set payload in Context","xml":"<execute plugin='org.onap.appc.dg.common.JsonDgUtil' method='flatAndAddToContext' >\n<parameter name=\"payload\" value=\"`$input.payload`\" />","comments":"","outputs":1,"x":313.3126640319824,"y":290.68753242492676,"z":"f77957d3.436788","wires":[["3b455418.9d0d5c","8fe42265.357f9","9790f27c.2ad33","410c982.243e868"]]},{"id":"410c982.243e868","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":539.3126029968262,"y":354.68753242492676,"z":"f77957d3.436788","wires":[["75980c6e.458ef4"]]},{"id":"75980c6e.458ef4","type":"execute","name":"Get Vnf Hierarchy","xml":"<execute plugin='org.onap.appc.dg.aai.AAIPlugin' method='getVnfHierarchy'>\n<parameter name=\"resourceKey\" value=\"`$input.action-identifiers.vnf-id`\" />\n","comments":"","outputs":1,"x":710.9792594909668,"y":354.68753242492676,"z":"f77957d3.436788","wires":[["efa01d4c.daf8a","feae5d34.8a474"]]},{"id":"feae5d34.8a474","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":898.979320526123,"y":313.68753242492676,"z":"f77957d3.436788","wires":[["215e20aa.17f1c"]]},{"id":"efa01d4c.daf8a","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":886.9792747497559,"y":391.6874713897705,"z":"f77957d3.436788","wires":[["377be37d.dbad3c"]]},{"id":"377be37d.dbad3c","type":"switchNode","name":"getVnfHierarchy_result ?","xml":"<switch test='`$getVnfHierarchy_result`'>\n","comments":"","outputs":1,"x":1047.9791984558105,"y":459.79861640930176,"z":"f77957d3.436788","wires":[["11ebb613.07c99a","43836cda.890e74"]]},{"id":"11ebb613.07c99a","type":"outcome","name":"SUCCESS","xml":"<outcome value='SUCCESS'>\n","comments":"","outputs":1,"x":1254.97953414917,"y":520.7986755371094,"z":"f77957d3.436788","wires":[["ef94726d.4aae5"]]},{"id":"43836cda.890e74","type":"outcome","name":"FAILURE","xml":"<outcome value='FAILURE'>\n","comments":"","outputs":1,"x":1253.9794425964355,"y":399.79861640930176,"z":"f77957d3.436788","wires":[["215e20aa.17f1c"]]},{"id":"ef94726d.4aae5","type":"switchNode","name":"VNF_VMCount ?","xml":"<switch test='`$VNF.VMCount`'>","comments":"","outputs":1,"x":1288.97953414917,"y":588.9095458984375,"z":"f77957d3.436788","wires":[["952ce3f8.01a9e","eb66eab0.036e88"]]},{"id":"952ce3f8.01a9e","type":"outcome","name":"0","xml":"<outcome value='0'>\n","comments":"","outputs":1,"x":1474.9791679382324,"y":521.9096984863281,"z":"f77957d3.436788","wires":[["3a947231.c5d04e"]]},{"id":"eb66eab0.036e88","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1394.9791679382324,"y":654.90966796875,"z":"f77957d3.436788","wires":[["777e65f.8ffec9c"]]},{"id":"777e65f.8ffec9c","type":"execute","name":"Get Execution Flow","xml":"<execute plugin='org.onap.appc.dg.common.VnfExecutionFlow' method='getVnfExecutionFlowData' >\n<parameter name=\"DependencyType\" value='RESOURCE' />\n<parameter name=\"FlowStrategy\" value='FORWARD' />\n<parameter name=\"vnfType\" value='`$vnf.type`' />\n<parameter name=\"vnfVersion\" value='`$vnf.version`' />\n","comments":"","outputs":1,"x":1452.9791679382324,"y":730.0208740234375,"z":"f77957d3.436788","wires":[["522a1860.9fb9c8","b54140f0.04101"]]},{"id":"522a1860.9fb9c8","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1644.9789848327637,"y":730.0207233428955,"z":"f77957d3.436788","wires":[["1e3f1032.b213d"]]},{"id":"b54140f0.04101","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1643.97904586792,"y":651.020751953125,"z":"f77957d3.436788","wires":[["328235af.1f26fa"]]},{"id":"b2aedd26.cf3c9","type":"block","name":"block","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":713.979564666748,"y":237.68750190734863,"z":"f77957d3.436788","wires":[["a17353c8.0a34b","76da6170.dde8f"]]},{"id":"a17353c8.0a34b","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name=\"output.status.message\" value=\"Failure in flattening payload Json\" />","comments":"","x":911.3125114440918,"y":238.21122932434082,"z":"f77957d3.436788","wires":[]},{"id":"215e20aa.17f1c","type":"block","name":"block","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1408.7570457458496,"y":316.57641792297363,"z":"f77957d3.436788","wires":[["4fe9b7ed.1601f8","ca19586f.86d648"]]},{"id":"4fe9b7ed.1601f8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n","comments":"","x":1597.7572135925293,"y":377.57641792297363,"z":"f77957d3.436788","wires":[]},{"id":"3a947231.c5d04e","type":"block","name":"block","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1605.3126640319824,"y":520.9097595214844,"z":"f77957d3.436788","wires":[["97f70dfc.79444","e1d3466f.0e7098"]]},{"id":"97f70dfc.79444","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n","comments":"","x":1794.3126640319824,"y":549.9098205566406,"z":"f77957d3.436788","wires":[]},{"id":"328235af.1f26fa","type":"block","name":"block","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1778.3126640319824,"y":652.1318073272705,"z":"f77957d3.436788","wires":[["24b5e0d0.c01c6","d3f21815.793788"]]},{"id":"24b5e0d0.c01c6","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n","comments":"","x":1967.3131523132324,"y":687.131929397583,"z":"f77957d3.436788","wires":[]},{"id":"93d0ecc5.6556b","type":"for","name":"For each VNFC","xml":"<for index='i' start='0' end='`$vnfcFlowCount`' >\n","comments":"","outputs":1,"x":2342.5345039367676,"y":866.3541383743286,"z":"f77957d3.436788","wires":[["11fb64b5.aabd0b"]]},{"id":"67a8f3f3.8d9cbc","type":"call","name":"call VNFC DG","xml":"<call module='`$Rebuild.dg_module`' rpc='`$Rebuild.dg_name`' mode='sync' version='`$Rebuild.dg_version`'>\n","comments":"","outputs":1,"x":2754.534282684326,"y":950.4653339385986,"z":"f77957d3.436788","wires":[["d9556b49.ff6288","5d547b5d.13dd54","259d70ea.9205b"]]},{"id":"4a7f68fb.0b9158","type":"block","name":"block","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2137.534770965576,"y":864.3543109893799,"z":"f77957d3.436788","wires":[["93d0ecc5.6556b","ccca5726.839cc8","1ab58ce2.ef51e3"]]},{"id":"44559cc.a01e864","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":2990.534526824951,"y":717.3544635772705,"z":"f77957d3.436788","wires":[["2596cb0e.a268b4"]]},{"id":"c8863e0a.cada4","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2986.534282684326,"y":799.3544635772705,"z":"f77957d3.436788","wires":[["a339e96.0db2d18"]]},{"id":"a339e96.0db2d18","type":"block","name":"block","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":3132.819637298584,"y":796.3544721603394,"z":"f77957d3.436788","wires":[["b6d198f4.0d1278","b0d45e14.49d5c"]]},{"id":"b6d198f4.0d1278","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n","comments":"","x":3354.534038543701,"y":799.3544635772705,"z":"f77957d3.436788","wires":[]},{"id":"259d70ea.9205b","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":2950.311870574951,"y":998.5765399932861,"z":"f77957d3.436788","wires":[["926558dc.646c48"]]},{"id":"5d547b5d.13dd54","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":2948.312114715576,"y":906.576509475708,"z":"f77957d3.436788","wires":[["50a44cd4.d414e4"]]},{"id":"d9556b49.ff6288","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2960.312358856201,"y":950.5765399932861,"z":"f77957d3.436788","wires":[["99a282c4.2df92"]]},{"id":"11fb64b5.aabd0b","type":"block","name":"block","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2513.2009086608887,"y":865.5765399932861,"z":"f77957d3.436788","wires":[["67a8f3f3.8d9cbc","7b35db37.4c0c44","f46a554a.bb3ab8","404a068e.f88bb8"]]},{"id":"1e3f1032.b213d","type":"switchNode","name":"dependencyModelFound","xml":"<switch test='`$dependencyModelFound`'>\n","comments":"","outputs":1,"x":1790.9791679382324,"y":809.4653015136719,"z":"f77957d3.436788","wires":[["22bf2bd5.9d34d4","dc4848ab.c0f558"]]},{"id":"22bf2bd5.9d34d4","type":"outcome","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":1988.6460990905762,"y":754.5763874053955,"z":"f77957d3.436788","wires":[["d3204260.85134"]]},{"id":"d3204260.85134","type":"block","name":"block","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2114.0908012390137,"y":754.6874713897705,"z":"f77957d3.436788","wires":[["52cba35.33bcb5c","58b344dc.ff91ec"]]},{"id":"52cba35.33bcb5c","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n","comments":"","x":2294.0905570983887,"y":754.6874713897705,"z":"f77957d3.436788","wires":[]},{"id":"dc4848ab.c0f558","type":"outcome","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1995.9791069030762,"y":864.4655170440674,"z":"f77957d3.436788","wires":[["4a7f68fb.0b9158"]]},{"id":"7b35db37.4c0c44","type":"execute","name":"Resolve VNFC DG","xml":"<execute plugin='org.onap.appc.dg.common.VNFCDgResolverPlugin' method='resolveVNFCDg'>\n<parameter name=\"vnfType\" value='`$vnf.type`' />\n<parameter name=\"vnfcType\" value='`$vnfcFlow[$i].vnfcType`' />\n<parameter name=\"action\" value=\"Rebuild\" />\n<parameter name=\"api-ver\" value='`$input.common-header.api-ver`' />\n<parameter name=\"prefix\" value=\"Rebuild\" />\n","comments":"","outputs":1,"x":2747.312114715576,"y":758.437593460083,"z":"f77957d3.436788","wires":[["44559cc.a01e864","c8863e0a.cada4"]]},{"id":"f46a554a.bb3ab8","type":"set","name":"set DG Parameters","xml":"<set>\n<parameter name='vnfcName' value='`$vnfcFlow[$i].vnfcName`' />\n<parameter name='vnfcType' value='`$vnfcFlow[$i].vnfcType`' />\n<parameter name='resilienceType' value='`$vnfcFlow[$i].resilienceType`' />\n<parameter name='vmCount' value='`$vnfcFlow[$i].vmCount`' />\n<parameter name='input.action' value='`$input.action`' />\n<parameter name='HealthyVMCountAfterRebuild' value='0' />\n<parameter name='AAIUpdateSuccessFlag' value='false' />\n<parameter name='HealthcheckDGResolutionFlag' value='false' />","comments":"","x":2748.3394660949707,"y":809.5209503173828,"z":"f77957d3.436788","wires":[]},{"id":"404a068e.f88bb8","type":"for","name":"For Each VM","xml":"<for index='j' start='0' end='`$vnfcFlow[$i].vmCount`' >\n","comments":"","outputs":1,"x":2742.11727142334,"y":864.4929323196411,"z":"f77957d3.436788","wires":[["278b0a4a.a73a06"]]},{"id":"278b0a4a.a73a06","type":"set","name":"Set VM URL","xml":"<set>\n<parameter name=\"$vm[$j].url\" value='`$vnfcFlow[$i].vm[$j].url`' />","comments":"","x":2940.117290496826,"y":858.4928302764893,"z":"f77957d3.436788","wires":[]},{"id":"50a44cd4.d414e4","type":"block","name":"block","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":3111.201030731201,"y":905.6875324249268,"z":"f77957d3.436788","wires":[["caad9bb9.958e28","788bd40a.39f6cc"]]},{"id":"caad9bb9.958e28","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n","comments":"","x":3337.201274871826,"y":903.6875629425049,"z":"f77957d3.436788","wires":[]},{"id":"99a282c4.2df92","type":"block","name":"block","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":3126.201030731201,"y":951.6875629425049,"z":"f77957d3.436788","wires":[["c1c2198e.b73818"]]},{"id":"ae52a5c8.97a288","type":"switchNode","name":"switch_vm_rebuild_success","xml":"<switch test='`$HealthyVMCountAfterRebuild >= 1 and $AAIUpdateSuccessFlag == true`'>\n","comments":"","outputs":1,"x":3738.7842330932617,"y":953.0489025115967,"z":"f77957d3.436788","wires":[["b21bf1ff.bd44","5b5f2276.10bb4c"]]},{"id":"5b5f2276.10bb4c","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":3945.062313079834,"y":896.7989635467529,"z":"f77957d3.436788","wires":[["f4ce492.fb423b8"]]},{"id":"b21bf1ff.bd44","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":3929.062313079834,"y":1008.5488433837891,"z":"f77957d3.436788","wires":[["a294dfb8.f861e"]]},{"id":"f4ce492.fb423b8","type":"block","name":"block","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":4081.0620727539062,"y":898.0489025115967,"z":"f77957d3.436788","wires":[["122dbb1e.5a5a05","e05695d0.20cab8","1a818ff1.7d3c","e479b650.bda0f8","96766d41.3d0c2"]]},{"id":"91041bf9.e984f8","type":"set","name":"update failed VNFC count","xml":"<set>\n<parameter name=\"FailedVNFCCount\" value=\"`$FailedVNFCCount + 1`\" />\n","comments":"","x":4266.229263305664,"y":1062.7987823486328,"z":"f77957d3.436788","wires":[]},{"id":"122dbb1e.5a5a05","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n","comments":"","x":4265.367492675781,"y":953.5490856170654,"z":"f77957d3.436788","wires":[]},{"id":"a294dfb8.f861e","type":"block","name":"block","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":4065.423107147217,"y":1009.9099273681641,"z":"f77957d3.436788","wires":[["91041bf9.e984f8","6f1de83d.2a2998"]]},{"id":"1ab58ce2.ef51e3","type":"switchNode","name":"switch_vnfc_rebuild_success","xml":"<switch test='`$FailedVNFCCount == 0`'>\n","comments":"","outputs":1,"x":2389.756694793701,"y":1038.687593460083,"z":"f77957d3.436788","wires":[["637851ad.9627a","f0efea53.43f2c8"]]},{"id":"637851ad.9627a","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":2603.756694793701,"y":1000.6875324249268,"z":"f77957d3.436788","wires":[["cc826579.efac68"]]},{"id":"f0efea53.43f2c8","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2604.256938934326,"y":1077.687593460083,"z":"f77957d3.436788","wires":[["e4468fd0.07a52"]]},{"id":"cc826579.efac68","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n","comments":"","x":2762.025737762451,"y":1000.2043781280518,"z":"f77957d3.436788","wires":[]},{"id":"e4468fd0.07a52","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n","comments":"","x":2765.256694793701,"y":1076.6044025421143,"z":"f77957d3.436788","wires":[]},{"id":"ccca5726.839cc8","type":"set","name":"set Failed VNFC Count","xml":"<set>\n<parameter name='FailedVNFCCount' value='0' />","comments":"","x":2359.756694793701,"y":806.6875629425049,"z":"f77957d3.436788","wires":[]},{"id":"926558dc.646c48","type":"record","name":"Log message","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"debug\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"record\" value=\"`'Rebuild successful for VNFC : ' + $vnfcName `\"/>\n","comments":"","outputs":1,"x":3130.0897178649902,"y":999.6878213882446,"z":"f77957d3.436788","wires":[[]]},{"id":"e05695d0.20cab8","type":"record","name":"Log message","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"error\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"record\" value=\"`$event-message`\"/>\n","comments":"","outputs":1,"x":4282.089900970459,"y":831.4378781318665,"z":"f77957d3.436788","wires":[[]]},{"id":"6f1de83d.2a2998","type":"record","name":"Log message","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"error\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"record\" value=\"`'Failed to Rebuild all VMs for VNFC : ' + $vnfcName + '. But successfully Rebuilt '+ $HealthyVMCountAfterRebuild +' VM/s so continue to next VNFC'`\"/>\n","comments":"","outputs":1,"x":4232.768569946289,"y":1006.5807037353516,"z":"f77957d3.436788","wires":[[]]},{"id":"2596cb0e.a268b4","type":"record","name":"Log message","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"debug\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"record\" value=\"`'VNFC DG for ' + $vnfcName + ' resolves to rpc: ' + $Rebuild.dg_name + ', module: ' + $Rebuild.dg_module + ', version: ' + $Rebuild.dg_version `\"/>\n","comments":"","outputs":1,"x":3148.201274871826,"y":717.6877765655518,"z":"f77957d3.436788","wires":[[]]},{"id":"67776999.51d8f8","type":"set","name":"Set error message","xml":"<set>\n<parameter name=\"event-message\" value=\"`'None of the VMs of VNFC ' + $vnfcName + ' are Rebuilt successfully. Not proceeding to the next VNFC.'`\" />","comments":"","x":4692.192939758301,"y":825.5412721633911,"z":"f77957d3.436788","wires":[]},{"id":"1a818ff1.7d3c","type":"switchNode","name":"switch_aai_update_success","xml":"<switch test='`$AAIUpdateSuccessFlag`'>\n","comments":"","outputs":1,"x":4300.367980957031,"y":791.6320915222168,"z":"f77957d3.436788","wires":[["65446424.620e0c","ae30b408.0a1e68"]]},{"id":"ae30b408.0a1e68","type":"outcomeFalse","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":4508.146545410156,"y":825.3822145462036,"z":"f77957d3.436788","wires":[["67776999.51d8f8"]]},{"id":"65446424.620e0c","type":"outcomeTrue","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":4507.146789550781,"y":760.6319689750671,"z":"f77957d3.436788","wires":[["261792e6.bf79be"]]},{"id":"261792e6.bf79be","type":"set","name":"Set error message","xml":"<set>\n<parameter name=\"event-message\" value=\"`'AAI update for VNFC ' + $vnfcName + '  failed. Not proceeding to the next VNFC.'`\" />","comments":"","x":4697.479560852051,"y":760.3822135925293,"z":"f77957d3.436788","wires":[]},{"id":"76da6170.dde8f","type":"execute","name":"OutputMessageBuilder","xml":"<execute plugin='org.onap.appc.dg.common.OutputMessagePlugin' method='outputMessageBuilder' >\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n<parameter name=\"event-message\" value=\"Failure in flattening payload Json\" />","comments":"","outputs":1,"x":944.3126335144043,"y":189.5763874053955,"z":"f77957d3.436788","wires":[["87b305c2.55be58"]]},{"id":"24fda060.75b99","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1792.3126029968262,"y":268.5763874053955,"z":"f77957d3.436788","wires":[["a4743018.e3d08"]]},{"id":"a4743018.e3d08","type":"execute","name":"Report Error to DCAE","xml":"<execute plugin='org.onap.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"event-message\" value=\"`$event-message`\" />","comments":"","outputs":1,"x":1970.8841361999512,"y":268.29065132141113,"z":"f77957d3.436788","wires":[[]]},{"id":"ca19586f.86d648","type":"execute","name":"OutputMessageBuilder","xml":"<execute plugin='org.onap.appc.dg.common.OutputMessagePlugin' method='outputMessageBuilder' >\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n<parameter name=\"event-message\" value=\"Failed to retrieve VNF details from A&amp;AI\" />","comments":"","outputs":1,"x":1613.3126335144043,"y":267.5763874053955,"z":"f77957d3.436788","wires":[["24fda060.75b99"]]},{"id":"6d00b87f.e84a98","type":"execute","name":"Report Error to DCAE","xml":"<execute plugin='org.onap.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"event-message\" value=\"`$event-message`\" />","comments":"","outputs":1,"x":1353.9791984558105,"y":188.5763874053955,"z":"f77957d3.436788","wires":[[]]},{"id":"87b305c2.55be58","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1152.4076652526855,"y":188.86212348937988,"z":"f77957d3.436788","wires":[["6d00b87f.e84a98"]]},{"id":"e1d3466f.0e7098","type":"execute","name":"OutputMessageBuilder","xml":"<execute plugin='org.onap.appc.dg.common.OutputMessagePlugin' method='outputMessageBuilder' >\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n<parameter name=\"event-message\" value=\"Server/VNFC does not exists in A&amp;AI for the VNF\" />","comments":"","outputs":1,"x":1803.97953414917,"y":488.6875,"z":"f77957d3.436788","wires":[["2b410a66.bb6ac6"]]},{"id":"2b410a66.bb6ac6","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":2348.9794731140137,"y":486.68750190734863,"z":"f77957d3.436788","wires":[["9e2af8d.3cbc608"]]},{"id":"9e2af8d.3cbc608","type":"execute","name":"Report Error to DCAE","xml":"<execute plugin='org.onap.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"event-message\" value=\"`$event-message`\" />","comments":"","outputs":1,"x":2522.5510063171387,"y":486.40176582336426,"z":"f77957d3.436788","wires":[[]]},{"id":"d3f21815.793788","type":"execute","name":"OutputMessageBuilder","xml":"<execute plugin='org.onap.appc.dg.common.OutputMessagePlugin' method='outputMessageBuilder' >\n<parameter name=\"error-message\" value=\"`$error-message`\" />","comments":"","outputs":1,"x":1994.9794692993164,"y":611.7985947132111,"z":"f77957d3.436788","wires":[["2b410a66.bb6ac6"]]},{"id":"58b344dc.ff91ec","type":"execute","name":"OutputMessageBuilder","xml":"<execute plugin='org.onap.appc.dg.common.OutputMessagePlugin' method='outputMessageBuilder' >\n<parameter name=\"error-message\" value=\"`$error-message`\" />","comments":"","outputs":1,"x":2281.6454887390137,"y":665.7985553741455,"z":"f77957d3.436788","wires":[["2b410a66.bb6ac6"]]},{"id":"b0d45e14.49d5c","type":"execute","name":"OutputMessageBuilder","xml":"<execute plugin='org.onap.appc.dg.common.OutputMessagePlugin' method='outputMessageBuilder' >\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n<parameter name=\"event-message\" value=\"`'Failed to retrieve VNFC DG for : ' + $vnfcFlow[$i].vnfcType`\"/>","comments":"","outputs":1,"x":3381.7571983337402,"y":752.9097415208817,"z":"f77957d3.436788","wires":[["72dfca4f.62a4d4"]]},{"id":"72dfca4f.62a4d4","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":3618.8770141601562,"y":750.8344230651855,"z":"f77957d3.436788","wires":[["dc2979a5.4b84e8"]]},{"id":"dc2979a5.4b84e8","type":"execute","name":"Report Error to DCAE","xml":"<execute plugin='org.onap.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"event-message\" value=\"`$event-message`\" />","comments":"","outputs":1,"x":3845.4485473632812,"y":750.1200675964355,"z":"f77957d3.436788","wires":[[]]},{"id":"788bd40a.39f6cc","type":"execute","name":"OutputMessageBuilder","xml":"<execute plugin='org.onap.appc.dg.common.OutputMessagePlugin' method='outputMessageBuilder' >\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n<parameter name=\"event-message\" value=\"`'VNFC DG not found for : ' + $vnfcName`\"/>","comments":"","outputs":1,"x":3346.8682823181152,"y":858.9097442626953,"z":"f77957d3.436788","wires":[["72dfca4f.62a4d4"]]},{"id":"33642eb2.ef4d82","type":"execute","name":"OutputMessageBuilder","xml":"<execute plugin='org.onap.appc.dg.common.OutputMessagePlugin' method='outputMessageBuilder' >\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n<parameter name=\"event-message\" value=\"`$event-message`\"/>","comments":"","outputs":1,"x":4630.340351104736,"y":912.9097423553467,"z":"f77957d3.436788","wires":[["aa0c5a08.e34788"]]},{"id":"aa0c5a08.e34788","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":4820.56333732605,"y":912.5487775802612,"z":"f77957d3.436788","wires":[["729c89d.f391b78"]]},{"id":"729c89d.f391b78","type":"execute","name":"Report Error to DCAE","xml":"<execute plugin='org.onap.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"event-message\" value=\"`$event-message`\" />","comments":"","outputs":1,"x":5005.31268119812,"y":912.187593460083,"z":"f77957d3.436788","wires":[[]]},{"id":"e479b650.bda0f8","type":"set","name":"Set last count","xml":"<set>\n<parameter name='lastVNFCIndex' value='`$vnfcFlowCount - 1`' />","comments":"","x":4276.250019073486,"y":874.6875133514404,"z":"f77957d3.436788","wires":[]},{"id":"96766d41.3d0c2","type":"switchNode","name":"Last vnfc?","xml":"<switch test='`$i >= $lastVNFCIndex`'>\n","comments":"","outputs":1,"x":4285.6250648498535,"y":912.1875133514404,"z":"f77957d3.436788","wires":[["16047b15.b41365"]]},{"id":"16047b15.b41365","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":4444.687517166138,"y":912.8125133514404,"z":"f77957d3.436788","wires":[["33642eb2.ef4d82"]]},{"id":"c1c2198e.b73818","type":"switchNode","name":"switch_healthcheck_res_flag","xml":"<switch test='`$HealthcheckDGResolutionFlag`'>\n","comments":"","outputs":1,"x":3334.6875534057617,"y":952.1875152587891,"z":"f77957d3.436788","wires":[["4727ccbc.cc3de4","27793737.47e1b8"]]},{"id":"4727ccbc.cc3de4","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":3539.6875534057617,"y":952.1875143051147,"z":"f77957d3.436788","wires":[["ae52a5c8.97a288"]]},{"id":"27793737.47e1b8","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":3544.6875,"y":1029.6875,"z":"f77957d3.436788","wires":[["47b9a4c3.5580bc"]]},{"id":"47b9a4c3.5580bc","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n","comments":"","x":3722.1875534057617,"y":1029.687515258789,"z":"f77957d3.436788","wires":[]}]
