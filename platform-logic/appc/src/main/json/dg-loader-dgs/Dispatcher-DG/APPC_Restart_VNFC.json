[{"id":"3999b2fb.e7e18e","type":"dgstart","name":"DGSTART","outputs":1,"x":93.80625915527344,"y":73,"z":"4854885a.f23e18","wires":[["b5e49950.85b5a8"]]},{"id":"b5e49950.85b5a8","type":"service-logic","name":"APPC 2.0.0","module":"APPC","version":"2.0.0","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='APPC' version='2.0.0'>","outputs":1,"x":242.80638122558594,"y":71,"z":"4854885a.f23e18","wires":[["bdcf7e7f.4e437"]]},{"id":"bdcf7e7f.4e437","type":"method","name":"Restart_VNFC","xml":"<method rpc='Restart_VNFC' mode='sync'>\n","comments":"","outputs":1,"x":179.8064422607422,"y":195,"z":"4854885a.f23e18","wires":[["a5783312.b327c"]]},{"id":"1bd84ac3.7fcfd5","type":"execute","name":"Resolve_VNFC_Healthcheck_DG","xml":"<execute plugin='org.openecomp.appc.dg.common.DgResolverPlugin' method='resolveDg'>\n<parameter name=\"vnfType\" value='`$vnf.type`' />\n<parameter name=\"vnfcType\" value='`$vnfcType`' />\n<parameter name=\"action\" value=\"HealthCheck\" />\n<parameter name=\"api-ver\" value='`$input.common-header.api-ver`' />\n<parameter name=\"prefix\" value=\"HealthCheckDG\" />\n<parameter name=\"DGResolutionType\" value=\"VNFC\" />","comments":"","outputs":1,"x":556.8065338134766,"y":131,"z":"4854885a.f23e18","wires":[["53648e0a.881e6","a7ddd2a4.8b0b1","cbf0e15a.5803f"]]},{"id":"53648e0a.881e6","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":820.8063812255859,"y":73,"z":"4854885a.f23e18","wires":[["725f6041.883d9"]]},{"id":"a7ddd2a4.8b0b1","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":815.8064422607422,"y":153,"z":"4854885a.f23e18","wires":[["97c69f2.728956"]]},{"id":"a5783312.b327c","type":"block","name":"block","xml":"<block atomic='true'>","atomic":"false","comments":"","outputs":1,"x":317.80638122558594,"y":335,"z":"4854885a.f23e18","wires":[["1bd84ac3.7fcfd5","d71f5937.f14218","936e1ac5.afa968"]]},{"id":"d71f5937.f14218","type":"execute","name":"Update AAI ","xml":"<execute plugin='org.openecomp.appc.dg.aai.AAIPlugin' method='postResource'>\n<parameter name=\"resourceType\" value=\"vnfc\" />\n<parameter name=\"prefix\" value=\"vnfc\" />\n<parameter name=\"resourceKey\" value='vnfc-name =  $vnfcName' />\n<parameter name=\"attributeName\" value=\"orchestration-status\" />\n<parameter name=\"attributeValue\" value=\"Restarting\" />","comments":"","outputs":1,"x":1197.8065185546875,"y":332.00000762939453,"z":"4854885a.f23e18","wires":[["bea680bc.2d4ac","c88e6fc7.c8b1a","b684c3af.4fe9d"]]},{"id":"936e1ac5.afa968","type":"switchNode","name":"Resilence Type ?","xml":"<switch test='`$resilienceType`'>\n","comments":"","outputs":1,"x":488.80633544921875,"y":589.0002136230469,"z":"4854885a.f23e18","wires":[["c45e35f9.dc3078","f08e1f81.6c0c6","2a0b09fd.8888e6"]]},{"id":"c45e35f9.dc3078","type":"outcome","name":"Active_Active","xml":"<outcome value='Active-Active'>\n","comments":"","outputs":1,"x":685.8064117431641,"y":517.0001220703125,"z":"4854885a.f23e18","wires":[["da64233c.b93ea"]]},{"id":"f08e1f81.6c0c6","type":"outcome","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":669.8064727783203,"y":590.0001525878906,"z":"4854885a.f23e18","wires":[["da64233c.b93ea"]]},{"id":"2a0b09fd.8888e6","type":"outcome","name":"Active_Passive","xml":"<outcome value='Active-Passive'>\n","comments":"","outputs":1,"x":699.8064270019531,"y":673.0003356933594,"z":"4854885a.f23e18","wires":[["c062a5d9.ab8188"]]},{"id":"da64233c.b93ea","type":"call","name":"Restart-Active-Active_VNFC","xml":"<call module='APPC' rpc='Restart-Active-Active_VNFC' mode='sync' >\n","comments":"","outputs":1,"x":902.8066558837891,"y":517.0000915527344,"z":"4854885a.f23e18","wires":[["76b0f0de.90c76","31b4e906.be1f16","f041df7c.46d81"]]},{"id":"c062a5d9.ab8188","type":"call","name":"Restart-Active-Passive_VNFC","xml":"<call module='APPC' rpc='Restart-Active-Passive_VNFC' mode='sync' >\n","comments":"","outputs":1,"x":905.8065338134766,"y":673.0001983642578,"z":"4854885a.f23e18","wires":[["76b0f0de.90c76","31b4e906.be1f16","f041df7c.46d81"]]},{"id":"76b0f0de.90c76","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1157.8064880371094,"y":517.0000915527344,"z":"4854885a.f23e18","wires":[["ebbd3602.006ea8"]]},{"id":"31b4e906.be1f16","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1164.8068542480469,"y":592.0001373291016,"z":"4854885a.f23e18","wires":[["b02a2f12.c650d"]]},{"id":"d9102a6.6c83ed8","type":"execute","name":"Update AAI Error","xml":"<execute plugin='org.openecomp.appc.dg.aai.AAIPlugin' method='postResource'>\n<parameter name=\"resourceType\" value=\"vnfc\" />\n<parameter name=\"prefix\" value=\"vnfc\" />\n<parameter name=\"resourceKey\" value='vnfc-name =  $vnfcName' />\n<parameter name=\"attributeName\" value=\"orchestration-status\" />\n<parameter name=\"attributeValue\" value=\"Error\" />","comments":"","outputs":1,"x":1487.8067474365234,"y":424.000244140625,"z":"4854885a.f23e18","wires":[["bea680bc.2d4ac","c88e6fc7.c8b1a","b684c3af.4fe9d"]]},{"id":"5f6c2b04.563a64","type":"execute","name":"Update AAI Success","xml":"<execute plugin='org.openecomp.appc.dg.aai.AAIPlugin' method='postResource'>\n<parameter name=\"resourceType\" value=\"vnfc\" />\n<parameter name=\"prefix\" value=\"vnfc\" />\n<parameter name=\"resourceKey\" value='vnfc-name =  $vnfcName' />\n<parameter name=\"attributeName\" value=\"orchestration-status\" />\n<parameter name=\"attributeValue\" value=\"Running\" />\n","comments":"","outputs":1,"x":1499.8065032958984,"y":678.0003662109375,"z":"4854885a.f23e18","wires":[["bea680bc.2d4ac","c88e6fc7.c8b1a","b684c3af.4fe9d"]]},{"id":"f2b5d348.d725c","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n\n","comments":"","x":1480.8064880371094,"y":831.0003814697266,"z":"4854885a.f23e18","wires":[]},{"id":"725f6041.883d9","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":963.0286712646484,"y":73.41883087158203,"z":"4854885a.f23e18","wires":[["938f579b.411248","7176b2b1.aefe5c","f1e55ee7.25d16","ecd3f4e6.878f68","92cc8ec.5ca637"]]},{"id":"938f579b.411248","type":"set","name":"Set event message","xml":"<set>\n<parameter name='event-message' value=\"`'Healthcheck DG resolution plugin not found for VNFC : ' + $vnfcName`\"/>\n","comments":"","x":1214.8065643310547,"y":54,"z":"4854885a.f23e18","wires":[]},{"id":"97c69f2.728956","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":963.0286712646484,"y":132.88888549804688,"z":"4854885a.f23e18","wires":[["ebdfd4f1.4d8308","7176b2b1.aefe5c","f1e55ee7.25d16","ecd3f4e6.878f68","92cc8ec.5ca637"]]},{"id":"ebdfd4f1.4d8308","type":"set","name":"Set event message","xml":"<set>\n<parameter name='event-message' value=\"`'Error while resolving Healthcheck DG for VNFC : ' + $vnfcName`\"/>\n","comments":"","x":1225.0286102294922,"y":95.88888549804688,"z":"4854885a.f23e18","wires":[]},{"id":"7176b2b1.aefe5c","type":"record","name":"Log event","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"error\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"record\" value=\"`$event-message`\"/>\n","comments":"","outputs":1,"x":1206.5973358154297,"y":133.18878173828125,"z":"4854885a.f23e18","wires":[[]]},{"id":"f1e55ee7.25d16","type":"execute","name":"OutputMessageBuilder","xml":"<execute plugin='org.openecomp.appc.dg.common.OutputMessagePlugin' method='outputMessageBuilder' >\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n<parameter name=\"event-message\" value=\"`$event-message`\" />","comments":"","outputs":1,"x":1247.4647064208984,"y":172.37603759765625,"z":"4854885a.f23e18","wires":[[]]},{"id":"ecd3f4e6.878f68","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-message' value=\"`$error-message`\"/>","comments":"","x":1216.5843353271484,"y":250.35894775390625,"z":"4854885a.f23e18","wires":[]},{"id":"8c69089c.629f08","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\n","comments":"","x":1499.806625366211,"y":633.00048828125,"z":"4854885a.f23e18","wires":[]},{"id":"b02a2f12.c650d","type":"block","name":"block","xml":"<block atomic='true'>\n","atomic":"false","comments":"","outputs":1,"x":1311.2509460449219,"y":591.0002593994141,"z":"4854885a.f23e18","wires":[["d9102a6.6c83ed8","8c69089c.629f08","518c8bec.70b344"]]},{"id":"51555c54.d61924","type":"block","name":"block","xml":"<block atomic='true'>\n","atomic":"false","comments":"","outputs":1,"x":1294.2510223388672,"y":673.0003356933594,"z":"4854885a.f23e18","wires":[["5f6c2b04.563a64","f2b5d348.d725c","39261310.3b1cac","e457098a.bbf808"]]},{"id":"39261310.3b1cac","type":"record","name":"Log message","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"debug\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"record\" value=\"`'VNFC restarted successfully : ' + $vnfcName`\"/>\n","comments":"","outputs":1,"x":1488.695297241211,"y":782.888916015625,"z":"4854885a.f23e18","wires":[[]]},{"id":"ebbd3602.006ea8","type":"block","name":"block","xml":"<block atomic='true'>\n","atomic":"false","comments":"","outputs":1,"x":1288.5841827392578,"y":516.8889465332031,"z":"4854885a.f23e18","wires":[["8c69089c.629f08","c16bef1.90f251","d9102a6.6c83ed8","518c8bec.70b344","ed0a15aa.d0fb28"]]},{"id":"c16bef1.90f251","type":"execute","name":"OutputMessageBuilder","xml":"<execute plugin='org.openecomp.appc.dg.common.OutputMessagePlugin' method='outputMessageBuilder' >\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n<parameter name=\"event-message\" value=\"`'VNFC Restart DG not found for resilience type : ' + $resilienceType`\" />","comments":"","outputs":1,"x":1530.5840911865234,"y":527.888916015625,"z":"4854885a.f23e18","wires":[[]]},{"id":"bea680bc.2d4ac","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1837.9176025390625,"y":220.11121368408203,"z":"4854885a.f23e18","wires":[["355e292.0ccebd6"]]},{"id":"c88e6fc7.c8b1a","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1832.9173583984375,"y":274.11112213134766,"z":"4854885a.f23e18","wires":[["bc52d02f.83b3b"]]},{"id":"b684c3af.4fe9d","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1792.9172668457031,"y":371.11112213134766,"z":"4854885a.f23e18","wires":[["564492cb.9e00cc"]]},{"id":"564492cb.9e00cc","type":"switchNode","name":"switch","xml":"<switch test='`$postResource_result`'>\n","comments":"","outputs":1,"x":1919.0279541015625,"y":371.0000991821289,"z":"4854885a.f23e18","wires":[["8bd18854.c20b98","f0c03ee4.fd60e"]]},{"id":"8bd18854.c20b98","type":"outcome","name":"NOT_FOUND","xml":"<outcome value='NOT_FOUND'>\n","comments":"","outputs":1,"x":2081.0286865234375,"y":324.0000991821289,"z":"4854885a.f23e18","wires":[["74288e2b.a3955"]]},{"id":"f0c03ee4.fd60e","type":"outcome","name":"FAILURE","xml":"<outcome value='FAILURE'>\n","comments":"","outputs":1,"x":2078.029052734375,"y":403.0000991821289,"z":"4854885a.f23e18","wires":[["7d7bf29.5cc980c"]]},{"id":"74288e2b.a3955","type":"block","name":"block","xml":"<block>","atomic":"true","comments":"","outputs":1,"x":2230.028564453125,"y":324.0000991821289,"z":"4854885a.f23e18","wires":[["3589aab3.2a6646","e9478caf.5709c","51856197.1ce12"]]},{"id":"7d7bf29.5cc980c","type":"block","name":"block","xml":"<block>","atomic":"true","comments":"","outputs":1,"x":2218.028564453125,"y":370.0000991821289,"z":"4854885a.f23e18","wires":[["3589aab3.2a6646","8a498524.f57948","51856197.1ce12"]]},{"id":"3589aab3.2a6646","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n","comments":"","x":2438.0296478271484,"y":538.0001220703125,"z":"4854885a.f23e18","wires":[]},{"id":"f041df7c.46d81","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1155.8069610595703,"y":673.0000915527344,"z":"4854885a.f23e18","wires":[["51555c54.d61924"]]},{"id":"bc52d02f.83b3b","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":2241.806396484375,"y":272.47013092041016,"z":"4854885a.f23e18","wires":[["3589aab3.2a6646","f0d258f1.eac3c8"]]},{"id":"355e292.0ccebd6","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":2241.806396484375,"y":221.00012969970703,"z":"4854885a.f23e18","wires":[["3589aab3.2a6646","d0f8911a.f3c29","51856197.1ce12"]]},{"id":"d0f8911a.f3c29","type":"execute","name":"OutputMessageBuilder","xml":"<execute plugin='org.openecomp.appc.dg.common.OutputMessagePlugin' method='outputMessageBuilder' >\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n<parameter name=\"event-message\" value=\"`'Error occurred while updating VNF details in A&amp;AI for '+ $vnfcName`\"/>\n\n","comments":"","outputs":1,"x":2491.6238861083984,"y":118.484375,"z":"4854885a.f23e18","wires":[[]]},{"id":"f0d258f1.eac3c8","type":"execute","name":"OutputMessageBuilder","xml":"<execute plugin='org.openecomp.appc.dg.common.OutputMessagePlugin' method='outputMessageBuilder' >\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n<parameter name=\"event-message\" value=\"`'Error occurred while updating VNF details in A&amp;AI for '+ $vnfcName`\"/>","comments":"","outputs":1,"x":2476.6241302490234,"y":224.484375,"z":"4854885a.f23e18","wires":[[]]},{"id":"e9478caf.5709c","type":"execute","name":"OutputMessageBuilder","xml":"<execute plugin='org.openecomp.appc.dg.common.OutputMessagePlugin' method='outputMessageBuilder' >\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n<parameter name=\"event-message\" value=\"`'Error occurred while updating VNF details in A&amp;AI for : '+ $vnfcName`\"/>\n\n","comments":"","outputs":1,"x":2453.6240844726562,"y":279.48438262939453,"z":"4854885a.f23e18","wires":[[]]},{"id":"8a498524.f57948","type":"execute","name":"OutputMessageBuilder","xml":"<execute plugin='org.openecomp.appc.dg.common.OutputMessagePlugin' method='outputMessageBuilder' >\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n<parameter name=\"event-message\" value=\"`'Error occurred while updating VNF details in A&amp;AI for '+ $vnfcName`\"/>","comments":"","outputs":1,"x":2453.6241302490234,"y":326.484375,"z":"4854885a.f23e18","wires":[[]]},{"id":"e457098a.bbf808","type":"set","name":"Set AAI update Flag","xml":"<set>\n<parameter name='AAIUpdateSuccessFlag' value='true' />\n","comments":"","x":1499.8062591552734,"y":725,"z":"4854885a.f23e18","wires":[]},{"id":"518c8bec.70b344","type":"set","name":"Set AAI update Flag","xml":"<set>\n<parameter name='AAIUpdateSuccessFlag' value='true' />\n","comments":"","x":1516.3062591552734,"y":477,"z":"4854885a.f23e18","wires":[]},{"id":"51856197.1ce12","type":"execute","name":"Report_Error_To_DCAE","xml":"<execute plugin='org.openecomp.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"event-message\" value=\"`$event-message`\" />","comments":"","outputs":1,"x":2460.8062591552734,"y":399.515625,"z":"4854885a.f23e18","wires":[[]]},{"id":"ed0a15aa.d0fb28","type":"execute","name":"Report_Error_To_DCAE","xml":"<execute plugin='org.openecomp.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"event-message\" value=\"`$event-message`\" />","comments":"","outputs":1,"x":1536.3062591552734,"y":582.515625,"z":"4854885a.f23e18","wires":[[]]},{"id":"92cc8ec.5ca637","type":"execute","name":"Report_Error_To_DCAE","xml":"<execute plugin='org.openecomp.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"event-message\" value=\"`$event-message`\" />","comments":"","outputs":1,"x":1238.3062591552734,"y":210.515625,"z":"4854885a.f23e18","wires":[[]]},{"id":"86490b1e.e7c3e8","type":"record","name":"Log message","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"debug\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"record\" value=\"`'Hleathchek DG resolved to : ' + $HealthCheckDG.dg_name`\"/>\n","comments":"","outputs":1,"x":910.8062591552734,"y":220.515625,"z":"4854885a.f23e18","wires":[[]]},{"id":"cbf0e15a.5803f","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":742.8062591552734,"y":228.51560711860702,"z":"4854885a.f23e18","wires":[["86490b1e.e7c3e8"]]}]
