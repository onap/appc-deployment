[{"id":"1a470291.a963fd","type":"dgstart","name":"DGSTART","outputs":1,"x":85.80625915527344,"y":73,"z":"2fe30bf3.5a02e4","wires":[["368abe9d.90c702"]]},{"id":"368abe9d.90c702","type":"service-logic","name":"APPC 2.0.0","module":"APPC","version":"2.0.0","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='APPC' version='2.0.0'>","outputs":1,"x":119.80638122558594,"y":141,"z":"2fe30bf3.5a02e4","wires":[["9f74d2fb.bc71e"]]},{"id":"9f74d2fb.bc71e","type":"method","name":"Start_VNFC","xml":"<method rpc='Start_VNFC' mode='sync'>\n","comments":"","outputs":1,"x":152.80641174316406,"y":213,"z":"2fe30bf3.5a02e4","wires":[["bdba45dd.15e5c8"]]},{"id":"497933c8.b206ec","type":"execute","name":"Resolve Healthcheck DG","xml":"<execute plugin='org.openecomp.appc.dg.common.VNFCDgResolverPlugin' method='resolveVNFCDg'>\n<parameter name=\"vnfType\" value='`$vnf.type`' />\n<parameter name=\"vnfcType\" value='`$vnfcType`' />\n<parameter name=\"action\" value=\"HealthCheck\" />\n<parameter name=\"api-ver\" value='`$input.common-header.api-ver`' />\n<parameter name=\"prefix\" value=\"HealthCheckDG\" />\n","comments":"","outputs":1,"x":613.8064422607422,"y":143,"z":"2fe30bf3.5a02e4","wires":[["d7ce9461.e88a68","62ec37a8.172928","75dad6ba.48a458"]]},{"id":"d7ce9461.e88a68","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":836.8064422607422,"y":92,"z":"2fe30bf3.5a02e4","wires":[["37af42.94d100be"]]},{"id":"62ec37a8.172928","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":837.8065643310547,"y":143,"z":"2fe30bf3.5a02e4","wires":[["83580dcd.5f36f"]]},{"id":"bdba45dd.15e5c8","type":"block","name":"block","xml":"<block atomic='true'>","atomic":"false","comments":"","outputs":1,"x":132.8063507080078,"y":310,"z":"2fe30bf3.5a02e4","wires":[["497933c8.b206ec","7f5f1cb7.8aca24","f1ed0579.63f1b8","16e2a975.926777","eb4bfac1.da01f8"]]},{"id":"7f5f1cb7.8aca24","type":"execute","name":"Update_AAI_Status","xml":"<execute plugin='org.openecomp.appc.dg.aai.AAIPlugin' method='postResource'>\n<parameter name=\"resourceType\" value=\"vnfc\" />\n<parameter name=\"prefix\" value=\"vnfc\" />\n<parameter name=\"resourceKey\" value='vnfc-name =  $vnfcName' />\n<parameter name=\"attributeName\" value=\"orchestration-status\" />\n<parameter name=\"attributeValue\" value=\"Starting\" />","comments":"","outputs":1,"x":1134.8065643310547,"y":302,"z":"2fe30bf3.5a02e4","wires":[["36bd1de8.b0c632","4cc486e0.d290d8","91b35c7b.49f2c"]]},{"id":"4cc486e0.d290d8","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1443.8068389892578,"y":284,"z":"2fe30bf3.5a02e4","wires":[["8e557a40.222a38"]]},{"id":"91b35c7b.49f2c","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1453.8063507080078,"y":326,"z":"2fe30bf3.5a02e4","wires":[["8e557a40.222a38"]]},{"id":"36bd1de8.b0c632","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1408.8061065673828,"y":244,"z":"2fe30bf3.5a02e4","wires":[["5f8bf1c.c8cef1"]]},{"id":"37af42.94d100be","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":971.0287322998047,"y":91.41883087158203,"z":"2fe30bf3.5a02e4","wires":[["950b3e69.00d3b","5c7ad2d.1115a2c","89c755e0.cb6588","a5078ee3.ebb7f"]]},{"id":"950b3e69.00d3b","type":"set","name":"Set event message","xml":"<set>\n<parameter name='event-message' value=\"`'Healthcheck DG resolution plugin not found for VNFC : ' + $vnfcName`\"/>\n","comments":"","x":1198.8064727783203,"y":75,"z":"2fe30bf3.5a02e4","wires":[]},{"id":"83580dcd.5f36f","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":963.0287322998047,"y":142.88888549804688,"z":"2fe30bf3.5a02e4","wires":[["f4335fed.0da16","5c7ad2d.1115a2c","89c755e0.cb6588","a5078ee3.ebb7f"]]},{"id":"f4335fed.0da16","type":"set","name":"Set event message","xml":"<set>\n<parameter name='event-message' value=\"`'Error while resolving Healthcheck DG for VNFC : ' + $vnfcName`\"/>\n","comments":"","x":1204.0285186767578,"y":122.88888549804688,"z":"2fe30bf3.5a02e4","wires":[]},{"id":"8e557a40.222a38","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1854.6954498291016,"y":285.8888854980469,"z":"2fe30bf3.5a02e4","wires":[["4cfe160d.5a95e8","69cc0201.551e3c"]]},{"id":"5c7ad2d.1115a2c","type":"record","name":"Log error","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"error\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"record\" value=\"`$event-message`\"/>\n","comments":"","outputs":1,"x":1188.5973510742188,"y":169.18878173828125,"z":"2fe30bf3.5a02e4","wires":[[]]},{"id":"89c755e0.cb6588","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-message' value=\"`$error-message`\"/>","comments":"","x":1210.5842742919922,"y":251.35894775390625,"z":"2fe30bf3.5a02e4","wires":[]},{"id":"5f8bf1c.c8cef1","type":"switchNode","name":"switch","xml":"<switch test='`$postResource_result`'>\n","comments":"","outputs":1,"x":1535.9170684814453,"y":243.88888549804688,"z":"2fe30bf3.5a02e4","wires":[["baf70582.73b758","f2273c8a.ea5c4"]]},{"id":"baf70582.73b758","type":"outcome","name":"NOT_FOUND","xml":"<outcome value='NOT_FOUND'>\n","comments":"","outputs":1,"x":1696.9175567626953,"y":195.88888549804688,"z":"2fe30bf3.5a02e4","wires":[["8e557a40.222a38"]]},{"id":"f2273c8a.ea5c4","type":"outcome","name":"FAILURE","xml":"<outcome value='FAILURE'>\n","comments":"","outputs":1,"x":1681.9176788330078,"y":242.88888549804688,"z":"2fe30bf3.5a02e4","wires":[["8e557a40.222a38"]]},{"id":"4cfe160d.5a95e8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n","comments":"","x":2007.0284576416016,"y":344.8888854980469,"z":"2fe30bf3.5a02e4","wires":[]},{"id":"75dad6ba.48a458","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":839.6952514648438,"y":203.88888549804688,"z":"2fe30bf3.5a02e4","wires":[["a8b1a96d.d59ab8"]]},{"id":"a8b1a96d.d59ab8","type":"record","name":"Log message","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"debug\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"record\" value=\"`'Hleathchek DG resolved to : ' + $HealthCheckDG.dg_name`\"/>\n","comments":"","outputs":1,"x":988.3619995117188,"y":203.88888549804688,"z":"2fe30bf3.5a02e4","wires":[[]]},{"id":"3b4f9814.e2ad98","type":"set","name":"init","xml":"<set>\n<parameter name='startFailedCount' value='0' />\n<parameter name='startSuccessCount' value='0' />\n","comments":"","x":514.4516448974609,"y":332.1745910644531,"z":"2fe30bf3.5a02e4","wires":[]},{"id":"9d9e0e20.60bbe","type":"for","name":"for_each_vm","xml":"<for index=\"vmIndex\" start=\"0\" end=\"`$vmCount`\" >","comments":"","outputs":1,"x":532.5944366455078,"y":396.8889465332031,"z":"2fe30bf3.5a02e4","wires":[["cd5abeb4.2254"]]},{"id":"cd5abeb4.2254","type":"block","name":"block","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":696.3618621826172,"y":396.8888854980469,"z":"2fe30bf3.5a02e4","wires":[["4f1c6b48.d34304","809e42b.52a73c","6ce36de3.135c74"]]},{"id":"4f1c6b48.d34304","type":"record","name":"Log message","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"debug\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"record\" value=\"`'Attempting to start the server : ' + $vm[$vmIndex].url`\"/>\n","comments":"","outputs":1,"x":870.7906341552734,"y":345.6031799316406,"z":"2fe30bf3.5a02e4","wires":[[]]},{"id":"6ce36de3.135c74","type":"set","name":"set start parameters","xml":"<set>\n<parameter name=\"start-vm-url\" value=\"`$vm[$vmIndex].url`\" />\n<parameter name='startRetryCount' value='3'/>\n","comments":"","x":890.4515838623047,"y":398.03179931640625,"z":"2fe30bf3.5a02e4","wires":[]},{"id":"809e42b.52a73c","type":"call","name":"Start","xml":"<call module='APPC' rpc='Start_VM' mode='sync' >\n","comments":"","outputs":1,"x":866.4516448974609,"y":484.03173828125,"z":"2fe30bf3.5a02e4","wires":[["e9e973e5.43003","cf35edf3.ce1f3","286386e1.b6b11a"]]},{"id":"286386e1.b6b11a","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1022.7849578857422,"y":438.03173828125,"z":"2fe30bf3.5a02e4","wires":[["f1f6e27e.6487b"]]},{"id":"e9e973e5.43003","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1028.6521453857422,"y":483.9603271484375,"z":"2fe30bf3.5a02e4","wires":[["890ad316.9f99d"]]},{"id":"cf35edf3.ce1f3","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1023.0069732666016,"y":566.0317668914795,"z":"2fe30bf3.5a02e4","wires":[["2779a3f.bc4c45c"]]},{"id":"2779a3f.bc4c45c","type":"block","name":"block","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1164.1498565673828,"y":565.174711227417,"z":"2fe30bf3.5a02e4","wires":[["24b2e5c0.1a66ea","a27787d1.bd06a8","e53b7469.4e2428"]]},{"id":"f1f6e27e.6487b","type":"block","name":"block","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1157.7849578857422,"y":438.03173828125,"z":"2fe30bf3.5a02e4","wires":[["59d92c23.70d234","f0a3b326.8b285","a6dd21c9.3e41c","db25d1d6.9bc34"]]},{"id":"890ad316.9f99d","type":"block","name":"block","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1158.4358367919922,"y":483.888916015625,"z":"2fe30bf3.5a02e4","wires":[["f0a3b326.8b285","a6dd21c9.3e41c","db25d1d6.9bc34","8bd43260.5eb42"]]},{"id":"a27787d1.bd06a8","type":"set","name":"Mark vm Started","xml":"<set>\n<parameter name=\"startedServerList[$startSuccessCount].url\" value=\"`$vm[$vmIndex].url`\" />\n","comments":"","x":1371.1497344970703,"y":566.1747722625732,"z":"2fe30bf3.5a02e4","wires":[]},{"id":"e53b7469.4e2428","type":"set","name":"Increment Started vm count","xml":"<set>\n<parameter name='startSuccessCount' value='`$startSuccessCount+1`' />\n","comments":"","x":1404.8959503173828,"y":605.809476852417,"z":"2fe30bf3.5a02e4","wires":[]},{"id":"24b2e5c0.1a66ea","type":"record","name":"Log message","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"debug\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"record\" value=\"`'Start succeeded for the server : ' + $vm[$vmIndex].url`\"/>\n","comments":"","outputs":1,"x":1356.1498565673828,"y":646.1746826171875,"z":"2fe30bf3.5a02e4","wires":[[]]},{"id":"a6dd21c9.3e41c","type":"record","name":"Log error","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"error\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"record\" value=\"`$event-message`\"/>\n","comments":"","outputs":1,"x":1376.4366912841797,"y":480.7936382293701,"z":"2fe30bf3.5a02e4","wires":[[]]},{"id":"f0a3b326.8b285","type":"set","name":"set_mark_vm_failed","xml":"<set>\n<parameter name=\"startFailedCount\" value=\"`$startFailedCount + 1`\" />\n","comments":"","x":1389.4364471435547,"y":442.79357719421387,"z":"2fe30bf3.5a02e4","wires":[]},{"id":"59d92c23.70d234","type":"set","name":"Set event message","xml":"<set>\n<parameter name='event-message' value=\"`'DG to execute Start action not found for VM: ' + $vm[$vmIndex].url`\"/>\n","comments":"","x":1388.3563690185547,"y":368.74596977233887,"z":"2fe30bf3.5a02e4","wires":[]},{"id":"1fc9009e.86fd2f","type":"comment","name":"Health check started servers","info":"","comments":"","x":385.4182586669922,"y":571.1834697723389,"z":"2fe30bf3.5a02e4","wires":[]},{"id":"7fcf9784.ff3178","type":"set","name":"init","xml":"<set>\n<parameter name='healthCheckFailedCount' value='0' />\n","comments":"","x":507.63025283813477,"y":609.1834106445312,"z":"2fe30bf3.5a02e4","wires":[]},{"id":"ff0c18c8.f1cb88","type":"switchNode","name":"started server > 0","xml":"<switch test='`$startSuccessCount > 0`'>\n","comments":"","outputs":1,"x":515.4183807373047,"y":665.1834697723389,"z":"2fe30bf3.5a02e4","wires":[["b26968f.6e75098","b15f37a3.f2acf8"]]},{"id":"b15f37a3.f2acf8","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":688.1683807373047,"y":729.9335918426514,"z":"2fe30bf3.5a02e4","wires":[["a78e254c.02c078"]]},{"id":"b26968f.6e75098","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":696.6683692932129,"y":621.9334716796875,"z":"2fe30bf3.5a02e4","wires":[[]]},{"id":"a78e254c.02c078","type":"block","name":"block","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":812.6302833557129,"y":730.1834106445312,"z":"2fe30bf3.5a02e4","wires":[["2b9f0ce9.6571f4","c5b2f2ce.cc748","b6eeb883.4737a8","38df2d3a.1c6b72"]]},{"id":"38df2d3a.1c6b72","type":"record","name":"Log message","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"debug\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"record\" value=\"Attempting to health check the started servers of the VNFC\"/>\n","comments":"","outputs":1,"x":989.5399627685547,"y":668.564453125,"z":"2fe30bf3.5a02e4","wires":[[]]},{"id":"2b9f0ce9.6571f4","type":"for","name":"for_each_vm","xml":"<for index=\"i\" start=\"0\" end=\"`$startSuccessCount`\" >","comments":"","outputs":1,"x":993.6304168701172,"y":713.1834716796875,"z":"2fe30bf3.5a02e4","wires":[["d65d79a1.52d338"]]},{"id":"b6eeb883.4737a8","type":"set","name":"set","xml":"<set>\n<parameter name=\"healthcheck.vmCount\" value=\"`$startSuccessCount`\" />\n<parameter name=\"retry-healthcheck\" value=\"true\"/>\n","comments":"","x":979.6301727294922,"y":756.1834716796875,"z":"2fe30bf3.5a02e4","wires":[]},{"id":"d65d79a1.52d338","type":"set","name":"set : health check input list","xml":"<set>\n<parameter name=\"healthcheck.vm[$i].url\" value=\"`$startedServerList[$i].url`\" />\n","comments":"","x":1204.0746765136719,"y":712.29443359375,"z":"2fe30bf3.5a02e4","wires":[]},{"id":"c5b2f2ce.cc748","type":"call","name":"call_vnfc_healthcheck_dg","xml":"<call rpc='`$HealthCheckDG.dg_name`' version='`$HealthCheckDG.dg_version`' module='`$HealthCheckDG.dg_module`' mode='sync' >\n","comments":"","outputs":1,"x":1033.9349822998047,"y":801.416748046875,"z":"2fe30bf3.5a02e4","wires":[["d1531542.c646f8","b755495d.033df8","aa99d38e.616c1"]]},{"id":"d1531542.c646f8","type":"outcome","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1273.6300811767578,"y":805.1837158203125,"z":"2fe30bf3.5a02e4","wires":[["999c3522.a16f48"]]},{"id":"b755495d.033df8","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1279.1468353271484,"y":758.5216369628906,"z":"2fe30bf3.5a02e4","wires":[["aa248ff6.575f3"]]},{"id":"aa99d38e.616c1","type":"outcome","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1271.8803253173828,"y":851.68359375,"z":"2fe30bf3.5a02e4","wires":[["dfeacdef.57da3"]]},{"id":"dfeacdef.57da3","type":"for","name":"for_each_vm","xml":"<for index=\"i\" start=\"0\" end=\"`$startSuccessCount`\" >","comments":"","outputs":1,"x":1419.6302642822266,"y":851.1836547851562,"z":"2fe30bf3.5a02e4","wires":[["325c7a00.1c3df6"]]},{"id":"325c7a00.1c3df6","type":"switchNode","name":"switch : healthcheck status","xml":"<switch test=\"`$healthcheck.vm[$i].status`\">\n","comments":"","outputs":1,"x":1632.6300201416016,"y":851.1836547851562,"z":"2fe30bf3.5a02e4","wires":[["a0cc95d1.d14208","f9a1c849.631ee8","815cbe58.50221"]]},{"id":"815cbe58.50221","type":"other","name":"DOWN","xml":"<outcome value='DOWN'>\n","comments":"","outputs":1,"x":1901.6302032470703,"y":810.1835021972656,"z":"2fe30bf3.5a02e4","wires":[["79d320a7.79de4"]]},{"id":"f9a1c849.631ee8","type":"other","name":"UNKNOWN","xml":"<outcome value='UNKNOWN'>\n","comments":"","outputs":1,"x":1871.4139556884766,"y":850.3263549804688,"z":"2fe30bf3.5a02e4","wires":[["79d320a7.79de4"]]},{"id":"a0cc95d1.d14208","type":"other","name":"UP","xml":"<outcome value='UP'>\n","comments":"","outputs":1,"x":1882.6307525634766,"y":906.1837158203125,"z":"2fe30bf3.5a02e4","wires":[["3c905744.ff9818"]]},{"id":"aa248ff6.575f3","type":"block","name":"block","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1408.6300811767578,"y":757.1835327148438,"z":"2fe30bf3.5a02e4","wires":[["f684de68.9d9c2","1774dfbf.897b2","ede6e99a.c88818","f4fcd65c.1b68d8"]]},{"id":"999c3522.a16f48","type":"block","name":"block","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1412.6300811767578,"y":804.1835327148438,"z":"2fe30bf3.5a02e4","wires":[["d3a9eab2.9f7a78","f684de68.9d9c2","ede6e99a.c88818","f4fcd65c.1b68d8"]]},{"id":"d3a9eab2.9f7a78","type":"set","name":"Set event message","xml":"<set>\n<parameter name='event-message' value=\"Error occurred during health check of the started servers\"/>","comments":"","x":1645.6302337646484,"y":627.1835021972656,"z":"2fe30bf3.5a02e4","wires":[]},{"id":"1774dfbf.897b2","type":"set","name":"Set event message","xml":"<set>\n<parameter name='event-message' value=\"VNFC Health check DG not found\"/>","comments":"","x":1658.2970733642578,"y":672.1834106445312,"z":"2fe30bf3.5a02e4","wires":[]},{"id":"f684de68.9d9c2","type":"record","name":"Log error","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"error\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"record\" value=\"`$event-message`\"/>\n","comments":"","outputs":1,"x":1635.7633819580078,"y":714.9960327148438,"z":"2fe30bf3.5a02e4","wires":[[]]},{"id":"79d320a7.79de4","type":"block","name":"block","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2049.344497680664,"y":826.4690551757812,"z":"2fe30bf3.5a02e4","wires":[["d8a6df2a.7dd4","aee7be5b.f82c8","937cf884.7f6f78","bc4bcf48.26b37"]]},{"id":"d8a6df2a.7dd4","type":"set","name":"Set error message","xml":"<set>\n<parameter name='event-message' value=\"`'Health check failed for the started server : ' + $startedServerList[$i].url`\"/>\n","comments":"","x":2289.345474243164,"y":724.4691772460938,"z":"2fe30bf3.5a02e4","wires":[]},{"id":"aee7be5b.f82c8","type":"set","name":"increment healthCheck failed VM count","xml":"<set>\n<parameter name=\"healthCheckFailedCount\" value=\"`$healthCheckFailedCount + 1`\" />\n","comments":"","x":2348.345474243164,"y":770.4691772460938,"z":"2fe30bf3.5a02e4","wires":[]},{"id":"937cf884.7f6f78","type":"record","name":"Log error","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"error\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"record\" value=\"`$event-message`\"/>\n","comments":"","outputs":1,"x":2276.291275024414,"y":810.0693359375,"z":"2fe30bf3.5a02e4","wires":[[]]},{"id":"3c905744.ff9818","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2039.630630493164,"y":905.1836547851562,"z":"2fe30bf3.5a02e4","wires":[["e1da7adf.b45238","b4fa63d.6dabba","9fefa332.fd358"]]},{"id":"9fefa332.fd358","type":"set","name":"Set success message","xml":"<set>\n<parameter name='success-message' value=\"`'Start succeeded for the server : ' + $startedServerList[$i].url`\"/>\n<parameter name=\"StartSuccessVMCount\" value=\"`$StartSuccessVMCount + 1`\" />\n\n","comments":"","x":2289.684829711914,"y":903.2501831054688,"z":"2fe30bf3.5a02e4","wires":[]},{"id":"b4fa63d.6dabba","type":"record","name":"Log message","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"debug\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"record\" value=\"`$success-message`\"/>\n","comments":"","outputs":1,"x":2300.685317993164,"y":942.2501831054688,"z":"2fe30bf3.5a02e4","wires":[[]]},{"id":"e1da7adf.b45238","type":"execute","name":"Report_Success","xml":"<execute plugin='org.openecomp.appc.dg.common.DCAEReporterPlugin' method='reportSuccess' >\n<parameter name=\"event-message\" value=\"`$success-message`\" />\n\n","comments":"","outputs":1,"x":2295.630630493164,"y":981.7549438476562,"z":"2fe30bf3.5a02e4","wires":[[]]},{"id":"16e2a975.926777","type":"block","name":"block","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":341.4182586669922,"y":663.1834697723389,"z":"2fe30bf3.5a02e4","wires":[["ff0c18c8.f1cb88","7fcf9784.ff3178"]]},{"id":"f1ed0579.63f1b8","type":"block","name":"block","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":351.47291564941406,"y":359.8888854980469,"z":"2fe30bf3.5a02e4","wires":[["3b4f9814.e2ad98","9d9e0e20.60bbe"]]},{"id":"60427904.cffb48","type":"execute","name":"Update_AAI_Status_Success","xml":"<execute plugin='org.openecomp.appc.dg.aai.AAIPlugin' method='postResource'>\n<parameter name=\"resourceType\" value=\"vnfc\" />\n<parameter name=\"prefix\" value=\"vnfc\" />\n<parameter name=\"resourceKey\" value='vnfc-name =  $vnfcName' />\n<parameter name=\"attributeName\" value=\"orchestration-status\" />\n<parameter name=\"attributeValue\" value=\"Running\" />\n","comments":"","outputs":1,"x":913.1391448974609,"y":1090.888916015625,"z":"2fe30bf3.5a02e4","wires":[["d229c29c.1c5a5","32097ba7.a930c4","fb49cf8a.60582"]]},{"id":"25e341a2.474c9e","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n\n","comments":"","x":888.1392669677734,"y":1192.8892211914062,"z":"2fe30bf3.5a02e4","wires":[]},{"id":"a570b6c0.693758","type":"block","name":"block","xml":"<block atomic='true'>\n","atomic":"false","comments":"","outputs":1,"x":693.5836639404297,"y":1090.8890380859375,"z":"2fe30bf3.5a02e4","wires":[["60427904.cffb48","25e341a2.474c9e","1f885944.deb907"]]},{"id":"1f885944.deb907","type":"record","name":"Log message","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"debug\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"record\" value=\"`'VNFC Started successfully : ' + $vnfcName`\"/>\n","comments":"","outputs":1,"x":898.0281219482422,"y":1139.77783203125,"z":"2fe30bf3.5a02e4","wires":[[]]},{"id":"15725357.0eb17d","type":"execute","name":"Update_AAI_Status_Failure","xml":"<execute plugin='org.openecomp.appc.dg.aai.AAIPlugin' method='postResource'>\n<parameter name=\"resourceType\" value=\"vnfc\" />\n<parameter name=\"prefix\" value=\"vnfc\" />\n<parameter name=\"resourceKey\" value='vnfc-name =  $vnfcName' />\n<parameter name=\"attributeName\" value=\"orchestration-status\" />\n<parameter name=\"attributeValue\" value=\"Error\" />","comments":"","outputs":1,"x":903.1393280029297,"y":947.8890380859375,"z":"2fe30bf3.5a02e4","wires":[["d229c29c.1c5a5","32097ba7.a930c4","fb49cf8a.60582"]]},{"id":"eac568e8.d84638","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\n","comments":"","x":875.1393890380859,"y":1024.8896789550781,"z":"2fe30bf3.5a02e4","wires":[]},{"id":"c95cab6.08b0358","type":"block","name":"block","xml":"<block atomic='true'>\n","atomic":"false","comments":"","outputs":1,"x":686.9169769287109,"y":948.7779541015625,"z":"2fe30bf3.5a02e4","wires":[["eac568e8.d84638","15725357.0eb17d"]]},{"id":"d229c29c.1c5a5","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1185.1392974853516,"y":947.8889465332031,"z":"2fe30bf3.5a02e4","wires":[["68c72cc4.2a6b44"]]},{"id":"32097ba7.a930c4","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1184.1390533447266,"y":1003.888916015625,"z":"2fe30bf3.5a02e4","wires":[["68c72cc4.2a6b44"]]},{"id":"fb49cf8a.60582","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1159.1389923095703,"y":1089.8889465332031,"z":"2fe30bf3.5a02e4","wires":[["1f4262ac.f8c95d"]]},{"id":"68c72cc4.2a6b44","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1660.0282745361328,"y":1013.7778015136719,"z":"2fe30bf3.5a02e4","wires":[["7cacd3c8.cb4e7c","63bf861a.2d76a8"]]},{"id":"1f4262ac.f8c95d","type":"switchNode","name":"switch","xml":"<switch test='`$postResource_result`'>\n","comments":"","outputs":1,"x":1286.2497100830078,"y":1089.7778625488281,"z":"2fe30bf3.5a02e4","wires":[["4d740d53.13d1b4","2af9f7fe.d47ef8","9445997.2e24868"]]},{"id":"4d740d53.13d1b4","type":"outcome","name":"NOT_FOUND","xml":"<outcome value='NOT_FOUND'>\n","comments":"","outputs":1,"x":1461.2508087158203,"y":1041.7778625488281,"z":"2fe30bf3.5a02e4","wires":[["68c72cc4.2a6b44"]]},{"id":"2af9f7fe.d47ef8","type":"outcome","name":"FAILURE","xml":"<outcome value='FAILURE'>\n","comments":"","outputs":1,"x":1479.2506866455078,"y":1090.7779235839844,"z":"2fe30bf3.5a02e4","wires":[["68c72cc4.2a6b44"]]},{"id":"7cacd3c8.cb4e7c","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n","comments":"","x":1815.3616485595703,"y":1056.7778015136719,"z":"2fe30bf3.5a02e4","wires":[]},{"id":"eb4bfac1.da01f8","type":"switchNode","name":"switch_server_start_success","xml":"<switch test='`$startFailedCount == 0 and $healthCheckFailedCount == 0`'>\n","comments":"","outputs":1,"x":322.91737365722656,"y":975.7532958984375,"z":"2fe30bf3.5a02e4","wires":[["953185e1.700a28","72decc28.91a144"]]},{"id":"72decc28.91a144","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":544.6674652099609,"y":1091.50341796875,"z":"2fe30bf3.5a02e4","wires":[["a570b6c0.693758"]]},{"id":"953185e1.700a28","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":550.1674652099609,"y":948.5034790039062,"z":"2fe30bf3.5a02e4","wires":[["c95cab6.08b0358"]]},{"id":"9445997.2e24868","type":"outcome","name":"SUCCESS","xml":"<outcome value='SUCCESS'>\n","comments":"","outputs":1,"x":1463.9175567626953,"y":1137.6668395996094,"z":"2fe30bf3.5a02e4","wires":[["1ee65462.74023c"]]},{"id":"1ee65462.74023c","type":"set","name":"Set AAI update Flag","xml":"<set>\n<parameter name='AAIUpdateSuccessFlag' value='true' />\n","comments":"","x":1655.0285186767578,"y":1137.6668395996094,"z":"2fe30bf3.5a02e4","wires":[]},{"id":"a5078ee3.ebb7f","type":"execute","name":"OutputMessageBuilder","xml":"<execute plugin='org.openecomp.appc.dg.common.OutputMessagePlugin' method='outputMessageBuilder' >\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n<parameter name=\"event-message\" value=\"`$event-message`\" />","comments":"","outputs":1,"x":1238.4729614257812,"y":210,"z":"2fe30bf3.5a02e4","wires":[["ac68f81b.5c48e8"]]},{"id":"ac68f81b.5c48e8","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1758.4725494384766,"y":111,"z":"2fe30bf3.5a02e4","wires":[["5b461a8f.62eed4"]]},{"id":"5b461a8f.62eed4","type":"execute","name":"Report Error to DCAE","xml":"<execute plugin='org.openecomp.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"event-message\" value=\"`$event-message`\" />","comments":"","outputs":1,"x":2429.0443267822266,"y":118.71426391601562,"z":"2fe30bf3.5a02e4","wires":[[]]},{"id":"69cc0201.551e3c","type":"execute","name":"OutputMessageBuilder","xml":"<execute plugin='org.openecomp.appc.dg.common.OutputMessagePlugin' method='outputMessageBuilder' >\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n<parameter name=\"event-message\" value=\"Error occurred while updating VNFC details in A&amp;AI\" />","comments":"","outputs":1,"x":2028.0282135009766,"y":210,"z":"2fe30bf3.5a02e4","wires":[["51c3354e.2fa70c"]]},{"id":"51c3354e.2fa70c","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":2233.028091430664,"y":170,"z":"2fe30bf3.5a02e4","wires":[["5b461a8f.62eed4"]]},{"id":"db25d1d6.9bc34","type":"execute","name":"OutputMessageBuilder","xml":"<execute plugin='org.openecomp.appc.dg.common.OutputMessagePlugin' method='outputMessageBuilder' >\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n<parameter name=\"event-message\" value=\"`$event-message`\" />","comments":"","outputs":1,"x":1392.0284881591797,"y":522.9999980926514,"z":"2fe30bf3.5a02e4","wires":[["74d607b1.bd0498"]]},{"id":"74d607b1.bd0498","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1906.028091430664,"y":614.9999084472656,"z":"2fe30bf3.5a02e4","wires":[["94e7dbf9.b04ce8"]]},{"id":"94e7dbf9.b04ce8","type":"execute","name":"Report Error to DCAE","xml":"<execute plugin='org.openecomp.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"event-message\" value=\"`$event-message`\" />","comments":"","outputs":1,"x":2089.0445098876953,"y":614.71435546875,"z":"2fe30bf3.5a02e4","wires":[[]]},{"id":"ede6e99a.c88818","type":"execute","name":"OutputMessageBuilder","xml":"<execute plugin='org.openecomp.appc.dg.common.OutputMessagePlugin' method='outputMessageBuilder' >\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n<parameter name=\"event-message\" value=\"`$event-message`\" />","comments":"","outputs":1,"x":1691.9176788330078,"y":804.2222290039062,"z":"2fe30bf3.5a02e4","wires":[["74d607b1.bd0498"]]},{"id":"bc4bcf48.26b37","type":"execute","name":"OutputMessageBuilder","xml":"<execute plugin='org.openecomp.appc.dg.common.OutputMessagePlugin' method='outputMessageBuilder' >\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n<parameter name=\"event-message\" value=\"`$event-message`\" />","comments":"","outputs":1,"x":2281.028823852539,"y":862.5555725097656,"z":"2fe30bf3.5a02e4","wires":[["80fab7b3.2f0e48"]]},{"id":"80fab7b3.2f0e48","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":2505.139419555664,"y":862.3332824707031,"z":"2fe30bf3.5a02e4","wires":[["d15983e5.4706b"]]},{"id":"d15983e5.4706b","type":"execute","name":"Report Error to DCAE","xml":"<execute plugin='org.openecomp.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"event-message\" value=\"`$event-message`\" />","comments":"","outputs":1,"x":2698.156021118164,"y":863.0476379394531,"z":"2fe30bf3.5a02e4","wires":[[]]},{"id":"63bf861a.2d76a8","type":"execute","name":"OutputMessageBuilder","xml":"<execute plugin='org.openecomp.appc.dg.common.OutputMessagePlugin' method='outputMessageBuilder' >\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n<parameter name=\"event-message\" value=\"Error occurred while updating VNFC details in A&amp;AI\" />","comments":"","outputs":1,"x":1849.584243774414,"y":974.5555725097656,"z":"2fe30bf3.5a02e4","wires":[["479e4d8c.1ac324"]]},{"id":"479e4d8c.1ac324","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":2031.5841217041016,"y":1005.5555725097656,"z":"2fe30bf3.5a02e4","wires":[["151b06a1.86efe9"]]},{"id":"151b06a1.86efe9","type":"execute","name":"Report Error to DCAE","xml":"<execute plugin='org.openecomp.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"event-message\" value=\"`$event-message`\" />","comments":"","outputs":1,"x":2216.8062896728516,"y":1042.6667785644531,"z":"2fe30bf3.5a02e4","wires":[[]]},{"id":"f4fcd65c.1b68d8","type":"set","name":"update healthCheck failed count","xml":"<set>\n<parameter name=\"healthCheckFailedCount\" value=\"`$startSuccessCount`\" />\n","comments":"","x":1681.1396026611328,"y":756.5556030273438,"z":"2fe30bf3.5a02e4","wires":[]},{"id":"8bd43260.5eb42","type":"set","name":"Set event message","xml":"<set>\n<parameter name='event-message' value=\"`$error-message`\"/>\n","comments":"","x":1388.8065643310547,"y":404.99999809265137,"z":"2fe30bf3.5a02e4","wires":[]}]
