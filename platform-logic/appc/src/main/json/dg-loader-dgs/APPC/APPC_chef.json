[{"id":"140af023.c01a74","type":"set","name":"chef server set","xml":"<set>\n<parameter name='chef-server-address' value='`$chef-server-address`' />\n<parameter name='chef-username' value='`$chef-username`' />\n<parameter name='chef-organization' value='`$chef-organization`'/>\n","comments":"","x":365.45452880859375,"y":189.45455932617187,"z":"d01d9ed1.ef0e3","wires":[]},{"id":"2b2e3f8.1e4be4","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":180,"y":435.99999237060547,"z":"d01d9ed1.ef0e3","wires":[["435fc781.218d3","4721f95d.96aacc"]]},{"id":"435fc781.218d3","type":"execute","name":"Environment","xml":"<execute plugin='org.onap.appc.adapter.chef.ChefAdapter' method='VnfcEnvironment' >\n<parameter name='organizations' value='`$chef-organization`'/> \n<parameter name='serverAddress' value='`$chef-server-address`'/> \n<parameter name='username' value='`$chef-username`'/> \n<parameter name='Environment' value='`$Environment`'/>","comments":"","outputs":1,"x":371.3636474609375,"y":361.27272033691406,"z":"d01d9ed1.ef0e3","wires":[[]]},{"id":"5557f4f3.12a834","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":778.3636322021484,"y":359.7272529602051,"z":"d01d9ed1.ef0e3","wires":[["bfed75ec.2b8ab8","7b9b653d.d895bc"]]},{"id":"bfed75ec.2b8ab8","type":"execute","name":"VnfcNodeobjects","xml":"<execute plugin='org.onap.appc.adapter.chef.ChefAdapter' method='VnfcNodeobjects' >\n<parameter name='organizations' value='`$chef-organization`'/> \n<parameter name='serverAddress' value='`$chef-server-address`'/> \n<parameter name='username' value='`$chef-username`'/> \n<parameter name='NodeList' value='`$NodeList`'/>\n<parameter name='Node' value='`$Node`'/>","comments":"","outputs":1,"x":1011.54541015625,"y":317.99999618530273,"z":"d01d9ed1.ef0e3","wires":[[]]},{"id":"7b9b653d.d895bc","type":"switchNode","name":"switch","xml":"<switch test='`$chefServerResult.code`'>","comments":"","outputs":1,"x":1024.54541015625,"y":421.99999618530273,"z":"d01d9ed1.ef0e3","wires":[["bba9eac6.8963","5201322b.f4fb04"]]},{"id":"5201322b.f4fb04","type":"other","name":"outcome","xml":"<outcome value='200'>\n","comments":"","outputs":1,"x":1212.54541015625,"y":404.99999237060547,"z":"d01d9ed1.ef0e3","wires":[["f4945dcf.a990c"]]},{"id":"bba9eac6.8963","type":"other","name":"outcome","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1122.54541015625,"y":537.9999961853027,"z":"d01d9ed1.ef0e3","wires":[["55c99e5b.134484"]]},{"id":"e39566b4.a3d428","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1642.636474609375,"y":150.09090423583984,"z":"d01d9ed1.ef0e3","wires":[["869b2999.23ad9","de7cd48.8c432a8"]]},{"id":"89f57d06.98e65","type":"execute","name":"checkPushJob","xml":"<execute plugin='org.onap.appc.adapter.chef.ChefAdapter' method='checkPushJob' >\n\t<parameter name='organizations' value='`$chef-organization`'/> \n\t<parameter name='serverAddress' value='`$chef-server-address`'/> \n\t<parameter name='username' value='`$chef-username`'/> \n\t<parameter name='jobid' value='`$jobID`'/>\n\t<parameter name='retryTimes' value='`$retryTimes`'/>\n\t<parameter name='retryInterval' value='`$retryInterval`'/>","comments":"","outputs":1,"x":2304.908920288086,"y":680.9999189376831,"z":"d01d9ed1.ef0e3","wires":[[]]},{"id":"7e919e85.903df","type":"other","name":"outcome","xml":"<outcome value='201'>\n","comments":"","outputs":1,"x":1839.5453491210937,"y":532.1817626953125,"z":"d01d9ed1.ef0e3","wires":[["c405481b.6960d8"]]},{"id":"bc2f0cc3.e72f4","type":"other","name":"outcome","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1842.6362609863281,"y":377.9090385437012,"z":"d01d9ed1.ef0e3","wires":[["e59aab7c.9268a8"]]},{"id":"de7cd48.8c432a8","type":"switchNode","name":"switch","xml":"<switch test='`$chefServerResult.code`'>\n","comments":"","outputs":1,"x":1681.8181495666504,"y":437.54541778564453,"z":"d01d9ed1.ef0e3","wires":[["7e919e85.903df","bc2f0cc3.e72f4"]]},{"id":"869b2999.23ad9","type":"execute","name":"pushJob","xml":"<execute plugin='org.onap.appc.adapter.chef.ChefAdapter' method='VnfcPushJob'>\n\t<parameter name='organizations' value='`$chef-organization`'/> \n\t<parameter name='serverAddress' value='`$chef-server-address`'/> \n\t<parameter name='username' value='`$chef-username`'/> \n\t<parameter name='NodeList' value='`$NodeList`'/>\n\t<parameter name='CallbackCapable' value='`$CallbackCapable`'/>\n\t<parameter name='RequestId' value='`$RequestId`'/>\n\t<parameter name='CallbackUrl' value='`$CallbackUrl`'/>","comments":"","outputs":1,"x":1823.727294921875,"y":132.63634490966797,"z":"d01d9ed1.ef0e3","wires":[[]]},{"id":"a34166a1.34cb58","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":524,"y":539.9999923706055,"z":"d01d9ed1.ef0e3","wires":[["e58c4075.ed393"]]},{"id":"2e7b281e.16947","type":"other","name":"outcome","xml":"<outcome value='200'>\n","comments":"","outputs":1,"x":539,"y":390.99999237060547,"z":"d01d9ed1.ef0e3","wires":[["5557f4f3.12a834"]]},{"id":"4721f95d.96aacc","type":"switchNode","name":"switch","xml":"<switch test='`$chefServerResult.code`'>","comments":"","outputs":1,"x":341.81817626953125,"y":585.5454635620117,"z":"d01d9ed1.ef0e3","wires":[["a34166a1.34cb58","2e7b281e.16947","c922487b.69f3f8"]]},{"id":"55c99e5b.134484","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='200' />\n<parameter name='error-message' value='`$chefServerResult.message`' />\n","comments":"","x":1296.54541015625,"y":543.9999961853027,"z":"d01d9ed1.ef0e3","wires":[]},{"id":"e58c4075.ed393","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='200' />\n<parameter name='error-message' value='`$chefServerResult.message`' />\n","comments":"","x":748,"y":548.9999923706055,"z":"d01d9ed1.ef0e3","wires":[]},{"id":"c922487b.69f3f8","type":"other","name":"outcome","xml":"<outcome value='201'>\n","comments":"","outputs":1,"x":539.9090576171875,"y":460.27269744873047,"z":"d01d9ed1.ef0e3","wires":[["5557f4f3.12a834"]]},{"id":"c891e16f.0bcab","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":55,"y":288.99999237060547,"z":"d01d9ed1.ef0e3","wires":[["140af023.c01a74","2b2e3f8.1e4be4","2e05211e.aedffa"]]},{"id":"e59aab7c.9268a8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='200' />\n<parameter name='error-message' value='`$chefServerResult.message`' />\n","comments":"","x":2045,"y":376.99999237060547,"z":"d01d9ed1.ef0e3","wires":[]},{"id":"c405481b.6960d8","type":"switchNode","name":"switch","xml":"<switch test='`$CallbackCapable`'>\n","comments":"","outputs":1,"x":1915,"y":638.9999923706055,"z":"d01d9ed1.ef0e3","wires":[["ed08562b.daacc8","b2d207f7.541de8"]]},{"id":"b2d207f7.541de8","type":"other","name":"outcome","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":2076,"y":691.9999923706055,"z":"d01d9ed1.ef0e3","wires":[["31229535.42d75e"]]},{"id":"ed08562b.daacc8","type":"outcomeTrue","name":"outcome","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2079.0909118652344,"y":537.7272682189941,"z":"d01d9ed1.ef0e3","wires":[["32d473d9.6462a4"]]},{"id":"32d473d9.6462a4","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n<parameter name='output.status.code' value='400' />\n<parameter name='output.status.message' value='chef success, waiting for callback' />","comments":"","x":2262,"y":538.9999923706055,"z":"d01d9ed1.ef0e3","wires":[]},{"id":"9ca9daea.6acd88","type":"other","name":"outcome","xml":"<outcome value='200'>\n","comments":"","outputs":1,"x":2413,"y":935.9999923706055,"z":"d01d9ed1.ef0e3","wires":[["4eef569.fb26f68"]]},{"id":"c6d62c0a.3f9b9","type":"other","name":"outcome","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":2416.0909118652344,"y":781.7272682189941,"z":"d01d9ed1.ef0e3","wires":[["ca8973b0.029ee"]]},{"id":"e96f044b.63d178","type":"switchNode","name":"switch","xml":"<switch test='`$chefServerResult.code`'>\n","comments":"","outputs":1,"x":2255.2728004455566,"y":841.3636474609375,"z":"d01d9ed1.ef0e3","wires":[["9ca9daea.6acd88","c6d62c0a.3f9b9"]]},{"id":"ca8973b0.029ee","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='200' />\n<parameter name='error-message' value='`$chefServerResult.message`' />","comments":"","x":2635.363525390625,"y":732.9999923706055,"z":"d01d9ed1.ef0e3","wires":[]},{"id":"87c5419b.6dab8","type":"execute","name":"fetchResults","xml":"<execute plugin='org.onap.appc.adapter.chef.ChefAdapter' method='fetchResults' >\n\t<parameter name='organizations' value='`$chef-organization`'/> \n\t<parameter name='serverAddress' value='`$chef-server-address`'/> \n\t<parameter name='username' value='`$chef-username`'/> \n\t<parameter name='NodeList' value='`$NodeList`'/>","comments":"","outputs":1,"x":2940.181640625,"y":1173.1818771362304,"z":"d01d9ed1.ef0e3","wires":[[]]},{"id":"31229535.42d75e","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":2078.9999999999995,"y":794.9999923706052,"z":"d01d9ed1.ef0e3","wires":[["89f57d06.98e65","e96f044b.63d178"]]},{"id":"a02c4706.79bfd","type":"switchNode","name":"switch","xml":"<switch test='`$chefServerResult.code`'>\n","comments":"","outputs":1,"x":2927.0000000000004,"y":1316.9999923706057,"z":"d01d9ed1.ef0e3","wires":[["1aaf2aa6.4b2ed5","5442d73e.8a3dbc"]]},{"id":"5442d73e.8a3dbc","type":"other","name":"outcome","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":3200.0909156799316,"y":1434.0000219345095,"z":"d01d9ed1.ef0e3","wires":[["cd3ecae3.6d4fe"]]},{"id":"1aaf2aa6.4b2ed5","type":"other","name":"outcome","xml":"<outcome value='200'>\n","comments":"","outputs":1,"x":3201.181884765625,"y":1281.7272872924807,"z":"d01d9ed1.ef0e3","wires":[["af3c7cd7.ce071"]]},{"id":"af3c7cd7.ce071","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n<parameter name='output.status.code' value='400' />\n<parameter name='output.status.message' value='finish' />\n<parameter name='output.status.results' value='`$chefServerResult.message`' />","comments":"","x":3429.36376953125,"y":1282.4545822143557,"z":"d01d9ed1.ef0e3","wires":[]},{"id":"cd3ecae3.6d4fe","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='200' />\n<parameter name='error-message' value='`$chefServerResult.message`' />\n","comments":"","x":3435.181884765625,"y":1442.727165222168,"z":"d01d9ed1.ef0e3","wires":[]},{"id":"adaf20bf.bee18","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":2777,"y":1236.9999923706054,"z":"d01d9ed1.ef0e3","wires":[["87c5419b.6dab8","a02c4706.79bfd"]]},{"id":"4eef569.fb26f68","type":"switchNode","name":"switch","xml":"<switch test='`$GetOutputFlag`'>\n","comments":"","outputs":1,"x":2581,"y":1014.9999923706055,"z":"d01d9ed1.ef0e3","wires":[["dc3b0064.30c57","549d03c6.e67ec4"]]},{"id":"549d03c6.e67ec4","type":"outcomeTrue","name":"outcome","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2780.0909156799316,"y":1072.0000219345092,"z":"d01d9ed1.ef0e3","wires":[["adaf20bf.bee18"]]},{"id":"dc3b0064.30c57","type":"other","name":"outcome","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":2783.181827545166,"y":917.727297782898,"z":"d01d9ed1.ef0e3","wires":[["860f1f7c.8abfe"]]},{"id":"860f1f7c.8abfe","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n<parameter name='output.status.code' value='400' />\n<parameter name='output.status.message' value='`$chefServerResult.message`' />","comments":"","x":2967.36376953125,"y":920.4545211791992,"z":"d01d9ed1.ef0e3","wires":[]},{"id":"818dcbdc.5b35d8","type":"dgstart","name":"DGSTART","outputs":1,"x":110,"y":31.99999237060547,"z":"d01d9ed1.ef0e3","wires":[["2bdc7277.2d4bae"]]},{"id":"2a671177.11d28e","type":"method","name":"chef","xml":"<method rpc='chef' mode='sync'>\n","comments":"","outputs":1,"x":88,"y":192.99999237060547,"z":"d01d9ed1.ef0e3","wires":[["c891e16f.0bcab"]]},{"id":"f4945dcf.a990c","type":"switchNode","name":"switch","xml":"<switch test='`$PushJobFlag`'>\n","comments":"","outputs":1,"x":1318,"y":241.99999237060547,"z":"d01d9ed1.ef0e3","wires":[["45a18d9c.fae008","34db35c3.1ebd66"]]},{"id":"34db35c3.1ebd66","type":"other","name":"outcome","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1438,"y":298.99999237060547,"z":"d01d9ed1.ef0e3","wires":[["638a8115.b9ed04"]]},{"id":"45a18d9c.fae008","type":"outcomeTrue","name":"outcome","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1441.0909118652343,"y":144.72726821899414,"z":"d01d9ed1.ef0e3","wires":[["e39566b4.a3d428"]]},{"id":"638a8115.b9ed04","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n<parameter name='output.status.code' value='400' />\n<parameter name='output.status.message' value='chef success, do not need push job ' />","comments":"","x":1480,"y":418.99999237060547,"z":"d01d9ed1.ef0e3","wires":[]},{"id":"2bdc7277.2d4bae","type":"service-logic","name":"APPC 3.0.0","module":"APPC","version":"3.0.0","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='APPC' version='3.0.0'>","outputs":1,"x":108.45452117919922,"y":113.99999237060547,"z":"d01d9ed1.ef0e3","wires":[["2a671177.11d28e"]]},{"id":"2e05211e.aedffa","type":"record","name":"record","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"info\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"`$request-action`\"/>\n<parameter name=\"field3\" value=\"`$input.action`\"/>\n\n","comments":"","outputs":1,"x":298.00000762939453,"y":280.5713939666748,"z":"d01d9ed1.ef0e3","wires":[[]]}]
