[{"id":"af62cfe8.d06c7","type":"dgstart","name":"DGSTART","outputs":1,"x":98.39999389648438,"y":112.39999389648438,"z":"922f234d.03b82","wires":[["d53599d4.fa8888"]]},{"id":"d53599d4.fa8888","type":"service-logic","name":"APPC 4.0.0","module":"APPC","version":"4.0.0","comments":"","xml":"<service-logic xmlns='http://www.openecomp.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.openecomp.org/sdnc/svclogic ./svclogic.xsd' module='APPC' version='4.0.0'>","outputs":1,"x":303.0874938964844,"y":101.46249389648438,"z":"922f234d.03b82","wires":[["1f725d37.b5b63b"]]},{"id":"1f725d37.b5b63b","type":"method","name":"method Generic_ChefDG","xml":"<method rpc='Generic_ChefDG' mode='sync'>\n","comments":"","outputs":1,"x":554.6499938964844,"y":101.46249389648438,"z":"922f234d.03b82","wires":[["301e18f6.5bf2c"]]},{"id":"9cbcf01a.7b6c8","type":"call","name":"call:chef","xml":"<call module=\"APPC\" rpc=\"chef\" mode=\"sync\">","comments":"","outputs":1,"x":310.25445556640625,"y":826.2247924804688,"z":"922f234d.03b82","wires":[["286a2dcf.6d5c9a","41f4404b.f67f58","39b897.ee15e76a"]]},{"id":"16699aa1.065e85","type":"execute","name":"execute Convert payload to DG Context ","xml":"<execute plugin=\"org.onap.sdnc.config.generator.convert.ConvertNode\" method=\"convertJson2DGContext\">\n<parameter name=\"jsonData\" value=\"`$tmp.merge.mergedData`\" />\n<parameter name=\"isEscaped\" value=\"Y\" />\n<parameter name=\"blockKeys\" value=\"chef-server-address,chef-organization,chef-username,Node,NodeList,retryTimes,retryInterval,GetOutputFlag,PushJobFlag\" />\n<parameter name=\"responsePrefix\" value=\"tmp.convertnode\" />","comments":"","outputs":1,"x":663.2367477416992,"y":220.45354461669922,"z":"922f234d.03b82","wires":[["6859fe6b.08acc8","b0b97ff0.6f4dd8"]]},{"id":"b0b97ff0.6f4dd8","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":902.4751892089844,"y":221.10848999023438,"z":"922f234d.03b82","wires":[["af82968f.49db48"]]},{"id":"6859fe6b.08acc8","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":914.3081970214844,"y":266.3916931152344,"z":"922f234d.03b82","wires":[["9627ab8e.d2e4c"]]},{"id":"af82968f.49db48","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1065.1417236328125,"y":225.27499389648438,"z":"922f234d.03b82","wires":[["e7190222.9c13d"]]},{"id":"9627ab8e.d2e4c","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1063.474853515625,"y":272.7582702636719,"z":"922f234d.03b82","wires":[["3e3a73d6.8ffe4c"]]},{"id":"3e3a73d6.8ffe4c","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t<parameter name=\"error-code\" value=\"401\"/>\n\t<parameter name=\"error-message\" value=\"Unable to process convert payload to context.\"/>\n\t\n","comments":"","x":1226.6748046875,"y":277.9416809082031,"z":"922f234d.03b82","wires":[]},{"id":"301e18f6.5bf2c","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":213.74179077148438,"y":238.04159545898438,"z":"922f234d.03b82","wires":[["9cbcf01a.7b6c8","16699aa1.065e85","b1fb79d0.545c8","471fb391.1eb4c4","5eb2232d.af26f4","93115621.c19948","a89dc926.5af0c","85dd8d.02b41a7"]]},{"id":"e7190222.9c13d","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n<parameter name=\"error-code\" value=\"401\"/>\n\t<parameter name=\"error-message\" value=\"`$tmp.convertnode.error-message`\"/>\n\t\n\t","comments":"","x":1231.708251953125,"y":227.67495727539062,"z":"922f234d.03b82","wires":[]},{"id":"3c9bbe97.c9bce2","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n<parameter name='error-code' value=\"401\" />\n<parameter name='error-message' value='`$chefServerResult.message`'/>","comments":"","x":1079.3083190917969,"y":858.1916198730469,"z":"922f234d.03b82","wires":[]},{"id":"286a2dcf.6d5c9a","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":817.3915710449219,"y":802.6250305175781,"z":"922f234d.03b82","wires":[["3c9bbe97.c9bce2"]]},{"id":"41f4404b.f67f58","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":793.5916442871094,"y":885.1749572753906,"z":"922f234d.03b82","wires":[["45bf5d7c.68ad74"]]},{"id":"b1fb79d0.545c8","type":"record","name":"record","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"info\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"`$input.action`\"/>\n<parameter name=\"field3\" value =\"`$tmp.merge.mergedData`\"/>\n<parameter name=\"field4\" value =\"`$tmp.merge`\"/>","comments":"","outputs":1,"x":751.3450012207031,"y":147.19497680664062,"z":"922f234d.03b82","wires":[[]]},{"id":"471fb391.1eb4c4","type":"set","name":"set Payload params ","xml":"<set>\n<parameter name='Node' value='`$block_Node`' />\n<parameter name='NodeList' value ='`$block_NodeList`'/>\n<parameter name='vnf_id' value='`$vnf-id`' />\n<parameter name='chef-server-address' value='`$vnf-host-ip-address`'/>\n<parameter name='chef-username' value='`$block_chef-username`'/>\n<parameter name='chef-organization' value='`$block_chef-organization`'/>\n<parameter name='retryTimes' value='`$block_retryTimes`'/>\n<parameter name='retryInterval' value='`$block_retryInterval`'/>\n<parameter name='GetOutputFlag' value='`$block_GetOutputFlag`'/>\n<parameter name='PushJobFlag' value='`$block_PushJobFlag`'/>\n<parameter name='CallbackCapable' value='`$CallbackCapable`'/>\n<parameter name='RequestId' value='`$RequestId`'/>\n<parameter name='CallbackUrl' value='`$CallbackUrl`'/>\n<parameter name='Environment' value='`$Environment`'/>\n\n\n\n\n","comments":"","x":433.0666198730469,"y":697.0667114257812,"z":"922f234d.03b82","wires":[]},{"id":"39b897.ee15e76a","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":558.3722229003906,"y":977.4832458496094,"z":"922f234d.03b82","wires":[["f2715dd7.d7631"]]},{"id":"f2715dd7.d7631","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n<parameter name='error-code' value='400' />\n<parameter name='error-message' value='`$chefServerResult.message`' />","comments":"","x":821.7055358886719,"y":1072.4832458496094,"z":"922f234d.03b82","wires":[]},{"id":"45bf5d7c.68ad74","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n<parameter name='error-code' value=\"401\" />\n<parameter name='error-message' value='Chef DG not found or Activated'/>","comments":"","x":1113.3721618652344,"y":932.9555358886719,"z":"922f234d.03b82","wires":[]},{"id":"5eb2232d.af26f4","type":"switchNode","name":"switch environment","xml":"<switch test='`$Environment`'>\n","comments":"","outputs":1,"x":436.0000915527344,"y":338.1997985839844,"z":"922f234d.03b82","wires":[["5ed73365.2196ac","2d8ed1b9.75ada6"]]},{"id":"5ed73365.2196ac","type":"success","name":"outcome: Other","xml":"<outcome value='Other'>","comments":"","outputs":1,"x":669.0000915527344,"y":357.1997985839844,"z":"922f234d.03b82","wires":[["9eb4370f.9e9cd8"]]},{"id":"2d8ed1b9.75ada6","type":"success","name":"outcome: ''","xml":"<outcome value=''>","comments":"","outputs":1,"x":682.0000915527344,"y":404.1997985839844,"z":"922f234d.03b82","wires":[["8ccf4ed1.742448"]]},{"id":"9eb4370f.9e9cd8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","comments":null,"outputs":1,"x":864.0000915527344,"y":354.5997009277344,"z":"922f234d.03b82","wires":[[]]},{"id":"8ccf4ed1.742448","type":"set","name":"set Environment","xml":"<set>\n<parameter name='Environment' value='`$Environment`' />\n\n\n\n\n\n\n\n\n\n\n\n","comments":"","x":847.0000915527344,"y":402.7998962402344,"z":"922f234d.03b82","wires":[]},{"id":"93115621.c19948","type":"switchNode","name":"switch CallbackCapable","xml":"<switch test='`$CallbackCapable`'>\n","comments":"","outputs":1,"x":430.1997985839844,"y":426.5997009277344,"z":"922f234d.03b82","wires":[["5ed73365.2196ac","c2bdf572.9b59d8"]]},{"id":"a89dc926.5af0c","type":"switchNode","name":"switch RequestId","xml":"<switch test='`$RequestId`'>\n","comments":"","outputs":1,"x":439.1997985839844,"y":537.5997009277344,"z":"922f234d.03b82","wires":[["5ed73365.2196ac","43e94a2.02e0b34"]]},{"id":"85dd8d.02b41a7","type":"switchNode","name":"switch CallbackUrl","xml":"<switch test='`$CallbackUrl`'>\n","comments":"","outputs":1,"x":466.1997985839844,"y":617.7998962402344,"z":"922f234d.03b82","wires":[["5ed73365.2196ac","fae8b86a.be3db8"]]},{"id":"c2bdf572.9b59d8","type":"success","name":"outcome: ''","xml":"<outcome value=''>","comments":"","outputs":1,"x":699.1997985839844,"y":483.9996032714844,"z":"922f234d.03b82","wires":[["a419f989.59fe6"]]},{"id":"43e94a2.02e0b34","type":"success","name":"outcome: ''","xml":"<outcome value=''>","comments":"","outputs":1,"x":691.1997985839844,"y":542.5997009277344,"z":"922f234d.03b82","wires":[["3b82b153.726046"]]},{"id":"fae8b86a.be3db8","type":"success","name":"outcome: ''","xml":"<outcome value=''>","comments":"","outputs":1,"x":685.1997985839844,"y":603.5997009277344,"z":"922f234d.03b82","wires":[["5ce8dd14.a17be4"]]},{"id":"a419f989.59fe6","type":"set","name":"set CallbackCapable","xml":"<set>\n<parameter name='CallbackCapable' value='`$CallbackCapable`' />\n\n\n\n\n\n\n\n\n\n\n\n","comments":"","x":885.1998291015625,"y":484.5997009277344,"z":"922f234d.03b82","wires":[]},{"id":"3b82b153.726046","type":"set","name":"set RequestId","xml":"<set>\n<parameter name='RequestId' value='`$RequestId`' />\n\n\n\n\n\n\n\n\n\n\n\n","comments":"","x":886.1998291015625,"y":548.5997314453125,"z":"922f234d.03b82","wires":[]},{"id":"5ce8dd14.a17be4","type":"set","name":"set Environment","xml":"<set>\n<parameter name='Environment' value='`$Environment`' />\n\n\n\n\n\n\n\n\n\n\n\n","comments":"","x":873.1998291015625,"y":610.5997314453125,"z":"922f234d.03b82","wires":[]}]