[{"id":"f7089b6e.27e52","type":"dgstart","name":"DGSTART","outputs":1,"x":138,"y":98,"z":"30436ccd.4adc14","wires":[["a81660a2.acdb6"]]},{"id":"a81660a2.acdb6","type":"service-logic","name":"APPC 4.0.0","module":"APPC","version":"4.0.0","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='APPC' version='4.0.0'>","outputs":1,"x":292,"y":97,"z":"30436ccd.4adc14","wires":[["6912640f.71411c"]]},{"id":"6912640f.71411c","type":"method","name":"method SaveRunningConfig","xml":"<method rpc='SaveRunningConfig' mode='sync'>\n","comments":"","outputs":1,"x":520,"y":100,"z":"30436ccd.4adc14","wires":[["33c4539f.9dc64c"]]},{"id":"94be0ae2.28833","type":"set","name":"set call DG Parameters","xml":"<set>\n<parameter name='config.vnf-id' value=\"`$vnf-id`\" />\n<parameter name='config.vm-name' value=\"`$vm-name`\" />\n<parameter name='config.vnf-type' value=\"`$vnf-type`\" />\n<parameter name='config.vnf-name' value=\"`$vnf-name`\" />\n<parameter name='config.protocol' value=\"`$tmp.deviceinterfaceprotocol.PROTOCOL`\" />\n<parameter name='config.host-ip-address' value=\"`$vnf-host-ip-address`\" />\n<parameter name='config.user-name' value=\"`$device-authentication.USER-NAME`\" />\n<parameter name='config.password' value=\"`$device-authentication.PASSWORD`\" />\n<parameter name='config.port-number' value=\"`$device-authentication.PORT-NUMBER`\" />\n","comments":"","x":426,"y":154,"z":"30436ccd.4adc14","wires":[]},{"id":"33c4539f.9dc64c","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":167,"y":154,"z":"30436ccd.4adc14","wires":[["94be0ae2.28833","c2d0c3c1.33fe58","efc0edd.6d55e1"]]},{"id":"efc0edd.6d55e1","type":"call","name":"call: GetDeviceRunningConfig","xml":"<call module='APPC' rpc='GetDeviceRunningConfig' mode='sync' >\n","comments":"","outputs":1,"x":224,"y":575,"z":"30436ccd.4adc14","wires":[["2b84bd3f.c43e22","8e9e97db.0c6f3","c67b35a7.d90cc"]]},{"id":"2b84bd3f.c43e22","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":484,"y":594,"z":"30436ccd.4adc14","wires":[["4793b4e7.03b284"]]},{"id":"8e9e97db.0c6f3","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":479,"y":659,"z":"30436ccd.4adc14","wires":[["4793b4e7.03b284"]]},{"id":"c67b35a7.d90cc","type":"not-found","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":489,"y":539,"z":"30436ccd.4adc14","wires":[["b634a873.25805"]]},{"id":"4793b4e7.03b284","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":660,"y":629,"z":"30436ccd.4adc14","wires":[["815c662d.84ab88","e44ffe63.65498","67e0c003.fc637"]]},{"id":"b634a873.25805","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":654,"y":541,"z":"30436ccd.4adc14","wires":[["10d69be.e94b2e4"]]},{"id":"e44ffe63.65498","type":"execute","name":"execute IntermediateMessageSender","xml":"<execute plugin='org.onap.appc.dg.common.IntermediateMessageSender' method='sendMessage' >\n<parameter name='code' value=\"501\" />\n<parameter name='message' value=\"`$dcae-error-message`\" />\n<parameter name='prefix' value=\"tmp.intermediateerror\"/>","comments":"","outputs":1,"x":1389,"y":676,"z":"30436ccd.4adc14","wires":[["860f3f46.08ddc","72f4d895.e59d38"]]},{"id":"860f3f46.08ddc","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1618,"y":642,"z":"30436ccd.4adc14","wires":[["1f235b69.85d695"]]},{"id":"72f4d895.e59d38","type":"failure","name":"failure","xml":"<outcome value='failure'>","comments":"","outputs":1,"x":1610,"y":710,"z":"30436ccd.4adc14","wires":[["1f235b69.85d695"]]},{"id":"1f235b69.85d695","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1789,"y":642,"z":"30436ccd.4adc14","wires":[["cf2797ac.14177"]]},{"id":"2032452c.51d42a","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1314,"y":548,"z":"30436ccd.4adc14","wires":[["dec2c7fd.e23a58","e44ffe63.65498","67e0c003.fc637"]]},{"id":"cf2797ac.14177","type":"record","name":"record","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"MSGSENDERERERROR\" value=\"Unable to call IntermediateErrorMessageSender\"/>\n","comments":"","outputs":1,"x":1960,"y":642,"z":"30436ccd.4adc14","wires":[[]]},{"id":"10d69be.e94b2e4","type":"execute","name":"execute updateUploadConfig","xml":"<execute plugin=\"org.onap.appc.data.services.node.ConfigResourceNode\" method=\"updateUploadConfig\">\n<parameter name=\"responsePrefix\" value=\"tmp.uploadconfig\" />\n\n","comments":"","outputs":1,"x":896,"y":536,"z":"30436ccd.4adc14","wires":[["60922c75.3eea14","bf243306.adc27","a2c86ad3.ec63f8"]]},{"id":"60922c75.3eea14","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1110,"y":537,"z":"30436ccd.4adc14","wires":[["2032452c.51d42a"]]},{"id":"bf243306.adc27","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1111,"y":571,"z":"30436ccd.4adc14","wires":[["2032452c.51d42a"]]},{"id":"a2c86ad3.ec63f8","type":"not-found","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1081,"y":296,"z":"30436ccd.4adc14","wires":[["eac20556.00c348"]]},{"id":"67e0c003.fc637","type":"execute","name":"execute saveTxLog","xml":"<execute plugin=\"org.onap.appc.data.services.node.ConfigResourceNode\" method=\"saveConfigTransactionLog\">\n<parameter name=\"messageType\" value=\"log\" />\n<parameter name=\"message\" value=\"`'501:' + $dcae-error-message`\" />\n<parameter name=\"responsePrefix\" value=\"tmp.saveTxLog\" />\n","comments":"","outputs":1,"x":1357.5,"y":776,"z":"30436ccd.4adc14","wires":[["26fc329c.a59e4e"]]},{"id":"26fc329c.a59e4e","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1553.5,"y":776,"z":"30436ccd.4adc14","wires":[["bb8dff26.bccd28"]]},{"id":"bb8dff26.bccd28","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1725.5,"y":778,"z":"30436ccd.4adc14","wires":[[]]},{"id":"c2d0c3c1.33fe58","type":"execute","name":"execute Read Properties","xml":"<execute plugin='org.openecomp.sdnc.prop.PropertiesNode' method='readProperties' >\n\t<parameter name=\"fileName\" value=\"%SDNC_CONFIG_DIR%/appc.properties\"/>\n\t<parameter name=\"contextPrefix\" value=\"prop\"/>\n\n","comments":"","outputs":1,"x":400,"y":202,"z":"30436ccd.4adc14","wires":[["9bfb70c8.4c792","b78d6023.fd1328"]]},{"id":"9bfb70c8.4c792","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":625,"y":175,"z":"30436ccd.4adc14","wires":[["7501ba71.939a9c"]]},{"id":"b78d6023.fd1328","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":600,"y":216,"z":"30436ccd.4adc14","wires":[["7501ba71.939a9c"]]},{"id":"7501ba71.939a9c","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":787,"y":189,"z":"30436ccd.4adc14","wires":[["ccc94347.bf78e","9cef9dac.6442d"]]},{"id":"ccc94347.bf78e","type":"record","name":"record","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"info\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"DCAEREPORTERERROR\" value=\"Unable to read appc.properties File\"/>\n","comments":"","outputs":1,"x":947,"y":156,"z":"30436ccd.4adc14","wires":[[]]},{"id":"9cef9dac.6442d","type":"set","name":"set topic name to null","xml":"<set>\n<parameter name='prop.appc.LCM.topic.write' value=\"\" />\n","comments":"","x":999,"y":215,"z":"30436ccd.4adc14","wires":[]},{"id":"eac20556.00c348","type":"call","name":"call: PublishConfiguration","xml":"<call module=\"APPC\" rpc=\"PublishConfiguration\" mode=\"sync\">","comments":"","outputs":1,"x":1298,"y":294,"z":"30436ccd.4adc14","wires":[["a15a38a7.876bc"]]},{"id":"a15a38a7.876bc","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1512,"y":298,"z":"30436ccd.4adc14","wires":[["4f5647e3.e12ca"]]},{"id":"4f5647e3.e12ca","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1694,"y":300,"z":"30436ccd.4adc14","wires":[["a2df8d58.688c38","e44ffe63.65498","67e0c003.fc637"]]},{"id":"dec2c7fd.e23a58","type":"set","name":"set dcae-error-message","xml":"<set>\n<parameter name='dcae-error-message' value=\"`'Configuration is successful but unable to save the running config.' + $tmp.uploadconfig.error-message`\" />\n","comments":"","x":1581,"y":542,"z":"30436ccd.4adc14","wires":[]},{"id":"815c662d.84ab88","type":"set","name":"set dcae-error-message","xml":"<set>\n<parameter name='dcae-error-message' value=\"Configuration is successful but unable to get the running config.\" />\n","comments":"","x":896,"y":605,"z":"30436ccd.4adc14","wires":[]},{"id":"a2df8d58.688c38","type":"set","name":"set dcae-error-message","xml":"<set>\n<parameter name='dcae-error-message' value='Configuration is successful.DG Workflow PublishConfiguration not found' />\n","comments":"","x":1924,"y":301,"z":"30436ccd.4adc14","wires":[]}]
