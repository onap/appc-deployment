[{"id":"73fd49f3.a1d278","type":"dgstart","name":"DGSTART","outputs":1,"x":208.75,"y":98.75,"z":"d5c2f7ab.9eeb78","wires":[["98dbdd7c.fe8c3"]]},{"id":"53ce8877.2ecf68","type":"method","name":"method: GetDeviceRunningConfig","xml":"<method rpc='GetDeviceRunningConfig' mode='sync'>\n","comments":"","outputs":1,"x":645.1785430908203,"y":89.17857456207275,"z":"d5c2f7ab.9eeb78","wires":[["71df0315.00e07c"]]},{"id":"98dbdd7c.fe8c3","type":"service-logic","name":"APPC 4.0.0","module":"APPC","version":"3.1.0","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='APPC' version='4.0.0'>","outputs":1,"x":399.75,"y":96.75,"z":"d5c2f7ab.9eeb78","wires":[["53ce8877.2ecf68"]]},{"id":"a7b3e993.df4158","type":"set","name":"set Request Parameters","xml":"<set>\n<parameter name='vnf-type' value=\"`$config.vnf-type`\" />\n<parameter name='vnf-name' value=\"`$config.vnf-name`\" />\n<parameter name='protocol' value=\"`$config.protocol`\" />\n<parameter name='hostIpAddress' value=\"`$config.host-ip-address`\" />\n<parameter name='userName' value=\"`$config.user-name`\" />\n<parameter name='password' value=\"`$config.password`\" />\n<parameter name='portNumber' value=\"`$config.port-number`\" />\n","comments":"","x":571.0834197998047,"y":167.74999570846558,"z":"d5c2f7ab.9eeb78","wires":[]},{"id":"f83cb7cd.e4dd78","type":"execute","name":"execute: Get Rest Configuration","xml":"<execute plugin=\"com.att.sdnctl.restconf.RestConfCallNode\" method=\"getConfiguration\">\n<parameter name=\"hostIpAddress\" value=\"`$hostIpAddress`\" />\n<parameter name=\"protocol\" value=\"`$protocol`\" />\n<parameter name=\"responsePrefix\" value=\"restconf\" />\n","comments":"","outputs":1,"x":704.75,"y":512.75,"z":"d5c2f7ab.9eeb78","wires":[["198a50e4.1a084f","f26ecc71.80f99","813bb5a6.7d4a68"]]},{"id":"855c15a1.c5faf8","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n<parameter name=\"error-code\" value=\"\"/>\n<parameter name=\"dcae-error-message\" value=\"Unable to Get the Configuration\"/>\n","comments":"","x":2005.7500381469727,"y":622.7500162124634,"z":"d5c2f7ab.9eeb78","wires":[]},{"id":"198a50e4.1a084f","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":961.75,"y":580.75,"z":"d5c2f7ab.9eeb78","wires":[["d887442e.fdbd68"]]},{"id":"d51d7787.158188","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":984.75,"y":632.75,"z":"d5c2f7ab.9eeb78","wires":[["2880086.7157bf8"]]},{"id":"2880086.7157bf8","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n<parameter name='device-running-config' value=\"`$restconf.config`\" />\n","comments":"","x":1213.75,"y":620.75,"z":"d5c2f7ab.9eeb78","wires":[]},{"id":"f26ecc71.80f99","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":800.75,"y":632.75,"z":"d5c2f7ab.9eeb78","wires":[["d51d7787.158188"]]},{"id":"d887442e.fdbd68","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1792.7500343322754,"y":612.7500648498535,"z":"d5c2f7ab.9eeb78","wires":[["855c15a1.c5faf8"]]},{"id":"71df0315.00e07c","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":301.75,"y":166.75,"z":"d5c2f7ab.9eeb78","wires":[["a7b3e993.df4158","2fbf7d15.74f302"]]},{"id":"29cf8ea9.51acb2","type":"outcome","name":"RESTCONF-XML","xml":"<outcome value='RESTCONF-XML'>\n","comments":"","outputs":1,"x":346.75,"y":513.75,"z":"d5c2f7ab.9eeb78","wires":[["cbfbcb9b.61f818"]]},{"id":"cbfbcb9b.61f818","type":"block","name":"block","xml":"<block atomic=\"true\">\n","atomic":"false","comments":"","outputs":1,"x":506.75,"y":464.75,"z":"d5c2f7ab.9eeb78","wires":[["f83cb7cd.e4dd78"]]},{"id":"2fbf7d15.74f302","type":"switchNode","name":"switch : Protocol","xml":"<switch test=\"`$protocol`\">\n","comments":"","outputs":1,"x":176.75,"y":268.75,"z":"d5c2f7ab.9eeb78","wires":[["29cf8ea9.51acb2","47521138.e1182","aa86a367.9e31","9e29ccc9.7ecc5","cb04f713.845c98","d235c42e.58bf08"]]},{"id":"47521138.e1182","type":"outcome","name":"CLI","xml":"<outcome value='CLI'>\n","comments":"","outputs":1,"x":370.75,"y":269.75,"z":"d5c2f7ab.9eeb78","wires":[["6f3ae8b7.9b6778"]]},{"id":"e982ff2.bf8a4","type":"get-resource","name":"get-resource GET_CONFIG_TEMPLATE","xml":"<get-resource\n\tplugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' \n\tresource='SQL'\n\tkey=\"SELECT TEMPLATE FROM GET_CONFIG_TEMPLATE WHERE vnf_type = $vnf-type ;\"\n    force='true'\n\tpfx='config-template'>\n","comments":"","outputs":1,"x":754.7499694824219,"y":247.75,"z":"d5c2f7ab.9eeb78","wires":[["48deb1d2.fcd28","935998ed.ba2098"]]},{"id":"6f3ae8b7.9b6778","type":"block","name":"block","xml":"<block atomic=\"true\">\n","atomic":"false","comments":"","outputs":1,"x":510.7499694824219,"y":270.75,"z":"d5c2f7ab.9eeb78","wires":[["e982ff2.bf8a4","5f0176d.376ce88"]]},{"id":"ede520ec.0c179","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n<parameter name=\"error-code\" value=\"\"/>\n<parameter name=\"dcae-error-message\" value=\"Unable to Read Config Template\"/>\n\t","comments":"","x":1331.7499694824219,"y":274.75,"z":"d5c2f7ab.9eeb78","wires":[]},{"id":"98a7d137.1e399","type":"block","name":"block","xml":"<block atomic=\"true\">\n","atomic":"false","comments":"","outputs":1,"x":1160.7499694824219,"y":275.75,"z":"d5c2f7ab.9eeb78","wires":[["ede520ec.0c179"]]},{"id":"41ac5929.942928","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n<parameter name='device-running-config' value=\"`$cliOutput`\" />\n","comments":"","x":1207.75,"y":490.75004863739014,"z":"d5c2f7ab.9eeb78","wires":[]},{"id":"5f0176d.376ce88","type":"execute","name":"execute: Get CLI RunningConfig","xml":"<configure adaptor='org.onap.appc.ccadaptor.ConfigComponentAdaptor' key='GetCliRunningConfig'>\n<parameter name=\"Host_ip_address\" value=\"`$hostIpAddress`\" />\n<parameter name=\"User_name\" value=\"`$userName`\" />\n<parameter name=\"Password\" value=\"`$password`\" />\n<parameter name=\"Port_number\" value=\"`$portNumber`\" />\n<parameter name=\"Get_config_template\" value=\"`$config-template.TEMPLATE`\" />\n","comments":"","outputs":1,"x":720.7500152587891,"y":336.7500123977661,"z":"d5c2f7ab.9eeb78","wires":[["78d9a2f9.46003c","97890ce8.6b316","98f67919.c738f8"]]},{"id":"e6da77d0.fadda8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":986.75,"y":435.75006103515625,"z":"d5c2f7ab.9eeb78","wires":[["41ac5929.942928"]]},{"id":"48deb1d2.fcd28","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1007.7499694824219,"y":287.75,"z":"d5c2f7ab.9eeb78","wires":[["98a7d137.1e399"]]},{"id":"78d9a2f9.46003c","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":812.75,"y":433.75006103515625,"z":"d5c2f7ab.9eeb78","wires":[["e6da77d0.fadda8"]]},{"id":"813bb5a6.7d4a68","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":970.75,"y":535.75,"z":"d5c2f7ab.9eeb78","wires":[["d887442e.fdbd68"]]},{"id":"935998ed.ba2098","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1006.7499694824219,"y":216.75,"z":"d5c2f7ab.9eeb78","wires":[["98a7d137.1e399"]]},{"id":"97890ce8.6b316","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":989.7500076293945,"y":351.7499933242798,"z":"d5c2f7ab.9eeb78","wires":[["560e0fe9.a63f6"]]},{"id":"98f67919.c738f8","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":980.75,"y":390.75,"z":"d5c2f7ab.9eeb78","wires":[["d887442e.fdbd68"]]},{"id":"fde847ff.94d008","type":"comment","name":"User Story ID: US731106","info":"Developed by Brinda Santh <bs2796@att.com>","comments":"","x":887.7499694824219,"y":28.75,"z":"d5c2f7ab.9eeb78","wires":[]},{"id":"aa86a367.9e31","type":"outcome","name":"NETCONF-XML","xml":"<outcome value='NETCONF-XML'>\n","comments":"","outputs":1,"x":281.75,"y":676.75,"z":"d5c2f7ab.9eeb78","wires":[["e84e48c0.7bd1f8"]]},{"id":"e84e48c0.7bd1f8","type":"block","name":"block","xml":"<block atomic=\"true\">\n","atomic":"false","comments":"","outputs":1,"x":453.75,"y":676.75,"z":"d5c2f7ab.9eeb78","wires":[["567cae24.a2056"]]},{"id":"567cae24.a2056","type":"execute","name":"execute: Get XML RunningConfig","xml":"<configure adaptor='org.onap.appc.ccadaptor.ConfigComponentAdaptor' key='xml-getrunningconfig'>\n<parameter name=\"Host_ip_address\" value=\"`$hostIpAddress`\" />\n<parameter name=\"User_name\" value=\"`$userName`\" />\n<parameter name=\"Password\" value=\"`$password`\" />\n<parameter name=\"Port_number\" value=\"`$portNumber`\" />\n<parameter name=\"Protocol\" value=\"`$protocol`\" />\n","comments":"","outputs":1,"x":683.6071929931641,"y":705.892858505249,"z":"d5c2f7ab.9eeb78","wires":[["50a8e434.940b6c","66893930.a5f318","d6c04b27.53f0c8"]]},{"id":"50a8e434.940b6c","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1009.75,"y":687.75,"z":"d5c2f7ab.9eeb78","wires":[["560e0fe9.a63f6"]]},{"id":"66893930.a5f318","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1010.75,"y":736.75,"z":"d5c2f7ab.9eeb78","wires":[["d887442e.fdbd68"]]},{"id":"9e29ccc9.7ecc5","type":"outcome","name":"RESTCONF","xml":"<outcome value='RESTCONF'>\n","comments":"","outputs":1,"x":358.75,"y":438.75,"z":"d5c2f7ab.9eeb78","wires":[["cbfbcb9b.61f818"]]},{"id":"d6c04b27.53f0c8","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":830.75,"y":784.75,"z":"d5c2f7ab.9eeb78","wires":[["907796bc.3521c8"]]},{"id":"907796bc.3521c8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1006.75,"y":783.75,"z":"d5c2f7ab.9eeb78","wires":[["230d353a.82deba"]]},{"id":"230d353a.82deba","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n<parameter name='device-running-config' value=\"`$xmlRunningConfigOutput `\" />\n","comments":"","x":1211.4169387817383,"y":781.7500133514404,"z":"d5c2f7ab.9eeb78","wires":[]},{"id":"cb04f713.845c98","type":"outcome","name":"CHEF","xml":"<outcome value='CHEF'>\n","comments":"","outputs":1,"x":252.75,"y":773.75,"z":"d5c2f7ab.9eeb78","wires":[["87e6927d.8c87a"]]},{"id":"2c9ce105.810cce","type":"block","name":"block","xml":"<block atomic=\"true\">\n","atomic":"false","comments":"","outputs":1,"x":465.74999237060547,"y":821.4166603088379,"z":"d5c2f7ab.9eeb78","wires":[["830e8c40.09ea8"]]},{"id":"830e8c40.09ea8","type":"execute","name":"execute: getChefRunningConfig","xml":"<execute plugin=\"org.onap.appc.data.services.node.ConfigResourceNode\" method=\"getConfigFilesByVnfVmNCategory\">\n<parameter name=\"fileCategory\" value=\"device_configuration\" />\n<parameter name='vnfId' value=\"`$config.vnf-id`\" />\n<parameter name='vmName' value=\"`$config.vm-name`\" />\n<parameter name=\"responsePrefix\" value=\"tmp.deviceconfig\" />\n","comments":"","outputs":1,"x":701.8928680419922,"y":865.6072664260864,"z":"d5c2f7ab.9eeb78","wires":[["f10cdc38.2c8fd","d81f053f.e21898","8b94b394.610ac"]]},{"id":"8b94b394.610ac","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":896.4642944335938,"y":961.89284324646,"z":"d5c2f7ab.9eeb78","wires":[["ff4e13e0.ba24a"]]},{"id":"ff4e13e0.ba24a","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1195.4167976379395,"y":996.4166450500488,"z":"d5c2f7ab.9eeb78","wires":[["bd7122ae.6d345"]]},{"id":"d81f053f.e21898","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1003.750129699707,"y":897.7500658035278,"z":"d5c2f7ab.9eeb78","wires":[[]]},{"id":"f10cdc38.2c8fd","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1002.750129699707,"y":848.7500658035278,"z":"d5c2f7ab.9eeb78","wires":[["3be4b321.a7b82c"]]},{"id":"bd7122ae.6d345","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n<parameter name='device-running-config' value=\"`$tmp.deviceconfig.file-content`\" />\n","comments":"","x":1431.750144958496,"y":1000.08331823349,"z":"d5c2f7ab.9eeb78","wires":[]},{"id":"3be4b321.a7b82c","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1178.750129699707,"y":852.7500658035278,"z":"d5c2f7ab.9eeb78","wires":[["68fcda28.298664"]]},{"id":"68fcda28.298664","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n<parameter name=\"error-code\" value=\"\"/>\n<parameter name=\"dcae-error-message\" value=\"`$tmp.deviceconfig.error-message`\"/>\n\n","comments":"","x":1329.0834503173828,"y":832.8929662704468,"z":"d5c2f7ab.9eeb78","wires":[]},{"id":"d47a34b9.96fae8","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n<parameter name=\"error-code\" value=\"\"/>\n<parameter name=\"dcae-error-message\" value=\"`$error-message`\"/>\n","comments":"","x":1520.75,"y":398.75,"z":"d5c2f7ab.9eeb78","wires":[]},{"id":"560e0fe9.a63f6","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1345.75,"y":402.75,"z":"d5c2f7ab.9eeb78","wires":[["d47a34b9.96fae8"]]},{"id":"d235c42e.58bf08","type":"outcome","name":" Ansible","xml":"<outcome value='Ansible'>\n","comments":"","outputs":1,"x":227.19049835205078,"y":891.4763145446777,"z":"d5c2f7ab.9eeb78","wires":[["7994c061.4c34b"]]},{"id":"87e6927d.8c87a","type":"block","name":"block","xml":"<block atomic=\"true\">\n","atomic":"false","comments":"","outputs":1,"x":413.33331298828125,"y":953.333251953125,"z":"d5c2f7ab.9eeb78","wires":[["b2457e62.0d6be"]]},{"id":"b2457e62.0d6be","type":"call","name":"call  GetTemplateConfig_Chef","xml":"<call module='APPC' rpc='GetTemplateConfig_Chef' mode='sync' >\n","comments":"","outputs":1,"x":659.2857055664062,"y":954.0477857589722,"z":"d5c2f7ab.9eeb78","wires":[["e573827e.36bb9","35aad49a.f87bcc","7142f414.35002c"]]},{"id":"163d15dd.b3498a","type":"call","name":"call  GetTemplateConfig_Ansible","xml":"<call module='APPC' rpc='GetTemplateConfig_Ansible' mode='sync' >\n","comments":"","outputs":1,"x":597.857063293457,"y":1235.476152420044,"z":"d5c2f7ab.9eeb78","wires":[["e6a86a3a.62afb8","80beb099.eee58","9ba09f64.03e81"]]},{"id":"35aad49a.f87bcc","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":722.6190185546875,"y":1095.7143206596375,"z":"d5c2f7ab.9eeb78","wires":[["d887442e.fdbd68"]]},{"id":"e573827e.36bb9","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":721.6190185546875,"y":1046.7143206596375,"z":"d5c2f7ab.9eeb78","wires":[["73395769.c7fd38"]]},{"id":"73395769.c7fd38","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":897.6190185546875,"y":1050.7143206596375,"z":"d5c2f7ab.9eeb78","wires":[["ebfee93d.0a6c28"]]},{"id":"ebfee93d.0a6c28","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n<parameter name=\"error-code\" value=\"\"/>\n<parameter name=\"dcae-error-message\" value=\"`$tmp.deviceconfig.error-message`\"/>\n\n","comments":"","x":1089.6190185546875,"y":1043.7143206596375,"z":"d5c2f7ab.9eeb78","wires":[]},{"id":"7142f414.35002c","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":660.9523315429688,"y":1169.047694683075,"z":"d5c2f7ab.9eeb78","wires":[["6ed3304a.f8835"]]},{"id":"6ed3304a.f8835","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":823.9523315429688,"y":1169.047694683075,"z":"d5c2f7ab.9eeb78","wires":[["99960733.d8c138"]]},{"id":"99960733.d8c138","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n<parameter name='device-running-config' value=\"`$tmp.deviceconfig.file-content`\" />\n<parameter name='output.status.code' value='`$org.onap.appc.adapter.ansible.result.code`' />\n<parameter name='output.status.message' value='`$org.onap.appc.adapter.ansible.message`'/>\n<parameter name='output.status.results' value = '`$output.status.results`'/>\n","comments":"","x":1026.9523315429688,"y":1171.047694683075,"z":"d5c2f7ab.9eeb78","wires":[]},{"id":"7994c061.4c34b","type":"block","name":"block","xml":"<block atomic=\"true\">\n","atomic":"false","comments":"","outputs":1,"x":409.52384185791016,"y":1150.4760665893555,"z":"d5c2f7ab.9eeb78","wires":[["163d15dd.b3498a"]]},{"id":"80beb099.eee58","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":831.1903610229492,"y":1300.4761695861816,"z":"d5c2f7ab.9eeb78","wires":[["d887442e.fdbd68"]]},{"id":"e6a86a3a.62afb8","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":830.1903610229492,"y":1251.4761695861816,"z":"d5c2f7ab.9eeb78","wires":[["565cf063.e3efb"]]},{"id":"565cf063.e3efb","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1006.1903610229492,"y":1255.4761695861816,"z":"d5c2f7ab.9eeb78","wires":[["484bbab0.c63454"]]},{"id":"484bbab0.c63454","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n<parameter name=\"error-code\" value=\"\"/>\n<parameter name=\"dcae-error-message\" value=\"`$tmp.deviceconfig.error-message`\"/>\n\n","comments":"","x":1198.1903381347656,"y":1248.4761772155762,"z":"d5c2f7ab.9eeb78","wires":[]},{"id":"9ba09f64.03e81","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":769.5236740112305,"y":1373.8095436096191,"z":"d5c2f7ab.9eeb78","wires":[["6b8fab54.184374"]]},{"id":"6b8fab54.184374","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":932.5236740112305,"y":1373.8095436096191,"z":"d5c2f7ab.9eeb78","wires":[["5dadab18.730154"]]},{"id":"5dadab18.730154","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n<parameter name='device-running-config' value=\"`$tmp.deviceconfig.file-content`\" />\n<parameter name='code' value='`$output.status.code`' />\n<parameter name='message' value='`$output.status.message`'/>\n<parameter name='Status' value = '`$output.status.results`'/>\n","comments":"","x":1135.5236282348633,"y":1375.809624671936,"z":"d5c2f7ab.9eeb78","wires":[]}]
