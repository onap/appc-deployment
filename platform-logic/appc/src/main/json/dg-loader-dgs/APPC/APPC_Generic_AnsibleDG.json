[{"id":"f9d2eb85.dfd418","type":"dgstart","name":"DGSTART","outputs":1,"x":168.66665649414062,"y":148.66665649414062,"z":"8d979a23.6d826","wires":[["5d68bca4.0159fc"]]},{"id":"5d68bca4.0159fc","type":"service-logic","name":"APPC 4.0.0","module":"APPC","version":"4.0.0","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='APPC' version='4.0.0'>","outputs":1,"x":373.3541564941406,"y":137.72915649414062,"z":"8d979a23.6d826","wires":[["a55d1227.45f05"]]},{"id":"a55d1227.45f05","type":"method","name":"method Generic_AnsibleDG","xml":"<method rpc='Generic_AnsibleDG' mode='sync'>\n","comments":"","outputs":1,"x":624.9166564941406,"y":137.72915649414062,"z":"8d979a23.6d826","wires":[["8b9ca10a.ec99c8"]]},{"id":"b99a5f9d.0955d","type":"call","name":"call: ansible-adapter-1.0","xml":"<call module=\"APPC\" rpc=\"ansible-adapter-1.0\" mode=\"sync\">","comments":"","outputs":1,"x":380.5211181640625,"y":862.491455078125,"z":"8d979a23.6d826","wires":[["27eb5717.7f1578","97eba8a5.6f26e8"]]},{"id":"2b1c8824.a9a448","type":"execute","name":"execute getDecrytedpassword","xml":" <execute plugin='org.openecomp.appc.encryptiontool.wrapper.EncryptionToolDGWrapper' method = 'getProperty'>\n   <parameter name='propertyName' value=\"`$tmp.prefix+'.'+$password`\"/>\n  <parameter name='responsePrefix' value =\"prefix\"/>","comments":"","outputs":1,"x":655.687255859375,"y":493.1387023925781,"z":"8d979a23.6d826","wires":[["f54d4be5.982b6","3ec9dca0.23308c"]]},{"id":"3d4634cd.056774","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value=\"401\" />\n<parameter name='error-message' value=\"Unable to decrypt the password.\" />\n","comments":"","x":1319.7084197998047,"y":705.6582336425781,"z":"8d979a23.6d826","wires":[]},{"id":"1ebdbd5c.8a46e3","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1150.9790725708008,"y":705.8374347686768,"z":"8d979a23.6d826","wires":[["3d4634cd.056774"]]},{"id":"3ec9dca0.23308c","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":952.9166259765625,"y":703.458251953125,"z":"8d979a23.6d826","wires":[["1ebdbd5c.8a46e3"]]},{"id":"f54d4be5.982b6","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":933.9293212890625,"y":637.3124389648438,"z":"8d979a23.6d826","wires":[["1ebdbd5c.8a46e3"]]},{"id":"859dc462.b013c","type":"execute","name":"execute Convert payload to DG Context ","xml":"<execute plugin=\"org.openecomp.sdnc.config.generator.convert.ConvertNode\" method=\"convertJson2DGContext\">\n<parameter name=\"jsonData\" value=\"`$tmp.merge.mergedData`\" />\n<parameter name=\"isEscaped\" value=\"Y\" />\n<parameter name=\"blockKeys\" value=\"EnvParameters,PlaybookName,Timeout,vnf-host-ip-address,NodeList\" />\n<parameter name=\"responsePrefix\" value=\"tmp.convertnode\" />","comments":"","outputs":1,"x":733.5034103393555,"y":256.72020721435547,"z":"8d979a23.6d826","wires":[["24835a8e.df2746","33e209ac.94f7b6"]]},{"id":"a2f9c928.6ad4f8","type":"set","name":"set Payload params ","xml":"<set>\n<parameter name='PlaybookName' value='`$PlaybookName`' />\n<parameter name='NodeList' value='`$NodeList`'/>\n<parameter name='vnf_id' value='`$vnf-id`' />\n<parameter name='AgentUrl' value='`$vnf-host-ip-address`'/>\n <parameter name='User' value='`$propertyName`'/>\n  <parameter name='Password' value='`$password`'/>\n  <parameter name='EnvParameters' value='`$EnvParameters`'/>\n  <parameter name='Timeout' value='`$Timeout`'/>\n\n\n\n","comments":"","x":449.31097412109375,"y":765.8724365234375,"z":"8d979a23.6d826","wires":[]},{"id":"33e209ac.94f7b6","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":952.7416076660156,"y":452.375,"z":"8d979a23.6d826","wires":[["216294d5.a7fb94"]]},{"id":"24835a8e.df2746","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":949.574951171875,"y":539.6583318710327,"z":"8d979a23.6d826","wires":[["b7ce4425.f48f58"]]},{"id":"216294d5.a7fb94","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1119.4083557128906,"y":455.5416564941406,"z":"8d979a23.6d826","wires":[["9067e852.5bfff8"]]},{"id":"b7ce4425.f48f58","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1125.7415237426758,"y":519.0249500274658,"z":"8d979a23.6d826","wires":[["4a3e995a.4273c"]]},{"id":"4a3e995a.4273c","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t<parameter name=\"error-code\" value=\"401\"/>\n\t<parameter name=\"error-message\" value=\"Unable to process convert payload to context.\"/>\n\t\n","comments":"","x":1328.9415168762207,"y":522.2083377838135,"z":"8d979a23.6d826","wires":[]},{"id":"8b9ca10a.ec99c8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":421.0082550048828,"y":250.30825805664062,"z":"8d979a23.6d826","wires":[["859dc462.b013c","2b1c8824.a9a448","b99a5f9d.0955d","a2f9c928.6ad4f8","6192438.689873c","1ccfd19d.b184de","e1684642.0ecd8","5e29f749.55b95","dd3c902f.08a6a","db0f7de5.7f4038"]]},{"id":"9067e852.5bfff8","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n<parameter name=\"error-code\" value=\"401\"/>\n\t<parameter name=\"error-message\" value=\"`$tmp.convertnode.error-message`\"/>\n\t\n\t","comments":"","x":1347.9748840332031,"y":457.9416198730469,"z":"8d979a23.6d826","wires":[]},{"id":"a262ae5f.96344","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t","comments":"","x":1149.5749816894531,"y":894.4582824707031,"z":"8d979a23.6d826","wires":[]},{"id":"27eb5717.7f1578","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":887.6582336425781,"y":838.8916931152344,"z":"8d979a23.6d826","wires":[["a262ae5f.96344"]]},{"id":"97eba8a5.6f26e8","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":863.8583068847656,"y":921.4416198730469,"z":"8d979a23.6d826","wires":[["a262ae5f.96344"]]},{"id":"6192438.689873c","type":"set","name":"set tmp.prefix","xml":"<set>\n<parameter name=\"tmp.prefix\" value=\"`$vnf-type + '.' + $input.action`\"/>\n<parameter name=\"password\" value=\"password\"/>\n<parameter name=\"user\" value=\"user\"/>\n\n","comments":"","x":727.5115356445312,"y":345.95501708984375,"z":"8d979a23.6d826","wires":[]},{"id":"1ccfd19d.b184de","type":"record","name":"record","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"info\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"`$input.action`\"/>\n<parameter name=\"field3\" value =\"`$tmp.merge.mergedData`\"/>\n<parameter name=\"field4\" value =\"`$tmp.merge`\"/>","comments":"","outputs":1,"x":821.6116638183594,"y":183.46163940429688,"z":"8d979a23.6d826","wires":[[]]},{"id":"e1684642.0ecd8","type":"execute","name":"execute getUser","xml":" <execute plugin='org.openecomp.appc.encryptiontool.wrapper.EncryptionToolDGWrapper' method = 'getProperty'>\n  <parameter name='responsePrefix' value =\"prefix\"/>\n  <parameter name='propertyName' value=\"`$tmp.prefix+'.'+$user`\"/>","comments":"","outputs":1,"x":550.3334350585938,"y":631.3333740234375,"z":"8d979a23.6d826","wires":[[]]},{"id":"5e29f749.55b95","type":"set","name":"set password","xml":"<set>\n<parameter name=\"tmp.prefix\" value=\"`$vnf-type + '.' + $input.action`\"/>\n<parameter name=\"password\" value=\"$propertyName\"/>\n\n\n","comments":"","x":638.66650390625,"y":570.3333129882812,"z":"8d979a23.6d826","wires":[]},{"id":"db0f7de5.7f4038","type":"set","name":"set user","xml":"<set>\n<parameter name=\"user\" value=\"$propertyName\"/>\n\n\n","comments":"","x":527,"y":690.6666259765625,"z":"8d979a23.6d826","wires":[]},{"id":"dd3c902f.08a6a","type":"set","name":"set Payload params ","xml":"<set>\n<parameter name='PlaybookName' value='`$block_PlaybookName`' />\n<parameter name='NodeList' value ='`$block_NodeList`'/>\n<parameter name='vnf_id' value='`$vnf-id`' />\n<parameter name='AgentUrl' value='`$vnf-host-ip-address`'/>\n<parameter name='EnvParameters' value='`$block_EnvParameters`'/>\n<parameter name='Timeout' value='`$block_Timeout`'/>\n\n\n\n","comments":"","x":735.3333129882812,"y":303.3333435058594,"z":"8d979a23.6d826","wires":[]}]
