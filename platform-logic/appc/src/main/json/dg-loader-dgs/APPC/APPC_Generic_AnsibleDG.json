[{"id":"11dc623d.901f0e","type":"dgstart","name":"DGSTART","outputs":1,"x":141.33331298828125,"y":68.86665344238281,"z":"3a255785.10924","wires":[["1bdcf000.f7bf48"]]},{"id":"1bdcf000.f7bf48","type":"service-logic","name":"APPC 4.0.0","module":"APPC","version":"4.0.0","comments":"","xml":"<service-logic xmlns='http://www.openecomp.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.openecomp.org/sdnc/svclogic ./svclogic.xsd' module='APPC' version='4.0.0'>","outputs":1,"x":267.6875,"y":46.26249694824219,"z":"3a255785.10924","wires":[["e8ebe4d2.47629"]]},{"id":"e8ebe4d2.47629","type":"method","name":"method Generic_AnsibleDG","xml":"<method rpc='Generic_AnsibleDG' mode='sync'>\n","comments":"","outputs":1,"x":519.25,"y":46.26249694824219,"z":"3a255785.10924","wires":[["b9fa92db.ae801"]]},{"id":"cdba2626.e4f0e","type":"call","name":"call: ansible-adapter-1.0","xml":"<call module=\"APPC\" rpc=\"ansible-adapter-1.0\" mode=\"sync\">","comments":"","outputs":1,"x":274.8544616699219,"y":771.0247955322266,"z":"3a255785.10924","wires":[["246043c5.f9790c","1f2fd774.7f32f1","5c1a8e53.1df84"]]},{"id":"5c57c6d8.9af2d","type":"execute","name":"execute getDecrytedpassword","xml":" <execute plugin=\"org.onap.appc.encryptiontool.wrapper.EncryptionToolDGWrapper\" method =\"getProperty\">\n <parameter name=\"responsePrefix\" value =\"prefix\"/>\n   <parameter name=\"propertyName\" value=\"`$tmp.prefix+'.'+$password`\"/>\n   <parameter name =\"password\" value=\"`$propertyName`\"/>\n  ","comments":"","outputs":1,"x":550.0205993652344,"y":401.6720428466797,"z":"3a255785.10924","wires":[["b214d4c8.55cc38","96a663b3.997758"]]},{"id":"b2bbc50f.ea54b8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value=\"401\" />\n<parameter name='error-message' value=\"Unable to decrypt the password.\" />\n","comments":"","x":1214.041763305664,"y":614.1915740966797,"z":"3a255785.10924","wires":[]},{"id":"c1a9c1c9.fed838","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1045.3124160766602,"y":614.3707752227783,"z":"3a255785.10924","wires":[["b2bbc50f.ea54b8"]]},{"id":"96a663b3.997758","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":847.2499694824219,"y":611.9915924072266,"z":"3a255785.10924","wires":[["c1a9c1c9.fed838"]]},{"id":"b214d4c8.55cc38","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":828.2626647949219,"y":545.8457794189453,"z":"3a255785.10924","wires":[["c1a9c1c9.fed838"]]},{"id":"c09f3d41.277fb8","type":"execute","name":"execute Convert payload to DG Context ","xml":"<execute plugin=\"org.onap.sdnc.config.generator.convert.ConvertNode\" method=\"convertJson2DGContext\">\n<parameter name=\"jsonData\" value=\"`$tmp.merge.mergedData`\" />\n<parameter name=\"isEscaped\" value=\"Y\" />\n<parameter name=\"blockKeys\" value=\"EnvParameters,PlaybookName,Timeout,vnf-host-ip-address,NodeList\" />\n<parameter name=\"responsePrefix\" value=\"tmp.convertnode\" />","comments":"","outputs":1,"x":627.8367538452148,"y":165.25354766845703,"z":"3a255785.10924","wires":[["99d1509f.18583","9e943dc.ae89e4"]]},{"id":"2a5268ba.0741d","type":"set","name":"set Payload params ","xml":"<set>\n<parameter name='PlaybookName' value='`$PlaybookName`' />\n<parameter name='NodeList' value='`$NodeList`'/>\n<parameter name='vnf_id' value='`$vnf-id`' />\n<parameter name='AgentUrl' value='`$vnf-host-ip-address`'/>\n <parameter name='User' value='`$propertyName`'/>\n  <parameter name='Password' value='`$password`'/>\n  <parameter name='EnvParameters' value='`$EnvParameters`'/>\n  <parameter name='Timeout' value='`$Timeout`'/>\n\n\n\n","comments":"","x":343.6443176269531,"y":674.4057769775391,"z":"3a255785.10924","wires":[]},{"id":"9e943dc.ae89e4","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":847.074951171875,"y":360.90834045410156,"z":"3a255785.10924","wires":[["7fea6668.af3de8"]]},{"id":"99d1509f.18583","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":843.9082946777344,"y":448.1916723251343,"z":"3a255785.10924","wires":[["93cf0cd6.d0a4c8"]]},{"id":"7fea6668.af3de8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1013.74169921875,"y":364.0749969482422,"z":"3a255785.10924","wires":[["c8734633.74013"]]},{"id":"93cf0cd6.d0a4c8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1020.0748672485352,"y":427.5582904815674,"z":"3a255785.10924","wires":[["e76811f1.a807c8"]]},{"id":"e76811f1.a807c8","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t<parameter name=\"error-code\" value=\"401\"/>\n\t<parameter name=\"error-message\" value=\"Unable to process convert payload to context.\"/>\n\t\n","comments":"","x":1223.27486038208,"y":430.74167823791504,"z":"3a255785.10924","wires":[]},{"id":"b9fa92db.ae801","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":315.3415985107422,"y":158.8415985107422,"z":"3a255785.10924","wires":[["c09f3d41.277fb8","5c57c6d8.9af2d","cdba2626.e4f0e","2a5268ba.0741d","16bf6e4e.95f3ea","4c298c19.5899dc","32880258.268d3e","d4dec4aa.f06728","c671c44b.c97d8","e3f37288.1de128","2c0d811a.49430e"]]},{"id":"c8734633.74013","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n<parameter name=\"error-code\" value=\"401\"/>\n\t<parameter name=\"error-message\" value=\"`$tmp.convertnode.error-message`\"/>\n\t\n\t","comments":"","x":1242.3082275390625,"y":366.47496032714844,"z":"3a255785.10924","wires":[]},{"id":"42dbe00.4a7a1a","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n<parameter name='error-code' value=\"401\" />\n<parameter name='error-message' value='`$org.onap.appc.adapter.ansible.message`'/>","comments":"","x":1068.1939392089844,"y":765.8487701416016,"z":"3a255785.10924","wires":[]},{"id":"246043c5.f9790c","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":781.9915771484375,"y":747.4250335693359,"z":"3a255785.10924","wires":[["42dbe00.4a7a1a"]]},{"id":"1f2fd774.7f32f1","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":758.191650390625,"y":829.9749603271484,"z":"3a255785.10924","wires":[["b0cf78a8.2fb77"]]},{"id":"16bf6e4e.95f3ea","type":"set","name":"set tmp.prefix","xml":"<set>\n<parameter name=\"tmp.prefix\" value=\"`$vnf-type + '.' + $input.action`\"/>\n<parameter name=\"password\" value=\"password\"/>\n<parameter name=\"user\" value=\"user\"/>\n\n","comments":"","x":587.5591125488281,"y":304.48838806152344,"z":"3a255785.10924","wires":[]},{"id":"4c298c19.5899dc","type":"execute","name":"execute getUser","xml":" <execute plugin='org.onap.appc.encryptiontool.wrapper.EncryptionToolDGWrapper' method = 'getProperty'>\n  <parameter name='responsePrefix' value =\"prefix\"/>\n  <parameter name='propertyName' value=\"`$tmp.prefix+'.'+$user`\"/>","comments":"","outputs":1,"x":444.6667785644531,"y":539.8667144775391,"z":"3a255785.10924","wires":[[]]},{"id":"e3f37288.1de128","type":"set","name":"set password","xml":"<set>\n<parameter name=\"tmp.prefix\" value=\"`$vnf-type + '.' + $input.action`\"/>\n<parameter name=\"password\" value=\"`$propertyName`\"/>\n\n\n","comments":"","x":542.9998168945312,"y":455.5333251953125,"z":"3a255785.10924","wires":[]},{"id":"d4dec4aa.f06728","type":"set","name":"set user","xml":"<set>\n<parameter name=\"user\" value=\"$propertyName\"/>\n\n\n","comments":"","x":421.33331298828125,"y":599.2000122070312,"z":"3a255785.10924","wires":[]},{"id":"32880258.268d3e","type":"set","name":"set Payload params ","xml":"<set>\n<parameter name='PlaybookName' value='`$block_PlaybookName`' />\n<parameter name='NodeList' value ='`$block_NodeList`'/>\n<parameter name='vnf_id' value='`$vnf-id`' />\n<parameter name='AgentUrl' value='`$vnf-host-ip-address`'/>\n<parameter name='EnvParameters' value='`$block_EnvParameters`'/>\n<parameter name='Timeout' value='`$block_Timeout`'/>\n\n\n\n","comments":"","x":629.6666564941406,"y":211.86668395996094,"z":"3a255785.10924","wires":[]},{"id":"b0cf78a8.2fb77","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n<parameter name='error-code' value=\"401\" />\n<parameter name='error-message' value='ansible-adapter-1.0.0 Dg not found'/>","comments":"","x":1012.8333435058594,"y":873.8905181884766,"z":"3a255785.10924","wires":[]},{"id":"bbc9b301.642c68","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n<parameter name='error-code' value='400' />\n<parameter name='error-message' value='`$org.onap.appc.adapter.ansible.message`'/>\n","comments":"","x":797.1191101074219,"y":971.0333404541016,"z":"3a255785.10924","wires":[]},{"id":"5c1a8e53.1df84","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":555.6905212402344,"y":911.8429107666016,"z":"3a255785.10924","wires":[["bbc9b301.642c68"]]},{"id":"c671c44b.c97d8","type":"record","name":"record","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"info\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name='field2' value='`$propertyName`'/>\n  <parameter name='field3' value='`$password`'/>","comments":"","outputs":1,"x":476.3999938964844,"y":638,"z":"3a255785.10924","wires":[[]]},{"id":"2c0d811a.49430e","type":"record","name":"record","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"info\"/>\n<parameter name=\"logger\" value=\"message-log1\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name='field2' value='`$propertyName`'/>\n  <parameter name='field3' value='`$password`'/>","comments":"","outputs":1,"x":533.6666259765625,"y":511.0000305175781,"z":"3a255785.10924","wires":[[]]}]