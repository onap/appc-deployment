[{"id":"8be5abbb.8e8238","type":"method","name":"RestartVMVNFCommonFlow","xml":"<method rpc='RestartVMVNFCommonFlow' mode='sync'>\n","comments":"","outputs":1,"x":162.75,"y":182,"z":"c78c4b7.7adc638","wires":[["436e1771.f30bb"]]},{"id":"4675131a.a2bb4c","type":"service-logic","name":"APPC 2.0.0","module":"APPC","version":"2.0.0","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='APPC' version='2.0.0'>","outputs":1,"x":145.75,"y":133,"z":"c78c4b7.7adc638","wires":[["8be5abbb.8e8238"]]},{"id":"8e03a789.3ae3f8","type":"dgstart","name":"DGSTART","outputs":1,"x":137.75,"y":83,"z":"c78c4b7.7adc638","wires":[["4675131a.a2bb4c"]]},{"id":"bcbc30ba.d66ea8","type":"execute","name":"execute_getVNF_Hierarchy","xml":"<execute plugin='org.onap.appc.dg.util.ExecuteNodeAction' method='getVnfHierarchy'>\n<parameter name=\"resourceKey\" value=\"`$input.action-identifiers.vnf-id`\" />","comments":"","outputs":1,"x":413.75,"y":269,"z":"c78c4b7.7adc638","wires":[["f2d80d63.c8c16","bbe6ec00.5438f8"]]},{"id":"f2d80d63.c8c16","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":569.0357208251953,"y":314.85713386535645,"z":"c78c4b7.7adc638","wires":[["5133513c.856678"]]},{"id":"d5460718.47f668","type":"block","name":"block : atomic","xml":"<block atomic='true'>\n","atomic":"true","comments":"","outputs":1,"x":1394.6073913574219,"y":309.5713963508606,"z":"c78c4b7.7adc638","wires":[["89a2871c.2a813","e61b9900.e00db"]]},{"id":"89a2871c.2a813","type":"for","name":"for_each_VMs","xml":"<for index=\"i\" start=\"0\" end=\"`$VNF.VMCount`\" >","comments":"","outputs":1,"x":1587.3217239379883,"y":319.42853116989136,"z":"c78c4b7.7adc638","wires":[["47896469.b34acc"]]},{"id":"47896469.b34acc","type":"block","name":"block : atomic","xml":"<block atomic='true'>\n","atomic":"true","comments":"","outputs":1,"x":1699.3217010498047,"y":252.7142515182495,"z":"c78c4b7.7adc638","wires":[["52fff5b0.4373c4"]]},{"id":"52fff5b0.4373c4","type":"execute","name":"execute_UpdateAA&I","xml":"<execute plugin='org.onap.appc.dg.util.ExecuteNodeAction' method='postResource'>\n<parameter name=\"resourceType\" value=\"vnfc\" />\n<parameter name=\"prefix\" value=\"vnfc\" />\n<parameter name=\"resourceKey\" value='vnfc-name = $VNF.VM[$i].VNFC' />\n<parameter name=\"attributeName\" value=\"orchestration-status\" />\n<parameter name=\"attributeValue\" value=\"Restarting\" />\n","comments":"","outputs":1,"x":1808.036018371582,"y":319.42854022979736,"z":"c78c4b7.7adc638","wires":[["31c0fe16.4742aa","a2d40fa2.090648"]]},{"id":"31c0fe16.4742aa","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":2071.1785888671875,"y":320.57142639160156,"z":"c78c4b7.7adc638","wires":[["be4bc685.e500f"]]},{"id":"e61b9900.e00db","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n<parameter name='error-code' value='400' />\n<parameter name='error-message' value='Request Processed Successfully' />","comments":"","x":1581.0359420776367,"y":376.71416425704956,"z":"c78c4b7.7adc638","wires":[]},{"id":"bbe6ec00.5438f8","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":566.03564453125,"y":92.28571319580078,"z":"c78c4b7.7adc638","wires":[["2812784e.6d9f"]]},{"id":"5510e749.6e8828","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='401' />\n<parameter name='error-message' value='Failure Executing getVNF_Hierarchy for Restart' />\n","comments":"","x":935.3214340209961,"y":141.57142579555511,"z":"c78c4b7.7adc638","wires":[]},{"id":"9c4bf697.756408","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":3518.7500076293945,"y":431.5714588165283,"z":"c78c4b7.7adc638","wires":[["2ad56342.527344"]]},{"id":"ab5d7a5c.3e581","type":"execute","name":"execute_update_AA&I","xml":"<execute plugin='org.onap.appc.dg.util.ExecuteNodeAction' method='postResource'>\n<parameter name=\"resourceType\" value=\"vnfc\" />\n<parameter name=\"prefix\" value=\"vnfc\" />\n<parameter name=\"resourceKey\" value='vnfc-name = $VNF.VM[$i].VNFC' />\n<parameter name=\"attributeName\" value=\"orchestration-status\" />\n<parameter name=\"attributeValue\" value=\"Restarted\" />\n","comments":"","outputs":1,"x":4355.46378326416,"y":980.1429214477539,"z":"c78c4b7.7adc638","wires":[["81c62225.e792e8","bbf5360a.5bc72"]]},{"id":"81c62225.e792e8","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":4548.892219543457,"y":1085.2858295440674,"z":"c78c4b7.7adc638","wires":[["4a8daed.def30d"]]},{"id":"aba526e8.36f458","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='401' />\n<parameter name='error-message' value='Failure in executing AAI Update' />\n","comments":"","x":4895.892219543457,"y":1136.2858295440674,"z":"c78c4b7.7adc638","wires":[]},{"id":"bbf5360a.5bc72","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":4548.178039550781,"y":888.0000867843628,"z":"c78c4b7.7adc638","wires":[["e14f710d.b91ca8"]]},{"id":"a2d40fa2.090648","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1882.7500381469727,"y":612.571478843689,"z":"c78c4b7.7adc638","wires":[["5e910b8f.321cb4"]]},{"id":"dd56ae0f.c5ba","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='401' />\n<parameter name='error-message' value='Error Updating AAI for Restart' />","comments":"","x":2206.32137298584,"y":701.4286470413208,"z":"c78c4b7.7adc638","wires":[]},{"id":"68548acd.173d04","type":"execute","name":"execute_Update_AA&I","xml":"<execute plugin='org.onap.appc.dg.util.ExecuteNodeAction' method='postResource'>\n<parameter name=\"resourceType\" value=\"vnfc\" />\n<parameter name=\"prefix\" value=\"vnfc\" />\n<parameter name=\"resourceKey\" value='vnfc-name = $VNF.VM[$i].VNFC' />\n<parameter name=\"attributeName\" value=\"orchestration-status\" />\n<parameter name=\"attributeValue\" value=\"Error\" />\n","comments":"","outputs":1,"x":4881.035980224609,"y":594.7143478393555,"z":"c78c4b7.7adc638","wires":[["90a50ec1.5fc638","3382cc54.8f8ec4"]]},{"id":"90a50ec1.5fc638","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":5152.749912261963,"y":329.00002574920654,"z":"c78c4b7.7adc638","wires":[["9d0e2fd1.9c1f4"]]},{"id":"842b4e6e.1e2b88","type":"comment","name":"update VNFCs to Restarting","info":"","comments":"","x":1888.6074600219727,"y":281.71423721313477,"z":"c78c4b7.7adc638","wires":[]},{"id":"939f4559.9592f8","type":"comment","name":"call south bound to Restart VMs","info":"","comments":"","x":3345.1778717041016,"y":252.4285831451416,"z":"c78c4b7.7adc638","wires":[]},{"id":"c6333415.230b9","type":"comment","name":"if failure from south bound then update as Error","info":"","comments":"","x":4876.321907043457,"y":664.1428642272949,"z":"c78c4b7.7adc638","wires":[]},{"id":"972ff5db.a46f1","type":"comment","name":"Restarted VNFCs in AA&I","info":"","comments":"","x":4386.321113586426,"y":1017.714334487915,"z":"c78c4b7.7adc638","wires":[]},{"id":"d7b30e91.75e808","type":"comment","name":"Fetch all VMs and VNFCs from AA&I for given VNF_ID","info":"","comments":"","x":904.4642944335938,"y":172.85714149475098,"z":"c78c4b7.7adc638","wires":[]},{"id":"3382cc54.8f8ec4","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":5144.607753753662,"y":422.14294624328613,"z":"c78c4b7.7adc638","wires":[["2e3ea305.ff4bcc"]]},{"id":"733fe7fa.0cd4a","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":3483.035758972168,"y":102.85716247558594,"z":"c78c4b7.7adc638","wires":[["dfc7121e.032c28"]]},{"id":"f62397a3.6d3b68","type":"switchNode","name":"switch","xml":"<switch test='`$VNF.VMCount`'>\n","comments":"","outputs":1,"x":1011.607421875,"y":312.28571701049805,"z":"c78c4b7.7adc638","wires":[["863f594c.cb09c8","c9ef2a5a.b038c8"]]},{"id":"863f594c.cb09c8","type":"other","name":"outcome_0","xml":"<outcome value='0'>\n","comments":"","outputs":1,"x":1280.0358276367188,"y":92.42858505249023,"z":"c78c4b7.7adc638","wires":[["820fea44.414b08"]]},{"id":"c9ef2a5a.b038c8","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1228.8930282592773,"y":308.1428813934326,"z":"c78c4b7.7adc638","wires":[["d5460718.47f668"]]},{"id":"2ad56342.527344","type":"switchNode","name":"switch","xml":"<switch test='`$RESTART_STATUS`'>\n","comments":"","outputs":1,"x":3700.7500076293945,"y":430.5714588165283,"z":"c78c4b7.7adc638","wires":[["3dec0816.214ee8","f8697aba.3918c","c3be56a.b4937a8"]]},{"id":"c3be56a.b4937a8","type":"success","name":"outcome_SUCCESS","xml":"<outcome value='SUCCESS'>\n","comments":"","outputs":1,"x":3988.1785583496094,"y":767.0000228881836,"z":"c78c4b7.7adc638","wires":[["5736a106.f1fa9"]]},{"id":"3dec0816.214ee8","type":"other","name":"outcome_CONTEXT_NOT_FOUND","xml":"<outcome value='CONTEXT_NOT_FOUND'>\n","comments":"","outputs":1,"x":4003.607635498047,"y":626.4286317825317,"z":"c78c4b7.7adc638","wires":[["52b45889.17d01"]]},{"id":"f8697aba.3918c","type":"other","name":"outcome_ERROR","xml":"<outcome value='ERROR'>\n","comments":"","outputs":1,"x":3900.7498474121094,"y":384.0000534057617,"z":"c78c4b7.7adc638","wires":[["69297849.639b5"]]},{"id":"b6417ff9.bc58e8","type":"execute","name":"execute_Restart","xml":"<execute plugin='org.onap.appc.adapter.iaas.ProviderAdapter' method='restartServer'>\n<parameter name=\"org.onap.appc.provider.name\" value=\"OpenStack\"/>\n<parameter name=\"org.onap.appc.instance.url\" value=\"`$VNF.VM[$i].URL`\" />\n<parameter name=\"org.onap.appc.identity.url\" value=\"`$AICIdentity`\" />\n\n","comments":"","outputs":1,"x":3343.0358657836914,"y":319.8571901321411,"z":"c78c4b7.7adc638","wires":[["9c4bf697.756408","733fe7fa.0cd4a"]]},{"id":"5133513c.856678","type":"switchNode","name":"switch","xml":"<switch test='`$getVnfHierarchy_result`'>\n","comments":"","outputs":1,"x":719.3214340209961,"y":312.8572082519531,"z":"c78c4b7.7adc638","wires":[["72b6ce18.26c098","9bead82f.cd767"]]},{"id":"9bead82f.cd767","type":"outcome","name":"FAILURE","xml":"<outcome value='FAILURE'>\n","comments":"","outputs":1,"x":867.5358428955078,"y":583.5714192390442,"z":"c78c4b7.7adc638","wires":[["542f0923.e53be8"]]},{"id":"f514a265.f82058","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='401' />\n<parameter name='error-message' value='Failure Getting VNF Hierarchy for Restart VNF' />\n","comments":"","x":1348.1071891784668,"y":660.285737991333,"z":"c78c4b7.7adc638","wires":[]},{"id":"72b6ce18.26c098","type":"outcome","name":"SUCCESS","xml":"<outcome value='SUCCESS'>\n","comments":"","outputs":1,"x":871.7499771118164,"y":313.1429080963135,"z":"c78c4b7.7adc638","wires":[["f62397a3.6d3b68"]]},{"id":"bf58666b.5d2968","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='401' />\n<parameter name='error-message' value='No VMs found for Restart VNF' />","comments":"","x":1634.3217468261719,"y":146.8571014404297,"z":"c78c4b7.7adc638","wires":[]},{"id":"be4bc685.e500f","type":"switchNode","name":"switch","xml":"<switch test='`$postResource_result`'>\n","comments":"","outputs":1,"x":2406.1786003112793,"y":313.4285650253296,"z":"c78c4b7.7adc638","wires":[["48805c31.df9c94","c4d38aa0.b4e8f","7ec494b3.dd525c"]]},{"id":"48805c31.df9c94","type":"outcome","name":"SUCCESS","xml":"<outcome value='SUCCESS'>\n","comments":"","outputs":1,"x":3131.7501907348633,"y":324.7142677307129,"z":"c78c4b7.7adc638","wires":[["b6417ff9.bc58e8"]]},{"id":"c4d38aa0.b4e8f","type":"outcome","name":"NOT_FOUND","xml":"<outcome value='NOT_FOUND'>\n","comments":"","outputs":1,"x":2510.8929176330566,"y":96.4286117553711,"z":"c78c4b7.7adc638","wires":[["563a7593.eb4274"]]},{"id":"d27091ce.97eff8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='401' />\n<parameter name='error-message' value='Unable to send Post Request to update AAI' />","comments":"","x":2901.892868041992,"y":188.4285430908203,"z":"c78c4b7.7adc638","wires":[]},{"id":"7ec494b3.dd525c","type":"outcome","name":"FAILURE","xml":"<outcome value='FAILURE'>\n","comments":"","outputs":1,"x":2523.4642753601074,"y":604.857063293457,"z":"c78c4b7.7adc638","wires":[["c35c1366.818ab8"]]},{"id":"c4e150c6.fcb6e","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='401' />\n<parameter name='error-message' value='Post Failure Executing Update AAI for Restart' />","comments":"","x":2843.3210678100586,"y":700.2857112884521,"z":"c78c4b7.7adc638","wires":[]},{"id":"e14f710d.b91ca8","type":"switchNode","name":"switch","xml":"<switch test='`$postResource_result`'>\n","comments":"","outputs":1,"x":4710.892288208008,"y":888.428671836853,"z":"c78c4b7.7adc638","wires":[["b8831eff.8281c","6315cee2.ae8958","2807abc1.9b6e14"]]},{"id":"b8831eff.8281c","type":"outcome","name":"SUCCESS","xml":"<outcome value='SUCCESS'>\n","comments":"","outputs":1,"x":4896.606781005859,"y":887.1429166793823,"z":"c78c4b7.7adc638","wires":[[]]},{"id":"6315cee2.ae8958","type":"outcome","name":"NOT_FOUND","xml":"<outcome value='NOT_FOUND'>\n","comments":"","outputs":1,"x":4901.606986999512,"y":819.2857484817505,"z":"c78c4b7.7adc638","wires":[["7eece4ab.7ff8fc"]]},{"id":"2807abc1.9b6e14","type":"outcome","name":"FAILURE","xml":"<outcome value='FAILURE'>\n","comments":"","outputs":1,"x":4884.606498718262,"y":953.142897605896,"z":"c78c4b7.7adc638","wires":[["27931143.bd9bf6"]]},{"id":"759fc367.db7e2c","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='401' />\n<parameter name='error-message' value='Failure in executing AAI Update-Not Found' />","comments":"","x":5265.035415649414,"y":881.8571405410767,"z":"c78c4b7.7adc638","wires":[]},{"id":"6c01944a.700a04","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='401' />\n<parameter name='error-message' value='Failure in executing AAI Update' />","comments":"","x":5292.464195251465,"y":1003.4285669326782,"z":"c78c4b7.7adc638","wires":[]},{"id":"9d0e2fd1.9c1f4","type":"switchNode","name":"switch","xml":"<switch test='`$postResource_result`'>\n","comments":"","outputs":1,"x":5279.179107666016,"y":322.8571615219116,"z":"c78c4b7.7adc638","wires":[["4b5074bb.24e7d4","26b9401d.a918d","5d819842.9acbd8"]]},{"id":"4b5074bb.24e7d4","type":"outcome","name":"SUCCESS","xml":"<outcome value='SUCCESS'>\n","comments":"","outputs":1,"x":5526.892833709717,"y":269.0000228881836,"z":"c78c4b7.7adc638","wires":[["91fb6ccc.f4eef8"]]},{"id":"91fb6ccc.f4eef8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='401' />\n<parameter name='error-message' value='Restart Failure' />\n","comments":"","x":5778.750324249268,"y":268.00002098083496,"z":"c78c4b7.7adc638","wires":[]},{"id":"26b9401d.a918d","type":"outcome","name":"NOT_FOUND","xml":"<outcome value='NOT_FOUND'>\n","comments":"","outputs":1,"x":5528.893047332764,"y":323.85716438293457,"z":"c78c4b7.7adc638","wires":[["76b4c65c.5494e8"]]},{"id":"5d819842.9acbd8","type":"outcome","name":"FAILURE","xml":"<outcome value='FAILURE'>\n","comments":"","outputs":1,"x":5521.750049591064,"y":389.42859840393066,"z":"c78c4b7.7adc638","wires":[["44730574.2bfc04"]]},{"id":"2812784e.6d9f","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":730.0356864929199,"y":91.99999713897705,"z":"c78c4b7.7adc638","wires":[["29ec2441.2ed354","5510e749.6e8828"]]},{"id":"29ec2441.2ed354","type":"execute","name":"execute","xml":"<execute plugin='org.onap.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"apiVer\" value=\"1.01\"/>\n<parameter name=\"eventId\" value=\"`$input.action-identifiers.vnf-id`\" />\n<parameter name=\"output.status.message\" value=\"Exception in getting VNF Hierachy\" />\n\n","comments":"","outputs":1,"x":935.1785926818848,"y":90.85714149475098,"z":"c78c4b7.7adc638","wires":[["5c59289d.8de6f8"]]},{"id":"5c59289d.8de6f8","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1081.8928756713867,"y":87.14285659790039,"z":"c78c4b7.7adc638","wires":[[]]},{"id":"542f0923.e53be8","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1136.773910522461,"y":585.7620143890381,"z":"c78c4b7.7adc638","wires":[["f514a265.f82058","887f7ca9.35a54"]]},{"id":"887f7ca9.35a54","type":"execute","name":"execute","xml":"<execute plugin='org.onap.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"apiVer\" value=\"1.01\"/>\n<parameter name=\"eventId\" value=\"`$input.action-identifiers.vnf-id`\" />\n<parameter name=\"output.status.message\" value=\"Failure in getting VNF Hierachy\" />","comments":"","outputs":1,"x":1329.678638458252,"y":585.1429443359375,"z":"c78c4b7.7adc638","wires":[["a197a7a4.cb6e18"]]},{"id":"a197a7a4.cb6e18","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1510.9644165039062,"y":584.5715417861938,"z":"c78c4b7.7adc638","wires":[[]]},{"id":"820fea44.414b08","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1460.321662902832,"y":93.85717391967773,"z":"c78c4b7.7adc638","wires":[["bf58666b.5d2968","d30d206.ec69d6"]]},{"id":"d30d206.ec69d6","type":"execute","name":"execute","xml":"<execute plugin='org.onap.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"apiVer\" value=\"1.01\"/>\n<parameter name=\"eventId\" value=\"`$input.action-identifiers.vnf-id`\" />\n<parameter name=\"output.status.message\" value=\"VM Count is 0\" />\n","comments":"","outputs":1,"x":1643.7503547668457,"y":90.8571424484253,"z":"c78c4b7.7adc638","wires":[["6c930a9e.2240e4"]]},{"id":"6c930a9e.2240e4","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1817.6074447631836,"y":92.57139015197754,"z":"c78c4b7.7adc638","wires":[[]]},{"id":"5e910b8f.321cb4","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2030.321434020996,"y":611.1428813934326,"z":"c78c4b7.7adc638","wires":[["67794257.4253f4","dd56ae0f.c5ba"]]},{"id":"67794257.4253f4","type":"execute","name":"execute","xml":"<execute plugin='org.onap.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"apiVer\" value=\"1.01\"/>\n<parameter name=\"eventId\" value=\"`$input.action-identifiers.vnf-id`\" />\n<parameter name=\"output.status.message\" value=\"`'Failure in updating AAI for' + $VNF.VM[$i].VNFC`\" />\n","comments":"","outputs":1,"x":2201.750244140625,"y":608.0000610351562,"z":"c78c4b7.7adc638","wires":[["d5a2eec0.c02f4"]]},{"id":"d5a2eec0.c02f4","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":2335.03564453125,"y":607.857177734375,"z":"c78c4b7.7adc638","wires":[[]]},{"id":"c35c1366.818ab8","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2688.0354232788086,"y":602.2856788635254,"z":"c78c4b7.7adc638","wires":[["8d88d68d.178098","c4e150c6.fcb6e"]]},{"id":"8d88d68d.178098","type":"execute","name":"execute","xml":"<execute plugin='org.onap.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"apiVer\" value=\"1.01\"/>\n<parameter name=\"eventId\" value=\"`$input.action-identifiers.vnf-id`\" />\n<parameter name=\"output.status.message\" value=\"`'Exception in AAI Update for vnfc ' + $VNF.VM[$i].VNFC`\" />\n\n","comments":"","outputs":1,"x":2845.03564453125,"y":603.142822265625,"z":"c78c4b7.7adc638","wires":[["191c4bc9.ddbc74"]]},{"id":"191c4bc9.ddbc74","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":2972.178066253662,"y":602.8570718765259,"z":"c78c4b7.7adc638","wires":[[]]},{"id":"563a7593.eb4274","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2699.464412689209,"y":92.42860984802246,"z":"c78c4b7.7adc638","wires":[["2e8a3fbc.e890c8","d27091ce.97eff8"]]},{"id":"2e8a3fbc.e890c8","type":"execute","name":"execute","xml":"<execute plugin='org.onap.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"apiVer\" value=\"1.01\"/>\n<parameter name=\"eventId\" value=\"`$input.action-identifiers.vnf-id`\" />\n<parameter name=\"output.status.message\" value=\"`'VNFC not found in AAI : ' + $VNF.VM[$i].VNFC`\" />\n","comments":"","outputs":1,"x":2899.1787300109863,"y":91.85716533660889,"z":"c78c4b7.7adc638","wires":[["ef0eaa38.35d1b8"]]},{"id":"ef0eaa38.35d1b8","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":3058.6072311401367,"y":91.00004768371582,"z":"c78c4b7.7adc638","wires":[[]]},{"id":"dfc7121e.032c28","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":4711.606857299805,"y":104.57143783569336,"z":"c78c4b7.7adc638","wires":[["11853f36.20c181","68548acd.173d04"]]},{"id":"11853f36.20c181","type":"execute","name":"Report_Failure_in_Restart","xml":"<execute plugin='org.onap.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"apiVer\" value=\"1.01\"/>\n<parameter name=\"eventId\" value=\"`$input.action-identifiers.vnf-id`\" />\n<parameter name=\"output.status.message\" value=\"`'Failure in restart for:' + $VNF.VM[$i].URL`\" />","comments":"","outputs":1,"x":4931.178768157959,"y":131.285737991333,"z":"c78c4b7.7adc638","wires":[["fdc72ce2.9ea988"]]},{"id":"fdc72ce2.9ea988","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":5115.178413391113,"y":133.2857437133789,"z":"c78c4b7.7adc638","wires":[[]]},{"id":"52b45889.17d01","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":4286.178771972656,"y":620.5714626312256,"z":"c78c4b7.7adc638","wires":[["68548acd.173d04","c3a57cd6.f21208"]]},{"id":"c3a57cd6.f21208","type":"execute","name":"Report_Context_not_found","xml":"<execute plugin='org.onap.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"apiVer\" value=\"1.01\"/>\n<parameter name=\"eventId\" value=\"`$input.action-identifiers.vnf-id`\" />\n<parameter name=\"output.status.message\" value=\"`'Stop : Context not found:' + $VNF.VM[$i].URL`\" />","comments":"","outputs":1,"x":4495.321556091309,"y":365.571475982666,"z":"c78c4b7.7adc638","wires":[["b2825586.5f88a"]]},{"id":"b2825586.5f88a","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":4863.180023193359,"y":376.1428756713867,"z":"c78c4b7.7adc638","wires":[[]]},{"id":"69297849.639b5","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":4118.179046630859,"y":360.0000228881836,"z":"c78c4b7.7adc638","wires":[["68548acd.173d04","fb63e7f6.56328"]]},{"id":"fb63e7f6.56328","type":"execute","name":"Report_Error_occoured_while_restarting_the_server","xml":"<execute plugin='org.onap.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"apiVer\" value=\"1.01\"/>\n<parameter name=\"eventId\" value=\"`$input.action-identifiers.vnf-id`\" />\n<parameter name=\"output.status.message\" value=\"`'Stop : Error occoured while restarting the server:' + $VNF.VM[$i].URL`\" />","comments":"","outputs":1,"x":4313.607406616211,"y":220.85715770721436,"z":"c78c4b7.7adc638","wires":[["73e3e5cd.5347a4"]]},{"id":"73e3e5cd.5347a4","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":4656.179046630859,"y":197.99999237060547,"z":"c78c4b7.7adc638","wires":[[]]},{"id":"7eece4ab.7ff8fc","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":5098.607124328613,"y":817.7143201828003,"z":"c78c4b7.7adc638","wires":[["3e396754.cadd8","759fc367.db7e2c"]]},{"id":"27931143.bd9bf6","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":5095.463916778564,"y":949.8571300506592,"z":"c78c4b7.7adc638","wires":[["d2a97794.1b43b","6c01944a.700a04"]]},{"id":"4a8daed.def30d","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":4685.892219543457,"y":1081.2858295440674,"z":"c78c4b7.7adc638","wires":[["86b1c274.45e328","aba526e8.36f458"]]},{"id":"3e396754.cadd8","type":"execute","name":"execute","xml":"<execute plugin='org.onap.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"apiVer\" value=\"1.01\"/>\n<parameter name=\"eventId\" value=\"`$input.action-identifiers.vnf-id`\" />\n<parameter name=\"output.status.message\" value=\"`'VNFC not found in AAI : ' + $VNF.VM[$i].VNFC`\" />","comments":"","outputs":1,"x":5262.892913818359,"y":816.5714340209961,"z":"c78c4b7.7adc638","wires":[["4778c346.14f30c"]]},{"id":"d2a97794.1b43b","type":"execute","name":"execute","xml":"<execute plugin='org.onap.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"apiVer\" value=\"1.01\"/>\n<parameter name=\"eventId\" value=\"`$input.action-identifiers.vnf-id`\" />\n<parameter name=\"output.status.message\" value=\"`'Exception in AAI Update for vnfc' + $VNF.VM[$i].VNFC`\" />","comments":"","outputs":1,"x":5278.749771118164,"y":948.5713906288147,"z":"c78c4b7.7adc638","wires":[["29a82f21.5b0f2"]]},{"id":"4778c346.14f30c","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":5435.892486572266,"y":821.2857761383057,"z":"c78c4b7.7adc638","wires":[[]]},{"id":"29a82f21.5b0f2","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":5446.035621643066,"y":946.857105255127,"z":"c78c4b7.7adc638","wires":[[]]},{"id":"86b1c274.45e328","type":"execute","name":"execute","xml":"<execute plugin='org.onap.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"apiVer\" value=\"1.01\"/>\n<parameter name=\"eventId\" value=\"`$input.action-identifiers.vnf-id`\" />\n<parameter name=\"output.status.message\" value=\"`'Failure in updating AAI for' + $VNF.VM[$i].VNFC`\" />","comments":"","outputs":1,"x":4888.178146362305,"y":1077.1429538726807,"z":"c78c4b7.7adc638","wires":[["ca092d63.dce3c"]]},{"id":"ca092d63.dce3c","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":5045.749572753906,"y":1071.1429538726807,"z":"c78c4b7.7adc638","wires":[[]]},{"id":"8e902dec.138668","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='401' />\n<parameter name='error-message' value='Failure in executing AAI update-Restart Failure' />","comments":"","x":5440.749938964844,"y":689.9999990463257,"z":"c78c4b7.7adc638","wires":[]},{"id":"2e3ea305.ff4bcc","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":5264.75,"y":599.7142333984375,"z":"c78c4b7.7adc638","wires":[["87148039.f379c8","8e902dec.138668"]]},{"id":"87148039.f379c8","type":"execute","name":"execute","xml":"<execute plugin='org.onap.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"apiVer\" value=\"1.01\"/>\n<parameter name=\"eventId\" value=\"`$input.action-identifiers.vnf-id`\" />\n<parameter name=\"output.status.message\" value=\"`'Failure in updating AAI for' + $VNF.VM[$i].VNFC`\" />\n","comments":"","outputs":1,"x":5436.178810119629,"y":596.571403503418,"z":"c78c4b7.7adc638","wires":[["e405c242.de001"]]},{"id":"e405c242.de001","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":5569.464210510254,"y":596.4285297393799,"z":"c78c4b7.7adc638","wires":[[]]},{"id":"796af8b9.6f0df","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='401' />\n<parameter name='error-message' value='Not Found - Failure in executing AAI Update' />","comments":"","x":6149.75,"y":408,"z":"c78c4b7.7adc638","wires":[]},{"id":"76b4c65c.5494e8","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":5942.32177734375,"y":328.00006103515625,"z":"c78c4b7.7adc638","wires":[["976e1ffd.3c5ac","796af8b9.6f0df"]]},{"id":"976e1ffd.3c5ac","type":"execute","name":"execute","xml":"<execute plugin='org.onap.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"apiVer\" value=\"1.01\"/>\n<parameter name=\"eventId\" value=\"`$input.action-identifiers.vnf-id`\" />\n<parameter name=\"output.status.message\" value=\"`'VNFC not found in AAI : ' + $VNF.VM[$i].VNFC`\" />\n","comments":"","outputs":1,"x":6147.035861968994,"y":311.4286222457886,"z":"c78c4b7.7adc638","wires":[["53aeb441.936564"]]},{"id":"53aeb441.936564","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":6306.4643630981445,"y":310.5715045928955,"z":"c78c4b7.7adc638","wires":[[]]},{"id":"bb205133.796038","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='401' />\n<parameter name='error-message' value='Not Found - Failure in executing AAI Update-Restart Failure' />","comments":"","x":5882.75,"y":582,"z":"c78c4b7.7adc638","wires":[]},{"id":"44730574.2bfc04","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":5727.46435546875,"y":483.99996757507324,"z":"c78c4b7.7adc638","wires":[["e06ab492.36011","bb205133.796038"]]},{"id":"e06ab492.36011","type":"execute","name":"execute","xml":"<execute plugin='org.onap.appc.dg.common.DCAEReporterPlugin' method='report' >\n<parameter name=\"apiVer\" value=\"1.01\"/>\n<parameter name=\"eventId\" value=\"`$input.action-identifiers.vnf-id`\" />\n<parameter name=\"output.status.message\" value='Exception in AAI Update for vnfc $VNF.VM[$i].VNFC' />\n","comments":"","outputs":1,"x":5884.464576721191,"y":484.85711097717285,"z":"c78c4b7.7adc638","wires":[["d1e85fde.16424"]]},{"id":"d1e85fde.16424","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":6011.6069984436035,"y":484.57136058807373,"z":"c78c4b7.7adc638","wires":[[]]},{"id":"5736a106.f1fa9","type":"execute","name":"Report_Success_in_Restart","xml":"<execute plugin='org.onap.appc.dg.common.DCAEReporterPlugin' method='reportSuccess' >\n<parameter name=\"eventId\" value=\"`$input.action-identifiers.vnf-id`\" />\n<parameter name=\"output.status.message\" value=\"`'Restart event executed successfully for ' + $VNF.VM[$i].URL`\" />\n","comments":"","outputs":1,"x":3846.0833435058594,"y":974.6667098999023,"z":"c78c4b7.7adc638","wires":[["9238bd39.7f0f08","b06b539b.237a6"]]},{"id":"9238bd39.7f0f08","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":4072.083333333334,"y":1016.6666641235352,"z":"c78c4b7.7adc638","wires":[["ab5d7a5c.3e581"]]},{"id":"b06b539b.237a6","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":4106.083333333334,"y":908.6666641235352,"z":"c78c4b7.7adc638","wires":[[]]},{"id":"436e1771.f30bb","type":"switchNode","name":"switch action-level","xml":"<switch test='`$action-level`'>\n","comments":"","outputs":1,"x":158.5,"y":255.75,"z":"c78c4b7.7adc638","wires":[["c3eb7ee2.6bc838","4b42a252.ce9b7c","2b0668a9.f98a5"]]},{"id":"c3eb7ee2.6bc838","type":"outcome","name":"vnf","xml":"<outcome value='vnf'>\n","comments":"","outputs":1,"x":377.5,"y":190.75,"z":"c78c4b7.7adc638","wires":[["bcbc30ba.d66ea8"]]},{"id":"4b42a252.ce9b7c","type":"outcome","name":"vm","xml":"<outcome value='vm'>\n","comments":"","outputs":1,"x":299.5,"y":916.75,"z":"c78c4b7.7adc638","wires":[["fcce9aee.30317"]]},{"id":"fcce9aee.30317","type":"call","name":"call RestartVMCommonFlow","xml":"<call module='APPC' rpc='RestartVMCommonFlow' mode='sync' >\n","comments":"","outputs":1,"x":524.5,"y":913.75,"z":"c78c4b7.7adc638","wires":[["7d578194.240498","f8a137de.0c9738","3a144b5c.7e90fc"]]},{"id":"7d578194.240498","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":749.5,"y":839.75,"z":"c78c4b7.7adc638","wires":[["a2b0ff50.40a9e"]]},{"id":"f8a137de.0c9738","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":750,"y":907.75,"z":"c78c4b7.7adc638","wires":[["a2b0ff50.40a9e"]]},{"id":"a2b0ff50.40a9e","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">\n\n","atomic":"true","comments":"","outputs":1,"x":957.75,"y":875.25,"z":"c78c4b7.7adc638","wires":[["4c06f4b2.5bf40c"]]},{"id":"57559431.e251f4","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","comments":"","outputs":1,"x":925.5,"y":953.75,"z":"c78c4b7.7adc638","wires":[["b886d3f6.91d68"]]},{"id":"3a144b5c.7e90fc","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":747.7499942779541,"y":960.7499914169312,"z":"c78c4b7.7adc638","wires":[["57559431.e251f4"]]},{"id":"b886d3f6.91d68","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n<parameter name='error-code' value='400' />\n<parameter name='error-message' value='Request Processed Successfully' />","comments":"","x":1107.5,"y":951.75,"z":"c78c4b7.7adc638","wires":[]},{"id":"4c06f4b2.5bf40c","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='401' />\n<parameter name='error-message' value='`$error-message`' />\n","comments":"","x":1127.5,"y":872.75,"z":"c78c4b7.7adc638","wires":[]},{"id":"8e978100.d3a1c8","type":"comment","name":"Check action-level, call VM restart if action level is VM","info":"","comments":"","x":246.25,"y":320.75,"z":"c78c4b7.7adc638","wires":[]},{"id":"d78e2f94.fc3e3","type":"comment","name":"Call DG for VM level Restart - parameters are in context","info":"","comments":"","x":456.5,"y":824.75,"z":"c78c4b7.7adc638","wires":[]},{"id":"2b0668a9.f98a5","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":279.75,"y":1012.75,"z":"c78c4b7.7adc638","wires":[["3188358.10d61ca"]]},{"id":"3188358.10d61ca","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">\n\n","atomic":"true","comments":"","outputs":1,"x":442.75,"y":1007.75,"z":"c78c4b7.7adc638","wires":[["8c09b4ed.560f08"]]},{"id":"8c09b4ed.560f08","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='401' />\n<parameter name='error-message' value='Invalid action-level found' />\n","comments":"","x":659.5,"y":1007.25,"z":"c78c4b7.7adc638","wires":[]}]
