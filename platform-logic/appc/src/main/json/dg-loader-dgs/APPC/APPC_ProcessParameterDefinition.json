[{"id":"2158a194.1f194e","type":"dgstart","name":"DGSTART","outputs":1,"x":210,"y":82,"z":"1d62f09b.653dff","wires":[["d50915e2.c462a8"]]},{"id":"d50915e2.c462a8","type":"service-logic","name":"APPC 4.0.0","module":"APPC","version":"4.0.0","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='APPC' version='4.0.0'>","outputs":1,"x":362,"y":85,"z":"1d62f09b.653dff","wires":[["69400c59.f5b5b4"]]},{"id":"69400c59.f5b5b4","type":"method","name":"method ProcessParametersDefinition","xml":"<method rpc='ProcessParameterDefinition' mode='sync'>\n","comments":"","outputs":1,"x":617,"y":84,"z":"1d62f09b.653dff","wires":[["e4aa58e0.4cf328"]]},{"id":"e4aa58e0.4cf328","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":238,"y":144,"z":"1d62f09b.653dff","wires":[["666a8fd4.8ffd8"]]},{"id":"666a8fd4.8ffd8","type":"execute","name":"execute getTemplate Parameter_definition","xml":"<execute plugin=\"org.onap.appc.data.services.node.ConfigResourceNode\" method=\"getTemplate\">\n<parameter name=\"fileCategory\" value=\"parameter_definitions\" />\n<parameter name=\"responsePrefix\" value=\"parameter-definitions\" />","comments":"","outputs":1,"x":553,"y":142,"z":"1d62f09b.653dff","wires":[["a5091352.53d75","98e0dc66.4938a","8c1764db.08e568"]]},{"id":"a5091352.53d75","type":"failure","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":872,"y":135,"z":"1d62f09b.653dff","wires":[["fc420e10.a4535"]]},{"id":"8c1764db.08e568","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":864,"y":174,"z":"1d62f09b.653dff","wires":[["3372dc74.357bb4"]]},{"id":"fc420e10.a4535","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1024,"y":131,"z":"1d62f09b.653dff","wires":[["351359fa.9d4f26"]]},{"id":"3372dc74.357bb4","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1018,"y":181,"z":"1d62f09b.653dff","wires":[["811b2688.0dcd18"]]},{"id":"351359fa.9d4f26","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n<parameter name=\"error-code\" value=\"401\"/>\n\t<parameter name=\"error-message\" value=\"Unable to get parameter definitions\"/>\n\t\n\t\n\t","comments":"","x":1194,"y":133,"z":"1d62f09b.653dff","wires":[]},{"id":"3f6dcf76.40da4","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n<parameter name=\"error-code\" value=\"401\"/>\n\t<parameter name=\"error-message\" value=\"`$parameter-definitions.error-message`\"/>\n\t\n\t\n\t","comments":"","x":1182,"y":231,"z":"1d62f09b.653dff","wires":[]},{"id":"86037f00.c7dc5","type":"execute","name":"execute Get Instar Params","xml":"<execute plugin=\"org.onap.sdnc.config.params.parser.PropertyDefinitionNode\" method=\"processExternalSystemParamKeys\">\n<parameter name=\"systemName\" value=\"INSTAR\" />\n<parameter name=\"pdContent\" value=\"`$parameter-definitions.file-content`\" />\n<parameter name=\"jsonData\" value=\"`$configuration-params`\" />\n<parameter name=\"responsePrefix\" value=\"tmp.instarParams\" />","comments":"","outputs":1,"x":298,"y":289,"z":"1d62f09b.653dff","wires":[["6d835a53.6595c4","66d08efa.e628b"]]},{"id":"6d835a53.6595c4","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":552,"y":271,"z":"1d62f09b.653dff","wires":[["e032c80c.ba08a8"]]},{"id":"66d08efa.e628b","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":540,"y":334,"z":"1d62f09b.653dff","wires":[["e88e851b.315d38"]]},{"id":"e032c80c.ba08a8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":715,"y":273,"z":"1d62f09b.653dff","wires":[["70028148.74044"]]},{"id":"e88e851b.315d38","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":688,"y":332,"z":"1d62f09b.653dff","wires":[["52ccb0b.e0de95"]]},{"id":"70028148.74044","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n<parameter name=\"error-code\" value=\"401\"/>\n\t<parameter name=\"error-message\" value=\"Unable to get Instar parameter definitions\"/>\n\t\n\t\n\t","comments":"","x":893,"y":270,"z":"1d62f09b.653dff","wires":[]},{"id":"52ccb0b.e0de95","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n<parameter name=\"error-code\" value=\"401\"/>\n\t<parameter name=\"error-message\" value=\"`$tmp.instarParams.error-message`\"/>\n\t\n\t\n\t","comments":"","x":861,"y":331,"z":"1d62f09b.653dff","wires":[]},{"id":"33e8a0b7.d58be","type":"execute","name":"execute getTemplate Parameter_yang","xml":"<execute plugin=\"org.onap.appc.data.services.node.ConfigResourceNode\" method=\"getTemplate\">\n<parameter name=\"fileCategory\" value=\"parameter_yang\" />\n<parameter name=\"responsePrefix\" value=\"parameter-yang\" />","comments":"","outputs":1,"x":326,"y":738,"z":"1d62f09b.653dff","wires":[["5411882c.030498","b0439127.fa374","39fe603c.f8171"]]},{"id":"5411882c.030498","type":"failure","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":582.5,"y":708,"z":"1d62f09b.653dff","wires":[["15ab6272.d3333e"]]},{"id":"b0439127.fa374","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":575.5,"y":766,"z":"1d62f09b.653dff","wires":[["6ed77220.53ab6c"]]},{"id":"15ab6272.d3333e","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":728.5,"y":707,"z":"1d62f09b.653dff","wires":[["5abbbddd.2fdd84","7f07065c.21aa58","dc62f036.1a331"]]},{"id":"6ed77220.53ab6c","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":719.5,"y":768,"z":"1d62f09b.653dff","wires":[["8e93eb26.7e0988","7f07065c.21aa58","dc62f036.1a331"]]},{"id":"6a3156b.ee952a8","type":"comment","name":"INSTAR keys","info":"Result: [INSTAR.LOCAL_CORE_ALT_IP_ADDR.request-logic, INSTAR.LOCAL_CORE_ALT_IP_ADDR_MOD.request-logic, test.status, INSTAR.LOCAL_CORE_ALT_IP_ADDR_MOD.response-logic, INSTAR.LOCAL_CORE_ALT_IP_ADDR.response-logic, INSTAR.keys]\nINSTAR.keys : [\"LOCAL_CORE_ALT_IP_ADDR\",\"LOCAL_CORE_ALT_IP_ADDR_MOD\"]\nINSTAR.LOCAL_CORE_ALT_IP_ADDR.request-logic : null\nINSTAR.LOCAL_CORE_ALT_IP_ADDR.response-logic : null","comments":"","x":1465.5,"y":432,"z":"1d62f09b.653dff","wires":[]},{"id":"e5e7d1ac.76bb7","type":"execute","name":"execute Get Instar Data","xml":"<execute plugin=\"org.onap.appc.instar.node.InstarClientNode\" method=\"getInstarInfo\">\n<parameter name=\"instarKeys\" value=\"`$INSTAR.keys`\" />\n<parameter name=\"responsePrefix\" value=\"tmp.instarValues\" />\n","comments":"","outputs":1,"x":881.5,"y":491,"z":"1d62f09b.653dff","wires":[["93afed75.efdb3"]]},{"id":"93afed75.efdb3","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1138.5,"y":489,"z":"1d62f09b.653dff","wires":[["70f1ba7e.3d82f4"]]},{"id":"70f1ba7e.3d82f4","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1298.5,"y":491,"z":"1d62f09b.653dff","wires":[["2b90ad9a.211d22"]]},{"id":"2b90ad9a.211d22","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n<parameter name=\"error-code\" value=\"401\"/>\n\t<parameter name=\"error-message\" value=\"`$tmp.instarValues.error-message`\"/>\n\t\n\t\n\t","comments":"","x":1467.5,"y":488,"z":"1d62f09b.653dff","wires":[]},{"id":"ca662853.446ed8","type":"execute","name":"execute read PD file","xml":"<execute plugin=\"org.onap.sdnc.config.generator.reader.ReaderNode\" method=\"getFileData\">\n<parameter name=\"fileName\" value=\"/opt/app/bvc/templates/pd.yaml\" />\n<parameter name=\"responsePrefix\" value=\"tmpFileData\" />","comments":"","outputs":1,"x":1477.5,"y":96,"z":"1d62f09b.653dff","wires":[[]]},{"id":"e6b2c683.cca4e8","type":"execute","name":"execute Get Complete Set of Params","xml":"<execute plugin=\"org.onap.sdnc.config.params.parser.PropertyDefinitionNode\" method=\"mergeJsonData\">\n<parameter name=\"jsonData\" value=\"`$configuration-params`\" />\n<parameter name=\"mergeJsonData\" value=\"`$tmp.instarValues.INSTAR-KEY-VALUES`\" />\n<parameter name=\"responsePrefix\" value=\"tmp.allParams\" />","comments":"","outputs":1,"x":895.5,"y":566,"z":"1d62f09b.653dff","wires":[["e087477f.d4f878"]]},{"id":"e087477f.d4f878","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1153,"y":569,"z":"1d62f09b.653dff","wires":[["20063435.aecd9c"]]},{"id":"20063435.aecd9c","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1305,"y":566,"z":"1d62f09b.653dff","wires":[["5761a3cf.c4dc4c"]]},{"id":"5761a3cf.c4dc4c","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n<parameter name=\"error-code\" value=\"401\"/>\n\t<parameter name=\"error-message\" value=\"`$tmp.allParams.error-message`\"/>\n\t\n\t\n\t","comments":"","x":1456,"y":571,"z":"1d62f09b.653dff","wires":[]},{"id":"4577a98f.9f9c28","type":"set","name":"set","xml":"<set>\n<parameter name='parameter-definitions.file-content' value='`$tmpFileData.fileData`' />\n","comments":"","x":1457.5,"y":169,"z":"1d62f09b.653dff","wires":[]},{"id":"7d1276d9.b854e8","type":"record","name":"record","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"info\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"`$INSTAR.keys`\" />\n","comments":"","outputs":1,"x":820,"y":443,"z":"1d62f09b.653dff","wires":[[]]},{"id":"a56b5f50.f6b18","type":"switchNode","name":"switch Instar Keys exists","xml":"<switch test='`$INSTAR.keys`'>\n","comments":"","outputs":1,"x":262,"y":438,"z":"1d62f09b.653dff","wires":[["35618876.01a2a8","bb3b56aa.fca5a8","285829ff.5ef416"]]},{"id":"35618876.01a2a8","type":"success","name":"outcome: null","xml":"<outcome value=''>","comments":"","outputs":1,"x":481,"y":441,"z":"1d62f09b.653dff","wires":[["bb0994f5.44ccc8"]]},{"id":"bb0994f5.44ccc8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":662,"y":442,"z":"1d62f09b.653dff","wires":[[]]},{"id":"bb3b56aa.fca5a8","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":466,"y":492,"z":"1d62f09b.653dff","wires":[["686e1d0f.ea0634"]]},{"id":"686e1d0f.ea0634","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":632,"y":492,"z":"1d62f09b.653dff","wires":[["e5e7d1ac.76bb7","e6b2c683.cca4e8","41045718.d06e28","7d1276d9.b854e8"]]},{"id":"41045718.d06e28","type":"set","name":"set configuration-params","xml":"<set>\n<parameter name='configuration-params' value='`$tmp.allParams.configuration-parameters`' />\n\n","comments":"","x":851,"y":630,"z":"1d62f09b.653dff","wires":[]},{"id":"39fe603c.f8171","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":257.5,"y":828,"z":"1d62f09b.653dff","wires":[["547d62bf.0b6c4c"]]},{"id":"547d62bf.0b6c4c","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":420.5,"y":831,"z":"1d62f09b.653dff","wires":[["6d22c69f.2abc38"]]},{"id":"6d22c69f.2abc38","type":"execute","name":"execute Save in MDSal","xml":"<execute plugin='org.onap.appc.dg.common.VNFConfigurator' method='storeConfig' >\n<parameter name=\"uniqueId\" value=\"`$parameter-yang.config-file-id`\" />\n<parameter name=\"yang\" value=\"`$parameter-yang.file-content`\" />\n<parameter name=\"requestId\" value=\"`$request-id`\" />\n<parameter name=\"configJSON\" value=\"`'{&quot;vnf-config&quot;:' + $configuration-params + '}'`\" />\n<parameter name=\"prefix\" value=\"tmp.mdSalSave\" />\n\n<!--\n<parameter name=\"configJSON\" value=\"`$configuration-params`\" /> -->\n","comments":"","outputs":1,"x":643.5,"y":834,"z":"1d62f09b.653dff","wires":[["24f7581c.4787f8"]]},{"id":"24f7581c.4787f8","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":840.5,"y":838,"z":"1d62f09b.653dff","wires":[["729cb57e.d7997c"]]},{"id":"729cb57e.d7997c","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":984.5,"y":837,"z":"1d62f09b.653dff","wires":[["1591ce44.e43822","7f07065c.21aa58","dc62f036.1a331"]]},{"id":"5abbbddd.2fdd84","type":"set","name":"set:  dcae-error message","xml":"<set>\n <parameter name=\"dcae-error-message\" value=\"Unable to get Yang Model\"/>","comments":"","x":944.5,"y":708,"z":"1d62f09b.653dff","wires":[]},{"id":"8e93eb26.7e0988","type":"set","name":"set:  dcae-error message","xml":"<set>\n <parameter name=\"dcae-error-message\" value=\"`$parameter-yang.error-message`\"/>","comments":"","x":922.5,"y":769,"z":"1d62f09b.653dff","wires":[]},{"id":"1591ce44.e43822","type":"set","name":"set:  dcae-error message","xml":"<set>\n <parameter name=\"dcae-error-message\" value=\"`$tmp.mdSalSave.ERROR_MESSAGE`\"/>","comments":"","x":1194.5,"y":836,"z":"1d62f09b.653dff","wires":[]},{"id":"7f07065c.21aa58","type":"execute","name":"execute saveTxLog","xml":"<execute plugin=\"org.onap.appc.data.services.node.ConfigResourceNode\" method=\"saveConfigTransactionLog\">\n<parameter name=\"messageType\" value=\"log\" />\n<parameter name=\"message\" value=\"`'501:' + $dcae-error-message`\" />\n<parameter name=\"responsePrefix\" value=\"tmp.saveTxLog\" />\n","comments":"","outputs":1,"x":735.5,"y":934,"z":"1d62f09b.653dff","wires":[["f8490268.c930e"]]},{"id":"3c5625a1.eec71a","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1108.5,"y":935,"z":"1d62f09b.653dff","wires":[[]]},{"id":"f8490268.c930e","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":937.5,"y":936,"z":"1d62f09b.653dff","wires":[["3c5625a1.eec71a"]]},{"id":"dc62f036.1a331","type":"execute","name":"execute IntermediateMessageSender","xml":"<execute plugin='org.onap.appc.dg.common.IntermediateMessageSender' method='sendMessage' >\n<parameter name='code' value=\"501\" />\n<parameter name='message' value=\"`$dcae-error-message`\" />\n<parameter name='prefix' value=\"tmp.intermediateerror\"/>","comments":"","outputs":1,"x":766.5,"y":1008,"z":"1d62f09b.653dff","wires":[["c105074b.328e78","4f55c02f.e48f3"]]},{"id":"c105074b.328e78","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1002.5,"y":1006,"z":"1d62f09b.653dff","wires":[["1ad124f3.55337b"]]},{"id":"4f55c02f.e48f3","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":987.5,"y":1069,"z":"1d62f09b.653dff","wires":[["1ad124f3.55337b"]]},{"id":"f4496313.24acc","type":"record","name":"record","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"info\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"MSGSENDERERERROR\" value=\"Unable to call IntermediateErrorMessageSender\"/>\n","comments":"","outputs":1,"x":1310.5,"y":1041,"z":"1d62f09b.653dff","wires":[[]]},{"id":"98e0dc66.4938a","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":159,"y":206,"z":"1d62f09b.653dff","wires":[["55593da7.06c544"]]},{"id":"55593da7.06c544","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":320,"y":211,"z":"1d62f09b.653dff","wires":[["86037f00.c7dc5","a56b5f50.f6b18","33e8a0b7.d58be"]]},{"id":"811b2688.0dcd18","type":"record","name":"record","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"level\" value=\"info\"/>\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"`'PD FILE NOTFOUND ' + $parameter-definitions.error-message`\" />\n","comments":"","outputs":1,"x":1153,"y":182,"z":"1d62f09b.653dff","wires":[[]]},{"id":"285829ff.5ef416","type":"success","name":"outcome: []","xml":"<outcome value='[]'>","comments":"","outputs":1,"x":486,"y":396,"z":"1d62f09b.653dff","wires":[["392efcf6.e32734"]]},{"id":"392efcf6.e32734","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":647,"y":397,"z":"1d62f09b.653dff","wires":[[]]},{"id":"1ad124f3.55337b","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1158,"y":1038,"z":"1d62f09b.653dff","wires":[["f4496313.24acc"]]}]
