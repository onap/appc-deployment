[{"id":"c9005ac7.c57248","type":"dgstart","name":"DGSTART","outputs":1,"x":130,"y":107.57143020629883,"z":"1c322045.61564","wires":[["81c4fde7.3fb5b"]]},{"id":"81c4fde7.3fb5b","type":"service-logic","name":"APPC 4.0.0","module":"APPC","version":"4.0.0","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='APPC' version='4.0.0'>","outputs":1,"x":311.00000762939453,"y":65.1428575515747,"z":"1c322045.61564","wires":[["c35c9610.8d2ad8"]]},{"id":"c35c9610.8d2ad8","type":"method","name":"method GetTemplateConfig_Chef ","xml":"<method rpc='GetTemplateConfig_Chef' mode='sync'>\n","comments":"","outputs":1,"x":574.5476837158203,"y":68.49999618530273,"z":"1c322045.61564","wires":[["791848b0.bcbe48"]]},{"id":"791848b0.bcbe48","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","comments":"","outputs":1,"x":142.00001907348633,"y":303.50003814697266,"z":"1c322045.61564","wires":[["13786ad0.1af775","9911db8b.909de8","a0dd8b28.4c27d8"]]},{"id":"13786ad0.1af775","type":"set","name":"set tmp.message","xml":"<set>\n<parameter name=\"tmp.message\" value=\"`$error-code + ':' + $error-message`\"/>\n","comments":"","x":409.37306213378906,"y":692.8253631591797,"z":"1c322045.61564","wires":[]},{"id":"3e746174.0ab35e","type":"execute","name":"execute isPDFILE","xml":"<execute plugin=\"org.onap.appc.data.services.node.ConfigResourceNode\" method=\"getTemplateByVnfTypeNAction\">\n<parameter name=\"fileCategory\" value=\"config_template\" />\n<parameter name=\"responsePrefix\" value=\"config-template\" />","comments":"","outputs":1,"x":762.9166679382324,"y":514.1666812896729,"z":"1c322045.61564","wires":[["ca5f68cd.7df168","abf0e2c0.46e46"]]},{"id":"ca5f68cd.7df168","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1008.9166717529297,"y":494.6666507720947,"z":"1c322045.61564","wires":[[]]},{"id":"abf0e2c0.46e46","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1003.4166717529297,"y":536.6666774749756,"z":"1c322045.61564","wires":[["9285e961.bde908"]]},{"id":"9285e961.bde908","type":"call","name":"call  chefDG","xml":"<call module='APPC' rpc='' mode='sync' >\n","comments":"","outputs":1,"x":1170.416690826416,"y":539.1666574478149,"z":"1c322045.61564","wires":[["6b096ef8.220c6"]]},{"id":"6b096ef8.220c6","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1349.1667938232422,"y":540.4167070388794,"z":"1c322045.61564","wires":[["3b23acb8.aee1b4"]]},{"id":"3b23acb8.aee1b4","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n<parameter name='output.status.code' value='`$org.onap.appc.adapter.ansible.result.code`' />\n<parameter name='output.status.message' value='`$org.onap.appc.adapter.ansible.message`'/>\n<parameter name='output.status.results' value = '`$output.status.results`'/>\n","comments":"","x":1531.666706085205,"y":540.4166622161865,"z":"1c322045.61564","wires":[]},{"id":"9911db8b.909de8","type":"call","name":"call  Generic_ChefDG","xml":"<call module='APPC' rpc='Generic_ChefDG' mode='sync' >\n","comments":"","outputs":1,"x":428.3334197998047,"y":591.666748046875,"z":"1c322045.61564","wires":[["13c04cd9.b43873","3d395b6f.37d6d4"]]},{"id":"70ff03bc.550c5c","type":"execute","name":"execute: getChefRunningConfig","xml":"<execute plugin=\"org.onap.appc.data.services.node.ConfigResourceNode\" method=\"getConfigFilesByVnfActionNCategory\">\n<parameter name=\"fileCategory\" value=\"device_configuration\" />\n<parameter name='vnfname' value=\"`$config.vnf-name`\" />\n<parameter name='action' value=\"`$config.action`\" />\n<parameter name=\"responsePrefix\" value=\"tmp.deviceconfig\" />\n","comments":"","outputs":1,"x":1041.66650390625,"y":158.33333206176758,"z":"1c322045.61564","wires":[["e0166624.d85ba8","2d46c9a9.5e4556","60877372.7124dc"]]},{"id":"60877372.7124dc","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1187.6665115356445,"y":240.3333044052124,"z":"1c322045.61564","wires":[["594ea12a.967b5"]]},{"id":"594ea12a.967b5","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1350.6665115356445,"y":240.3333044052124,"z":"1c322045.61564","wires":[["69841f84.beca3"]]},{"id":"2d46c9a9.5e4556","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1335.6665115356445,"y":183.3333044052124,"z":"1c322045.61564","wires":[[]]},{"id":"e0166624.d85ba8","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1341.3331909179688,"y":120.99998950958252,"z":"1c322045.61564","wires":[["afceb049.effd"]]},{"id":"69841f84.beca3","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n<parameter name='device-running-config' value=\"`$tmp.deviceconfig.file-content`\" />\n","comments":"","x":1553.6665115356445,"y":242.3333044052124,"z":"1c322045.61564","wires":[]},{"id":"afceb049.effd","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1517.3331909179688,"y":124.99998950958252,"z":"1c322045.61564","wires":[["89203f87.bdd35"]]},{"id":"89203f87.bdd35","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n<parameter name=\"error-code\" value=\"\"/>\n<parameter name=\"dcae-error-message\" value=\"`$tmp.deviceconfig.error-message`\"/>\n\n","comments":"","x":1709.3331909179688,"y":117.99998950958252,"z":"1c322045.61564","wires":[]},{"id":"a0dd8b28.4c27d8","type":"execute","name":"execute getTemplate","xml":"<execute plugin=\"org.onap.appc.data.services.node.ConfigResourceNode\" method=\"getTemplate\">\n<parameter name=\"fileCategory\" value=\"config_template\" />\n<parameter name=\"responsePrefix\" value=\"config-template\" />","comments":"","outputs":1,"x":414.66676330566406,"y":274.1072106361389,"z":"1c322045.61564","wires":[["209fd4e.f5e6a2c","c880f1bf.06526"]]},{"id":"c880f1bf.06526","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":629.3811264038086,"y":316.52382373809814,"z":"1c322045.61564","wires":[["3e7c0fa2.d88be"]]},{"id":"3e7c0fa2.d88be","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":821.1112251281738,"y":317.6666851043701,"z":"1c322045.61564","wires":[["daf816d8.f062d8"]]},{"id":"daf816d8.f062d8","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n<parameter name=\"error-code\" value=\"401\"/>\n\t<parameter name=\"error-message\" value=\"`$config-template.error-message`\"/>\n\t\n\t\n\t","comments":"","x":1050.7779960632324,"y":320.44445514678955,"z":"1c322045.61564","wires":[]},{"id":"209fd4e.f5e6a2c","type":"failure","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":635.9049377441406,"y":239.19051837921143,"z":"1c322045.61564","wires":[["32a527f0.aabd78"]]},{"id":"32a527f0.aabd78","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":820.2381896972656,"y":243.52384662628174,"z":"1c322045.61564","wires":[["70ff03bc.550c5c"]]},{"id":"3d395b6f.37d6d4","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":651.6666259765625,"y":703.3333129882812,"z":"1c322045.61564","wires":[["d444f8cd.5ab698"]]},{"id":"d444f8cd.5ab698","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n<parameter name='device-running-config' value=\"`$tmp.deviceconfig.file-content`\" />\n<parameter name='output.status.code' value='`$output.status.code`' />\n<parameter name='output.status.message' value='`$output.status.message`'/>\n<parameter name='output.status.results' value = '`$output.status.results`'/>\n","comments":"","x":869.3810539245605,"y":709.7618341445923,"z":"1c322045.61564","wires":[]},{"id":"13c04cd9.b43873","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":635.952320098877,"y":604.7617607116699,"z":"1c322045.61564","wires":[["c021af06.07788"]]},{"id":"c021af06.07788","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='output.status.code' value='200' />\n<parameter name='output.status.message' value='`$output.status.message`'/>\n","comments":"","x":887.3808403015137,"y":620.4760093688965,"z":"1c322045.61564","wires":[]}]
