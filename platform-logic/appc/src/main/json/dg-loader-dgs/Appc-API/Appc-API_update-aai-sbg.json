[{"id":"e4acf725.3e5368","type":"dgstart","name":"DGSTART","outputs":1,"x":144,"y":101.66667938232422,"z":"228e37c6.d64d28","wires":[["f2b8f674.218f68"]]},{"id":"f2b8f674.218f68","type":"service-logic","name":"Appc-API 4.0.0","module":"Appc-API","version":"4.0.0","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='Appc-API' version='4.0.0'>","outputs":1,"x":316.16668701171875,"y":99.33333587646484,"z":"228e37c6.d64d28","wires":[["ee859c41.5b3d"]]},{"id":"ee859c41.5b3d","type":"method","name":"method update-aai-sbg","xml":"<method rpc='update-aai-sbg' mode='sync'>\n","comments":"","outputs":1,"x":542.5000610351562,"y":96,"z":"228e37c6.d64d28","wires":[["1ea263b6.f7623c"]]},{"id":"f1224205.fa0ae","type":"get-resource","name":"get-resource: A&AI Data for VNF","xml":"<get-resource plugin=\"org.openecomp.sli.aai.AAIService\" resource=\"generic-vnf\" key=\"generic-vnf.vnf-name = $service-configuration-notification-input.service-information.service-instance-id\" pfx=\"tmp.aai-data-vnf\" >\n\n\n","comments":"","outputs":1,"x":482,"y":488.6666793823242,"z":"228e37c6.d64d28","wires":[["e82e0adb.b65708","e9062897.951a98","10e2236c.ca781d"]]},{"id":"1ea263b6.f7623c","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":156,"y":446.5555648803711,"z":"228e37c6.d64d28","wires":[["c6cade3b.45348","6ac564d6.b69f3c","f1224205.fa0ae"]]},{"id":"590ffc26.02a9c4","type":"save","name":"update: A&AI ( VNF)","xml":"<update plugin=\"org.openecomp.sdnc.sli.aai.AAIService\" resource=\"generic-vnf\" key=\"generic-vnf.vnf-id = $tmp.aai-data-vnf.vnf-id\" force=\"true\" local-only=\"false\" pfx=\"tmp.AnAI-data.vnf\" >\n<parameter name=\"prov-status\" value=\"`$tmp.aai-prov-status`\"/>\n\t","comments":"","outputs":1,"x":1110,"y":553.6666793823242,"z":"228e37c6.d64d28","wires":[["93c45525.6bbad8"]]},{"id":"93c45525.6bbad8","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1315,"y":553.6666793823242,"z":"228e37c6.d64d28","wires":[["ab29e001.3519f"]]},{"id":"e82e0adb.b65708","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":747,"y":271.5555648803711,"z":"228e37c6.d64d28","wires":[["88be6342.bfb18"]]},{"id":"10e2236c.ca781d","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":742,"y":418.5555648803711,"z":"228e37c6.d64d28","wires":[["ef7853e6.66e51"]]},{"id":"88be6342.bfb18","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":927,"y":268.5555648803711,"z":"228e37c6.d64d28","wires":[["17750ac8.a59a05","f95ae508.8ceb48"]]},{"id":"f95ae508.8ceb48","type":"set","name":"set: Append to error message","xml":"<set>\n\t  <parameter name=\"error-message\" value=\"`'Get from A&amp;AI Failed for ' + $service-configuration-notification-input.service-information.service-instance-id + '.' + $error-message`\"/>","comments":"","x":1177,"y":292.5555648803711,"z":"228e37c6.d64d28","wires":[]},{"id":"17750ac8.a59a05","type":"record","name":"record","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"Get Request to AnAI Failed\"/>\n<parameter name=\"field3\" value=\"`$service-configuration-notification-input.service-information.service-instance-id`\"/>\n\n","comments":"","outputs":1,"x":1127,"y":219.5555648803711,"z":"228e37c6.d64d28","wires":[[]]},{"id":"c6cade3b.45348","type":"record","name":"record","xml":"<record plugin=\"org.openecomp.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"CALLING Get fOR SERVICEINSTANCEID\"/>\n<parameter name=\"field3\" value=\"`$service-configuration-notification-input.service-information.service-instance-id`\"/>\n<parameter name=\"RESPONSEMSG\" value=\"`$response-message`\"/>\n","comments":"","outputs":1,"x":396,"y":410.5555648803711,"z":"228e37c6.d64d28","wires":[[]]},{"id":"e9062897.951a98","type":"failure","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":741,"y":534.6666793823242,"z":"228e37c6.d64d28","wires":[["fe9270b6.c94b1"]]},{"id":"fe9270b6.c94b1","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":904,"y":534.6666793823242,"z":"228e37c6.d64d28","wires":[["590ffc26.02a9c4","a951e2eb.c2b06","e0c6e7c0.4f70a8","251b1675.5c6f5a"]]},{"id":"a951e2eb.c2b06","type":"record","name":"record","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"VNFID\" value=\"`$tmp.aai-data-vnf.vnf-id`\"/>\n<parameter name=\"RELATIONSHIPLEN\" value=\"`$tmp.aai-data-vnf.relationship-list.relationship_length`\"/>\n<parameter name=\"RELATIONSHIPVALUE\" value=\"`$tmp.aai-data-vnf.relationship-list.relationship[0].relationship-data[0].relationship-value`\"/>\n","comments":"","outputs":1,"x":1076,"y":505.6666488647461,"z":"228e37c6.d64d28","wires":[[]]},{"id":"ab29e001.3519f","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1486,"y":550.6666793823242,"z":"228e37c6.d64d28","wires":[["6accc3cf.d7a9cc","69bca953.dd37e8"]]},{"id":"6accc3cf.d7a9cc","type":"set","name":"set: Append to error message","xml":"<set>\n\t  <parameter name=\"error-message\" value=\"`'Update to A&amp;AI Failed for ' + $tmp.aai-data-vnf.vnf-id + '.' + $error-message`\"/>","comments":"","x":1747,"y":558.6666793823242,"z":"228e37c6.d64d28","wires":[]},{"id":"69bca953.dd37e8","type":"record","name":"record","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"Update Request to AnAI Failed\"/>\n<parameter name=\"field3\" value=\"`$tmp.aai-data-vnf.vnf-id`\"/>\n\n","comments":"","outputs":1,"x":1675,"y":509.6666488647461,"z":"228e37c6.d64d28","wires":[[]]},{"id":"6ac564d6.b69f3c","type":"set","name":"set: Append to response-message","xml":"<set>\n\t  <parameter name=\"response-message\" value=\"`$error-message + '.' + $response-message`\"/>","comments":"","x":465,"y":581.5555953979492,"z":"228e37c6.d64d28","wires":[]},{"id":"ef7853e6.66e51","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":908,"y":420.6666793823242,"z":"228e37c6.d64d28","wires":[["fed74f08.2ce21","c1e7cc99.a9f12"]]},{"id":"fed74f08.2ce21","type":"record","name":"record","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"Get Request to AnAI Failed\"/>\n<parameter name=\"field3\" value=\"`$service-configuration-notification-input.service-information.service-instance-id`\"/>\n<parameter name=\"ErrorMessage\" value=\"`$tmp.aai-data-vnf.error-message`\"/>\n<parameter name=\"HTTP Code\" value=\"`$tmp.aai-data-vnf.error.http.response-code`\"/>","comments":"","outputs":1,"x":1077,"y":384.6666793823242,"z":"228e37c6.d64d28","wires":[[]]},{"id":"c1e7cc99.a9f12","type":"set","name":"set: Append to error message","xml":"<set>\n<parameter name=\"error-message\" value=\"`'Get from A&amp;AI Failed for ' + $service-configuration-notification-input.service-information.service-instance-id + '.' + $tmp.aai-data-vnf.error-message + '.HTTP Code:' + $tmp.aai-data-vnf.error.http.response-code + '.' + $error-message `\"/>\n","comments":"","x":1139,"y":436.6666793823242,"z":"228e37c6.d64d28","wires":[]},{"id":"e0c6e7c0.4f70a8","type":"call","name":"call: update-vserver-info","xml":"<call module=\"Appc-API\" rpc=\"update-vserver-info\" mode=\"sync\">","comments":"","outputs":1,"x":1117,"y":603.7777633666992,"z":"228e37c6.d64d28","wires":[[]]},{"id":"251b1675.5c6f5a","type":"call","name":"call: update-vnfc-info","xml":"<call module=\"Appc-API\" rpc=\"update-vnfc-info\" mode=\"sync\">","comments":"","outputs":1,"x":1093,"y":655.7777633666992,"z":"228e37c6.d64d28","wires":[[]]}]
