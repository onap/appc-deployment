[{"id":"b3e9ca3e.4155c8","type":"comment","name":"Service-Configuration-Activate","info":"","comments":"","x":1059.25,"y":84,"z":"2befdf15.e7ed7","wires":[]},{"id":"3f133fd0.beea1","type":"dgstart","name":"DGSTART","outputs":1,"x":187,"y":132.1111068725586,"z":"2befdf15.e7ed7","wires":[["8ce9de01.e9f6d"]]},{"id":"8ce9de01.e9f6d","type":"service-logic","name":"Appc-API 4.0.0","module":"Appc-API","version":"4.0.0","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='Appc-API' version='4.0.0'>","outputs":1,"x":338.1667022705078,"y":132.77776336669922,"z":"2befdf15.e7ed7","wires":[["8206b75c.b8a748"]]},{"id":"8206b75c.b8a748","type":"method","name":"method service-configuration-activate","xml":"<method rpc='service-configuration-activate' mode='sync'>\n","comments":"","outputs":1,"x":593.5000305175781,"y":132.44442749023438,"z":"2befdf15.e7ed7","wires":[["811b5d04.63a55"]]},{"id":"60c68922.bd8d38","type":"switchNode","name":"switch: order-status","xml":"<switch test=\"`$service-data.oper-status.order-status`\">\n<!--\nleaf order-status {\n\ttype enumeration {\n\t\tenum \"Reserved\";\n\t\tenum \"Activated\";\n\t\tenum \"PendingDelete\";\n\t\tenum \"RequestFailed\";\n\t\tenum \"InProgressTimeout\";\n\t\tenum \"InProgress\";\n\t\tenum \"PendingActivate\";\n\t}\n}\n-->","comments":"","outputs":1,"x":201.26312255859375,"y":328.3101501464844,"z":"2befdf15.e7ed7","wires":[["40c323c3.f0454c","bbca989a.d459c8","d9754250.d9738","703c1455.ded06c"]]},{"id":"40c323c3.f0454c","type":"outcome","name":"Reserved","xml":"<outcome value='Reserved'>","comments":"","outputs":1,"x":407.4147033691406,"y":378.154296875,"z":"2befdf15.e7ed7","wires":[["c2961663.108ab8"]]},{"id":"c2961663.108ab8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":595.4318237304688,"y":342.6607666015625,"z":"2befdf15.e7ed7","wires":[["2a895dab.2d2642","9397a0c9.48f35","2cdf9781.2c80a8","b2ef72eb.cef11","e66a402d.e9c73","e22aac8d.ca469","d64207f5.1d98f8"]]},{"id":"9397a0c9.48f35","type":"set","name":"set: maintinance-indicator = N","xml":"<set>\n\t<parameter name='service-data.oper-status.maintenance-indicator' value='N' />","comments":"","x":862.19384765625,"y":554.8492431640625,"z":"2befdf15.e7ed7","wires":[]},{"id":"bffe67e0.0e1c18","type":"failure","name":"failure","xml":"<outcome value='failure'>","outputs":1,"x":994.10693359375,"y":637.1112060546875,"z":"2befdf15.e7ed7","wires":[["29f6c408.4597ac"]]},{"id":"29f6c408.4597ac","type":"block","name":"block : atomic","xml":"<block>","atomic":"true","comments":"","outputs":1,"x":1189.1068115234375,"y":636.1112060546875,"z":"2befdf15.e7ed7","wires":[["5ffc38ce.2ef528","9a7bb0c1.f0b4f"]]},{"id":"bbca989a.d459c8","type":"other","name":"Other","xml":"<outcome value='Other'>\n\n<!-- null, PendingActivate, Activated, Audited -->","comments":"","outputs":1,"x":292.7738952636719,"y":846.9207153320312,"z":"2befdf15.e7ed7","wires":[["a3228f41.ad99"]]},{"id":"2a895dab.2d2642","type":"set","name":"set: last-sub-action-status = InProgress","xml":"<set>\n\t<parameter name=\"service-data.oper-status.last-sub-action-status\" value=\"InProgress\" />","comments":"","x":882.4404296875,"y":375.44451904296875,"z":"2befdf15.e7ed7","wires":[]},{"id":"2cdf9781.2c80a8","type":"execute","name":"execute: setTime(modify-timestamp)","xml":"<execute plugin=\"com.att.sdnctl.sli.plugin.ipAddressTools.IpAddressTool\" method=\"setTime\">\n\t<parameter name=\"ctxVariable\" value=\"service-data.oper-status.modify-timestamp\"/>","comments":"","outputs":1,"x":876.2498779296875,"y":427,"z":"2befdf15.e7ed7","wires":[[]]},{"id":"a3228f41.ad99","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='400'/>\n\t<parameter name='error-message' value='Invalid Order Status State'/>\n\t<parameter name='ack-final' value='Y'/>","comments":"","x":481.58331298828125,"y":843.3333129882812,"z":"2befdf15.e7ed7","wires":[]},{"id":"eb24c6eb.ab8b28","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t<parameter name=\"error-code\" value=\"404\"/>\n\t<parameter name=\"error-message\" value=\"Service instance not found in config tree\"/>\n\t<parameter name='ack-final' value='Y'/>","comments":"","x":783.77392578125,"y":192.46835327148438,"z":"2befdf15.e7ed7","wires":[]},{"id":"5a9b740c.a08a8c","type":"outcomeFalse","name":"false","xml":"<outcome value=\"false\">","comments":"","outputs":1,"x":604.583251953125,"y":190.66664123535156,"z":"2befdf15.e7ed7","wires":[["eb24c6eb.ab8b28"]]},{"id":"5c9b5822.0afcb8","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>","comments":"","outputs":1,"x":598.9165649414062,"y":234.00001525878906,"z":"2befdf15.e7ed7","wires":[["60c68922.bd8d38"]]},{"id":"811b5d04.63a55","type":"switchNode","name":"switch: service-instance-id  config == input","xml":"<switch test=\"`$service-configuration-operation-input.service-information.service-instance-id == $service-data.service-information.service-instance-id`\">","comments":"","outputs":1,"x":261.2498474121094,"y":209.99998474121094,"z":"2befdf15.e7ed7","wires":[["5a9b740c.a08a8c","5c9b5822.0afcb8"]]},{"id":"b2ef72eb.cef11","type":"save","name":"save: modify-timestamp","xml":"<save plugin=\"org.openecomp.sdnc.sli.resource.mdsal.ConfigResource\" resource=\"service-data\">\n\t\t<parameter name=\"service-data.oper-status.modify-timestamp\" value=\"`$service-data.oper-status.modify-timestamp`\" />","comments":"","outputs":1,"x":838.25,"y":490,"z":"2befdf15.e7ed7","wires":[[]]},{"id":"6ad3b297.a2fb1c","type":"failure","name":"success","xml":"<outcome value='success'>","comments":"","outputs":1,"x":991.2498779296875,"y":904,"z":"2befdf15.e7ed7","wires":[["ff3d958f.811738"]]},{"id":"ff3d958f.811738","type":"block","name":"block : atomic","xml":"<block>","atomic":"true","comments":"","outputs":1,"x":1193.91650390625,"y":901.3333740234375,"z":"2befdf15.e7ed7","wires":[["ebb07551.365d58","228ffb48.c84564"]]},{"id":"ebb07551.365d58","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n\t<parameter name=\"error-code\" value=\"200\" />","comments":"","x":1500.2498779296875,"y":1010,"z":"2befdf15.e7ed7","wires":[]},{"id":"af386884.2ac718","type":"comment","name":"OrderStatus null - NO prepare done","info":"","comments":"","x":198.5,"y":913,"z":"2befdf15.e7ed7","wires":[]},{"id":"bc7aa1d2.0a627","type":"set","name":"set: order-status = RequestFailed","xml":"<set>\n\t<parameter name=\"service-data.oper-status.order-status\" value=\"RequestFailed\" />","comments":"","x":1584.2498779296875,"y":588,"z":"2befdf15.e7ed7","wires":[]},{"id":"e66a402d.e9c73","type":"GenericXML","name":"set: last-action, last-sub-action, last-svc-request-id, last-order-status","xml":"<set>\n\t<parameter name=\"service-data.oper-status.last-action\" value=\"VsbgServiceActivateRequest\" />\n\t<parameter name=\"service-data.oper-status.last-sub-action\" value=\"`$service-configuration-operation-input.request-information.request-sub-action`\" />\n\t<parameter name=\"service-data.oper-status.last-svc-request-id\" value=\"`$service-configuration-operation-input.sdnc-request-header.svc-request-id`\" />\n\t<parameter name=\"service-data.oper-status.last-order-status\" value=\"`$service-data.oper-status.order-status`\" />\n\n","comments":"","outputs":1,"x":961.2498779296875,"y":320,"z":"2befdf15.e7ed7","wires":[[]]},{"id":"eb1b467c.6f2918","type":"set","name":"set: order-status = PendingActivate","xml":"<set>\n\t<parameter name=\"service-data.oper-status.order-status\" value=\"PendingActivate\" />","comments":"","x":1554.2498779296875,"y":891,"z":"2befdf15.e7ed7","wires":[]},{"id":"138fb80d.270098","type":"comment","name":"Only Need Service_instance_id from input","info":"","comments":"","x":1239,"y":407,"z":"2befdf15.e7ed7","wires":[]},{"id":"e22aac8d.ca469","type":"configure","name":"configure: ConfigComponentAdaptor","xml":"<configure adaptor=\"org.openecomp.appc.ccadaptor.ConfigComponentAdaptor\" key=\"dummy\">\n\t<parameter name=\"action\" value=\"activate\"/>\n\t\n\n\t","comments":"","outputs":1,"x":726.25,"y":666,"z":"2befdf15.e7ed7","wires":[["bffe67e0.0e1c18","6ad3b297.a2fb1c"]]},{"id":"d64207f5.1d98f8","type":"record","name":"record","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"service-configuration-operation:Activate:Before Calling ConfigAdaptor\"/>\n<parameter name=\"field3\" value=\"`$service-data.oper-status.order-status`\"/>\n<parameter name=\"field4\" value=\"`$service-data.service-information.service-instance-id`\"/>\n<parameter name=\"field5\" value=\"`$service-data.vnf-config-information.vnf-type`\"/>\n\n<parameter name=\"field7\" value=\"`$service-data.vnf-config-information.vnf-host-ip-address`\"/>\n\n\n","comments":"","outputs":1,"x":789,"y":608,"z":"2befdf15.e7ed7","wires":[[]]},{"id":"5ffc38ce.2ef528","type":"record","name":"record","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"service-configuration-operation:Activate:After Calling ConfigAdaptor:Failure\"/>\n<parameter name=\"field3\" value=\"`$service-data.oper-status.order-status`\"/>\n<parameter name=\"field4\" value=\"`$service-data.service-information.service-instance-id`\"/>\n<parameter name=\"field5\" value=\"`$service-data.vnf-config-information.vnf-type`\"/>\n\n<parameter name=\"field7\" value=\"`$service-data.vnf-config-information.vnf-host-ip-address`\"/>\n\n\n","comments":"","outputs":1,"x":1494,"y":547,"z":"2befdf15.e7ed7","wires":[[]]},{"id":"228ffb48.c84564","type":"record","name":"record","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"service-configuration-operation:Activate:After Calling ConfigAdaptor:Success\"/>\n<parameter name=\"field3\" value=\"`$service-data.oper-status.order-status`\"/>\n<parameter name=\"field4\" value=\"`$service-data.service-information.service-instance-id`\"/>\n<parameter name=\"field5\" value=\"`$service-data.vnf-config-information.vnf-type`\"/>\n<parameter name=\"field7\" value=\"`$service-data.vnf-config-information.vnf-host-ip-address`\"/>\n\n\n","comments":"","outputs":1,"x":1471,"y":831,"z":"2befdf15.e7ed7","wires":[[]]},{"id":"d9754250.d9738","type":"outcome","name":"RequestFailed","xml":"<outcome value='RequestFailed'>","comments":"","outputs":1,"x":416.25,"y":315,"z":"2befdf15.e7ed7","wires":[["c2961663.108ab8"]]},{"id":"531e0377.38426c","type":"outcome","name":"InProgressTimeout","xml":"<outcome value='InProgressTimeout'>","comments":"","outputs":1,"x":437.25,"y":511,"z":"2befdf15.e7ed7","wires":[[]]},{"id":"f1b8d911.b461b8","type":"set","name":"set: last-sub-action-status = RequestFailed","xml":"<set>\n\t<parameter name=\"service-data.oper-status.last-sub-action-status\" value=\"RequestFailed\" />","comments":"","x":1611.25,"y":632,"z":"2befdf15.e7ed7","wires":[]},{"id":"806dae42.18b58","type":"comment","name":"LastSubAction status set on Notification","info":"","comments":"","x":1945.25,"y":630,"z":"2befdf15.e7ed7","wires":[]},{"id":"80611c27.37811","type":"comment","name":"Set Order Status on Notification","info":"","comments":"","x":1761.25,"y":801,"z":"2befdf15.e7ed7","wires":[]},{"id":"9a7bb0c1.f0b4f","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>","comments":"","x":1518.25,"y":685,"z":"2befdf15.e7ed7","wires":[]},{"id":"703c1455.ded06c","type":"outcome","name":"PendingActivate","xml":"<outcome value='PendingActivate'>","comments":"","outputs":1,"x":406.25,"y":431,"z":"2befdf15.e7ed7","wires":[["c2961663.108ab8"]]}]
