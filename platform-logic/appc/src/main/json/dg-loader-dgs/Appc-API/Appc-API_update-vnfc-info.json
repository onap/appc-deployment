[{"id":"e04ef47c.3215f8","type":"get-resource","name":"get-resource: A&AI Data for VServer","xml":"<get-resource plugin=\"org.openecomp.sdnc.sli.aai.AAIService\" resource=\"vserver\" \nkey=\"vserver.vserver-id = $aaiinfo[$k].vserverid AND \ntenant.tenant-id = $aaiinfo[$k].tenantid AND\ncloud-owner.cloud-owner = $aaiinfo[$k].cloudowner AND\ncloud-owner.cloud-region-id = $aaiinfo[$k].cloudregionid\"\npfx=\"tmp.vserver\" >\n\n","comments":"","outputs":1,"x":687,"y":242,"z":"41b72404.afec6c","wires":[["90723a84.da0ac8","1641aacf.1bb8d5","ce2e4797.e5dce8"]]},{"id":"db0c2b7a.2249b8","type":"dgstart","name":"DGSTART","outputs":1,"x":182,"y":88,"z":"41b72404.afec6c","wires":[["b4a8117e.15ffe"]]},{"id":"b4a8117e.15ffe","type":"service-logic","name":"Appc-API 4.0.0","module":"Appc-API","version":"4.0.0","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='Appc-API' version='4.0.0'>","outputs":1,"x":353,"y":88,"z":"41b72404.afec6c","wires":[["a986558f.a02158"]]},{"id":"a986558f.a02158","type":"method","name":"method update-vnfc-info","xml":"<method rpc='update-vnfc-info' mode='sync'>\n","comments":"","outputs":1,"x":571,"y":87,"z":"41b72404.afec6c","wires":[["f40274ec.45dc48"]]},{"id":"f40274ec.45dc48","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":191,"y":169,"z":"41b72404.afec6c","wires":[["35510db3.59edd2","7914ac5c.128d94"]]},{"id":"35510db3.59edd2","type":"set","name":"set vnfclistlen=0","xml":"<set>\n<parameter name='vnfclistlen' value='0' />\n","comments":"","x":389,"y":169,"z":"41b72404.afec6c","wires":[]},{"id":"7914ac5c.128d94","type":"for","name":"for: ...aaiinfo[]","xml":"<for atomic=\"true\" index=\"k\" start=\"0\" end=\"`$listlen`\" >","comments":"","outputs":1,"x":221,"y":242,"z":"41b72404.afec6c","wires":[["3045b1d2.35ddce"]]},{"id":"3045b1d2.35ddce","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":425,"y":242,"z":"41b72404.afec6c","wires":[["e04ef47c.3215f8"]]},{"id":"90723a84.da0ac8","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":950,"y":200,"z":"41b72404.afec6c","wires":[["779f4d7e.48c3a4"]]},{"id":"1641aacf.1bb8d5","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":932,"y":262,"z":"41b72404.afec6c","wires":[["779f4d7e.48c3a4"]]},{"id":"ce2e4797.e5dce8","type":"failure","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":175,"y":361,"z":"41b72404.afec6c","wires":[["d50c31cf.afdcb"]]},{"id":"779f4d7e.48c3a4","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1110,"y":231,"z":"41b72404.afec6c","wires":[["19b92c9d.0883c3","978de4c4.502568"]]},{"id":"d50c31cf.afdcb","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":345,"y":359,"z":"41b72404.afec6c","wires":[["242033b4.b7cefc"]]},{"id":"242033b4.b7cefc","type":"switchNode","name":"switch: relationship length","xml":"<switch test=\"`$tmp.vserver.relationship-list.relationship_length`\">","comments":"","outputs":1,"x":592,"y":356,"z":"41b72404.afec6c","wires":[["4b73af6.16da35","9dee33de.63fe4"]]},{"id":"9dee33de.63fe4","type":"other","name":"Other","xml":"<outcome value=\"Other\">","comments":"","outputs":1,"x":148,"y":470,"z":"41b72404.afec6c","wires":[["9d7a03cc.e03f9"]]},{"id":"4b73af6.16da35","type":"outcome","name":"NULL","xml":"<outcome value=\"\">","comments":"","outputs":1,"x":837,"y":360,"z":"41b72404.afec6c","wires":[["ad47714f.d22d7"]]},{"id":"ad47714f.d22d7","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1000,"y":362,"z":"41b72404.afec6c","wires":[[]]},{"id":"9d7a03cc.e03f9","type":"for","name":"for: ...relationship[]","xml":"<for atomic=\"true\" index=\"i\" start=\"0\" end=\"`$tmp.vserver.relationship-list.relationship_length`\" >","comments":"","outputs":1,"x":311,"y":472,"z":"41b72404.afec6c","wires":[["492c0783.96c068"]]},{"id":"2c5f0c84.d10154","type":"switchNode","name":"switch: ...related-to","xml":"<switch test=\"`$tmp.vserver.relationship-list.relationship[$i].related-to`\">","comments":"","outputs":1,"x":416,"y":534,"z":"41b72404.afec6c","wires":[["bc7fa4da.47b9a8"]]},{"id":"bc7fa4da.47b9a8","type":"outcome","name":"vnfc","xml":"<outcome value=\"vnfc\">","comments":"","outputs":1,"x":606,"y":531,"z":"41b72404.afec6c","wires":[["11b7918.6ecea6f"]]},{"id":"11b7918.6ecea6f","type":"for","name":"for: ...relationship-data[]","xml":"<for atomic=\"true\" index=\"j\" start=\"0\" end=\"`$tmp.vserver.relationship-list.relationship[$i].relationship-data_length`\" >","comments":"","outputs":1,"x":810,"y":524,"z":"41b72404.afec6c","wires":[["ee37b8a1.0891d8"]]},{"id":"ee37b8a1.0891d8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":205,"y":627,"z":"41b72404.afec6c","wires":[["8445cf0d.2611f"]]},{"id":"8445cf0d.2611f","type":"switchNode","name":"switch: ...relationship-key","xml":"<switch test=\"`$tmp.vserver.relationship-list.relationship[$i].relationship-data[$j].relationship-key`\">","comments":"","outputs":1,"x":428,"y":627,"z":"41b72404.afec6c","wires":[["549f9c75.4154b4"]]},{"id":"549f9c75.4154b4","type":"outcome","name":"vnfc-name","xml":"<outcome value=\"vnfc.vnfc-name\">","comments":"","outputs":1,"x":636,"y":626,"z":"41b72404.afec6c","wires":[["4324c492.53486c"]]},{"id":"492c0783.96c068","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":199,"y":539,"z":"41b72404.afec6c","wires":[["2c5f0c84.d10154"]]},{"id":"978de4c4.502568","type":"set","name":"set: Append to error message","xml":"<set>\n\t  <parameter name=\"error-message\" value=\"`'Get from A&amp;AI Failed for ' + $aaiinfo[$k].vserverid  + '.' + $error-message`\"/>","comments":"","x":1350,"y":252,"z":"41b72404.afec6c","wires":[]},{"id":"19b92c9d.0883c3","type":"record","name":"record","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"Get Request to AnAI Failed\"/>\n<parameter name=\"field3\" value=\"`$service-configuration-notification-input.service-information.service-instance-id`\"/>\n\n","comments":"","outputs":1,"x":1279,"y":183,"z":"41b72404.afec6c","wires":[[]]},{"id":"b826abf3.300a78","type":"save","name":"update: A&AI  VNFC","xml":"<update plugin=\"org.openecomp.sdnc.sli.aai.AAIService\" resource=\"vnfc\" \nkey=\"vnfc.vnfc-name = $tmp.vserver.relationship-list.relationship[$i].relationship-data[$j].relationship-value and \nvserver.vserver-id = $aaiinfo[$k].vserverid AND \ntenant.tenant-id = $aaiinfo[$k].tenantid AND \ncloud-region.region-id = $aaiinfo[$k].cloudregionid \"  \nforce=\"true\" local-only=\"false\" pfx=\"tmp.AnAI-data.vnf\" >\n<parameter name=\"prov-status\" value=\"`$tmp.aai-prov-status`\"/>\n<parameter name=\"orchestration-status\" value=\"`$tmp.aai-orch-status`\"/>","comments":"","outputs":1,"x":1034,"y":632,"z":"41b72404.afec6c","wires":[["7cdb0cb0.1522c4"]]},{"id":"7cdb0cb0.1522c4","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1217,"y":633,"z":"41b72404.afec6c","wires":[["c7cfd40b.5685e8"]]},{"id":"c7cfd40b.5685e8","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1376,"y":635,"z":"41b72404.afec6c","wires":[["699e97c2.6a8028","e8a05782.1f7848"]]},{"id":"699e97c2.6a8028","type":"record","name":"record","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"Update Request to AnAI Failed\"/>\n<parameter name=\"VNFCNAME\" value=\"`$vnfcinfo[$vnfclistlen].vnfcname`\"/>\n<parameter name=\"VSERVERID\" value=\"`$vnfcinfo[$vnfclistlen].vserverid`\"/>\n<parameter name=\"TENANTID\" value=\"`$vnfcinfo[$vnfclistlen].tenantid`\"/>\n\n","comments":"","outputs":1,"x":1559,"y":592,"z":"41b72404.afec6c","wires":[[]]},{"id":"e8a05782.1f7848","type":"set","name":"set: Append to error message","xml":"<set>\n\t  <parameter name=\"error-message\" value=\"`'Update to A&amp;AI Failed for VNFC ' + $vnfcinfo[$vnfclistlen].vnfcname + '.' + $error-message`\"/>","comments":"","x":1621,"y":664,"z":"41b72404.afec6c","wires":[]},{"id":"4324c492.53486c","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":812,"y":628,"z":"41b72404.afec6c","wires":[["b826abf3.300a78","4bca8618.535918"]]},{"id":"4bca8618.535918","type":"record","name":"record","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"VNFCNAME\" value=\"`$tmp.vserver.relationship-list.relationship[$i].relationship-data[$j].relationship-value`\"/>\n<parameter name=\"VSERVERID\" value=\"`$aaiinfo[$k].vserverid`\"/>\n<parameter name=\"TENANTID\" value=\"`$aaiinfo[$k].tenantid`\"/>\n<parameter name=\"CLOUDOWNER\" value=\"`$aaiinfo[$k].cloudowner`\"/>\n<parameter name=\"CLOUDREGIONID\" value=\"`$aaiinfo[$k].cloudregionid`\"/>\n","comments":"","outputs":1,"x":1005,"y":577,"z":"41b72404.afec6c","wires":[[]]}]
